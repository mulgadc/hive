import{c as O,bn as q,u as D,bo as J,j as s,bp as K,B as M}from"./index.js";import{a as T,u as U,I as W}from"./zod.js";import{u as X}from"./useSuspenseQuery.js";import{B as A}from"./back-link.js";import{E as Y,L as Z}from"./error-banner.js";import{P as ee}from"./page-heading.js";import{c as se}from"./ec2.js";import"./useMutation.js";function ce(){const e=O.c(57),{id:k}=q.useParams(),o=D();let N;e[0]!==k?(N=K(k),e[0]=k,e[1]=N):N=e[1];const{data:Q}=X(N),L=Q.Volumes?.[0],t=L?.VolumeId,l=se(),i=L?.Size??1;let a;e[2]!==i?(a=T(J.refine(r=>r.size>i,{message:`New size must be greater than current size (${i} GiB)`,path:["size"]})),e[2]=i,e[3]=a):a=e[3];let n;e[4]!==i?(n={size:i},e[4]=i,e[5]=n):n=e[5];let S;e[6]!==a||e[7]!==n?(S={resolver:a,defaultValues:n},e[6]=a,e[7]=n,e[8]=S):S=e[8];const{handleSubmit:F,register:$,formState:H}=U(S),{errors:B,isSubmitting:w}=H;if(!t){let r;return e[9]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsxs(s.Fragment,{children:[s.jsx(A,{to:"/ec2/describe-volumes",children:"Back to volumes"}),s.jsx("p",{className:"text-muted-foreground",children:"Volume not found."})]}),e[9]=r):r=e[9],r}let V;e[10]!==l||e[11]!==o||e[12]!==t?(V=async r=>{await l.mutateAsync({...r,volumeId:t}),o({to:"/ec2/describe-volumes/$id",params:{id:t}})},e[10]=l,e[11]=o,e[12]=t,e[13]=V):V=e[13];const E=V;let m,c;e[14]!==t?(m=s.jsx(A,{params:{id:t},to:"/ec2/describe-volumes/$id",children:"Back to volume"}),c=s.jsx(ee,{subtitle:t,title:"Resize Volume"}),e[14]=t,e[15]=m,e[16]=c):(m=e[15],c=e[16]);let u;e[17]!==l.error?(u=l.error&&s.jsx(Y,{error:l.error,msg:"Failed to resize volume"}),e[17]=l.error,e[18]=u):u=e[18];let d;e[19]!==F||e[20]!==E?(d=F(E),e[19]=F,e[20]=E,e[21]=d):d=e[21];let f;e[22]!==i?(f=s.jsx("div",{className:"space-y-2",children:s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Current size: ",i," GiB"]})}),e[22]=i,e[23]=f):f=e[23];let P;e[24]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(Z,{htmlFor:"size",children:"New size (GiB)"}),e[24]=P):P=e[24];const I=i+1;let p;e[25]!==$?(p=$("size",{valueAsNumber:!0}),e[25]=$,e[26]=p):p=e[26];let x;e[27]!==I||e[28]!==p?(x=s.jsx(W,{id:"size",min:I,type:"number",...p}),e[27]=I,e[28]=p,e[29]=x):x=e[29];let b;e[30]!==B.size?(b=B.size&&s.jsx("p",{className:"text-destructive text-sm",children:B.size.message}),e[30]=B.size,e[31]=b):b=e[31];let h;e[32]!==x||e[33]!==b?(h=s.jsxs("div",{className:"space-y-2",children:[P,x,b]}),e[32]=x,e[33]=b,e[34]=h):h=e[34];const _=w||l.isPending;let z;e[35]!==o||e[36]!==t?(z=()=>o({to:"/ec2/describe-volumes/$id",params:{id:t}}),e[35]=o,e[36]=t,e[37]=z):z=e[37];let g;e[38]!==_||e[39]!==z?(g=s.jsx(M,{disabled:_,onClick:z,type:"button",variant:"outline",children:"Cancel"}),e[38]=_,e[39]=z,e[40]=g):g=e[40];const C=w||l.isPending,G=w||l.isPending?"Resizingâ€¦":"Resize Volume";let j;e[41]!==C||e[42]!==G?(j=s.jsx(M,{disabled:C,type:"submit",children:G}),e[41]=C,e[42]=G,e[43]=j):j=e[43];let v;e[44]!==g||e[45]!==j?(v=s.jsxs("div",{className:"flex gap-2",children:[g,j]}),e[44]=g,e[45]=j,e[46]=v):v=e[46];let y;e[47]!==f||e[48]!==h||e[49]!==v||e[50]!==d?(y=s.jsxs("form",{className:"max-w-4xl space-y-6",onSubmit:d,children:[f,h,v]}),e[47]=f,e[48]=h,e[49]=v,e[50]=d,e[51]=y):y=e[51];let R;return e[52]!==y||e[53]!==m||e[54]!==c||e[55]!==u?(R=s.jsxs(s.Fragment,{children:[m,c,u,y]}),e[52]=y,e[53]=m,e[54]=c,e[55]=u,e[56]=R):R=e[56],R}export{ce as component};
