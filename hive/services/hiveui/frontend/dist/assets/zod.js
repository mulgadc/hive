import{ar as m,as as pt,at as Ut,au as Tt}from"./index.js";var ge=e=>e.type==="checkbox",ae=e=>e instanceof Date,z=e=>e==null;const ft=e=>typeof e=="object";var U=e=>!z(e)&&!Array.isArray(e)&&ft(e)&&!ae(e),dt=e=>U(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Lt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,yt=(e,i)=>e.has(Lt(i)),Mt=e=>{const i=e.constructor&&e.constructor.prototype;return U(i)&&i.hasOwnProperty("isPrototypeOf")},Re=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function R(e){if(e instanceof Date)return new Date(e);const i=typeof FileList<"u"&&e instanceof FileList;if(Re&&(e instanceof Blob||i))return e;const t=Array.isArray(e);if(!t&&!(U(e)&&Mt(e)))return e;const r=t?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=R(e[o]));return r}var Ve=e=>/^\w*$/.test(e),O=e=>e===void 0,pe=e=>Array.isArray(e)?e.filter(Boolean):[],Ue=e=>pe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,i,t)=>{if(!i||!U(e))return t;const r=(Ve(i)?[i]:Ue(i)).reduce((o,a)=>z(o)?o:o[a],e);return O(r)||r===e?O(e[i])?t:e[i]:r},Z=e=>typeof e=="boolean",H=e=>typeof e=="function",C=(e,i,t)=>{let r=-1;const o=Ve(i)?[i]:Ue(i),a=o.length,l=a-1;for(;++r<a;){const c=o[r];let x=t;if(r!==l){const S=e[c];x=U(S)||Array.isArray(S)?S:isNaN(+o[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=x,e=e[c]}};const me={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ht=m.createContext(null);ht.displayName="HookFormControlContext";const Te=()=>m.useContext(ht);var gt=(e,i,t,r=!0)=>{const o={defaultValues:i._defaultValues};for(const a in e)Object.defineProperty(o,a,{get:()=>{const l=a;return i._proxyFormState[l]!==Q.all&&(i._proxyFormState[l]=!r||Q.all),t&&(t[l]=!0),e[l]}});return o};const Le=typeof window<"u"?m.useLayoutEffect:m.useEffect;function Nt(e){const i=Te(),{control:t=i,disabled:r,name:o,exact:a}=e||{},[l,c]=m.useState(t._formState),x=m.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Le(()=>t._subscribe({name:o,formState:x.current,exact:a,callback:S=>{!r&&c({...t._formState,...S})}}),[o,r,a]),m.useEffect(()=>{x.current.isValid&&t._setValid(!0)},[t]),m.useMemo(()=>gt(l,t,x.current,!1),[l,t])}var G=e=>typeof e=="string",De=(e,i,t,r,o)=>G(e)?(r&&i.watch.add(e),y(t,e,o)):Array.isArray(e)?e.map(a=>(r&&i.watch.add(a),y(t,a))):(r&&(i.watchAll=!0),t),Ce=e=>z(e)||!ft(e);function X(e,i,t=new WeakSet){if(Ce(e)||Ce(i))return Object.is(e,i);if(ae(e)&&ae(i))return Object.is(e.getTime(),i.getTime());const r=Object.keys(e),o=Object.keys(i);if(r.length!==o.length)return!1;if(t.has(e)||t.has(i))return!0;t.add(e),t.add(i);for(const a of r){const l=e[a];if(!o.includes(a))return!1;if(a!=="ref"){const c=i[a];if(ae(l)&&ae(c)||U(l)&&U(c)||Array.isArray(l)&&Array.isArray(c)?!X(l,c,t):!Object.is(l,c))return!1}}return!0}function It(e){const i=Te(),{control:t=i,name:r,defaultValue:o,disabled:a,exact:l,compute:c}=e||{},x=m.useRef(o),S=m.useRef(c),I=m.useRef(void 0),v=m.useRef(t),E=m.useRef(r);S.current=c;const[_,B]=m.useState(()=>{const V=t._getWatch(r,x.current);return S.current?S.current(V):V}),T=m.useCallback(V=>{const A=De(r,t._names,V||t._formValues,!1,x.current);return S.current?S.current(A):A},[t._formValues,t._names,r]),N=m.useCallback(V=>{if(!a){const A=De(r,t._names,V||t._formValues,!1,x.current);if(S.current){const $=S.current(A);X($,I.current)||(B($),I.current=$)}else B(A)}},[t._formValues,t._names,a,r]);Le(()=>((v.current!==t||!X(E.current,r))&&(v.current=t,E.current=r,N()),t._subscribe({name:r,formState:{values:!0},exact:l,callback:V=>{N(V.values)}})),[t,l,r,N]),m.useEffect(()=>t._removeUnmounted());const L=v.current!==t,b=E.current,j=m.useMemo(()=>{if(a)return null;const V=!L&&!X(b,r);return L||V?T():null},[a,L,r,b,T]);return j!==null?j:_}function Pt(e){const i=Te(),{name:t,disabled:r,control:o=i,shouldUnregister:a,defaultValue:l,exact:c=!0}=e,x=yt(o._names.array,t),S=m.useMemo(()=>y(o._formValues,t,y(o._defaultValues,t,l)),[o,t,l]),I=It({control:o,name:t,defaultValue:S,exact:c}),v=Nt({control:o,name:t,exact:c}),E=m.useRef(e),_=m.useRef(void 0),B=m.useRef(o.register(t,{...e.rules,value:I,...Z(e.disabled)?{disabled:e.disabled}:{}}));E.current=e;const T=m.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(v.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(v.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(v.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(v.validatingFields,t)},error:{enumerable:!0,get:()=>y(v.errors,t)}}),[v,t]),N=m.useCallback(V=>B.current.onChange({target:{value:dt(V),name:t},type:me.CHANGE}),[t]),L=m.useCallback(()=>B.current.onBlur({target:{value:y(o._formValues,t),name:t},type:me.BLUR}),[t,o._formValues]),b=m.useCallback(V=>{const A=y(o._fields,t);A&&A._f&&V&&(A._f.ref={focus:()=>H(V.focus)&&V.focus(),select:()=>H(V.select)&&V.select(),setCustomValidity:$=>H(V.setCustomValidity)&&V.setCustomValidity($),reportValidity:()=>H(V.reportValidity)&&V.reportValidity()})},[o._fields,t]),j=m.useMemo(()=>({name:t,value:I,...Z(r)||v.disabled?{disabled:v.disabled||r}:{},onChange:N,onBlur:L,ref:b}),[t,r,v.disabled,N,L,b,I]);return m.useEffect(()=>{const V=o._options.shouldUnregister||a,A=_.current;A&&A!==t&&!x&&o.unregister(A),o.register(t,{...E.current.rules,...Z(E.current.disabled)?{disabled:E.current.disabled}:{}});const $=(te,re)=>{const ee=y(o._fields,te);ee&&ee._f&&(ee._f.mount=re)};if($(t,!0),V){const te=R(y(o._options.defaultValues,t,E.current.defaultValue));C(o._defaultValues,t,te),O(y(o._formValues,t))&&C(o._formValues,t,te)}return!x&&o.register(t),_.current=t,()=>{(x?V&&!o._state.action:V)?o.unregister(t):$(t,!1)}},[t,o,x,a]),m.useEffect(()=>{o._setDisabledField({disabled:r,name:t})},[r,t,o]),m.useMemo(()=>({field:j,formState:v,fieldState:T}),[j,v,T])}const ar=e=>e.render(Pt(e)),Bt=m.createContext(null);Bt.displayName="HookFormContext";var Me=(e,i,t,r,o)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[r]:o||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Ye=()=>{let e=[];return{get observers(){return e},next:o=>{for(const a of e)a.next&&a.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(a=>a!==o)}}),unsubscribe:()=>{e=[]}}};function vt(e,i){const t={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r],a=i[r];if(o&&U(o)&&a){const l=vt(o,a);U(l)&&(t[r]=l)}else e[r]&&(t[r]=a)}return t}var q=e=>U(e)&&!Object.keys(e).length,Ne=e=>e.type==="file",_e=e=>{if(!Re)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},mt=e=>e.type==="select-multiple",Ie=e=>e.type==="radio",jt=e=>Ie(e)||ge(e),ke=e=>_e(e)&&e.isConnected;function Wt(e,i){const t=i.slice(0,-1).length;let r=0;for(;r<t;)e=O(e)?r++:e[i[r++]];return e}function qt(e){for(const i in e)if(e.hasOwnProperty(i)&&!O(e[i]))return!1;return!0}function p(e,i){const t=Array.isArray(i)?i:Ve(i)?[i]:Ue(i),r=t.length===1?e:Wt(e,t),o=t.length-1,a=t[o];return r&&delete r[a],o!==0&&(U(r)&&q(r)||Array.isArray(r)&&qt(r))&&p(e,t.slice(0,-1)),e}var Ht=e=>{for(const i in e)if(H(e[i]))return!0;return!1};function _t(e){return Array.isArray(e)||U(e)&&!Ht(e)}function Se(e,i={}){for(const t in e){const r=e[t];_t(r)?(i[t]=Array.isArray(r)?[]:{},Se(r,i[t])):O(r)||(i[t]=!0)}return i}function ue(e,i,t){t||(t=Se(i));for(const r in e){const o=e[r];if(_t(o))O(i)||Ce(t[r])?t[r]=Se(o,Array.isArray(o)?[]:{}):ue(o,z(i)?{}:i[r],t[r]);else{const a=i[r];t[r]=!X(o,a)}}return t}const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var bt=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je},Vt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:r})=>O(e)?e:i?e===""?NaN:e&&+e:t&&G(e)?new Date(e):r?r(e):e;const Xe={isValid:!1,value:null};var Ft=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,Xe):Xe;function et(e){const i=e.ref;return Ne(i)?i.files:Ie(i)?Ft(e.refs).value:mt(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?bt(e.refs).value:Vt(O(i.value)?e.ref.value:i.value,e)}var $t=(e,i,t,r)=>{const o={};for(const a of e){const l=y(i,a);l&&C(o,a,l._f)}return{criteriaMode:t,names:[...e],fields:o,shouldUseNativeValidation:r}},be=e=>e instanceof RegExp,de=e=>O(e)?e:be(e)?e.source:U(e)?be(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===Q.onSubmit,isOnBlur:e===Q.onBlur,isOnChange:e===Q.onChange,isOnAll:e===Q.all,isOnTouch:e===Q.onTouched});const rt="AsyncFunction";var zt=e=>!!e&&!!e.validate&&!!(H(e.validate)&&e.validate.constructor.name===rt||U(e.validate)&&Object.values(e.validate).find(i=>i.constructor.name===rt)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const he=(e,i,t,r)=>{for(const o of t||Object.keys(e)){const a=y(e,o);if(a){const{_f:l,...c}=a;if(l){if(l.refs&&l.refs[0]&&i(l.refs[0],o)&&!r)return!0;if(l.ref&&i(l.ref,l.name)&&!r)return!0;if(he(c,i))break}else if(U(c)&&he(c,i))break}}};function it(e,i,t){const r=y(e,t);if(r||Ve(t))return{error:r,name:t};const o=t.split(".");for(;o.length;){const a=o.join("."),l=y(i,a),c=y(e,a);if(l&&!Array.isArray(l)&&t!==a)return{name:t};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};o.pop()}return{name:t}}var Zt=(e,i,t,r)=>{t(e);const{name:o,...a}=e;return q(a)||Object.keys(a).length>=Object.keys(i).length||Object.keys(a).find(l=>i[l]===(!r||Q.all))},Gt=(e,i,t)=>!e||!i||e===i||ye(e).some(r=>r&&(t?r===i:r.startsWith(i)||i.startsWith(r))),Yt=(e,i,t,r,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(i||e):(t?r.isOnBlur:o.isOnBlur)?!e:(t?r.isOnChange:o.isOnChange)?e:!0,Jt=(e,i)=>!pe(y(e,i)).length&&p(e,i),Qt=(e,i,t)=>{const r=ye(y(e,t));return C(r,"root",i[t]),C(e,t,r),e};function nt(e,i,t="validate"){if(G(e)||Array.isArray(e)&&e.every(G)||Z(e)&&!e)return{type:t,message:G(e)?e:"",ref:i}}var oe=e=>U(e)&&!be(e)?e:{value:e,message:""},at=async(e,i,t,r,o,a)=>{const{ref:l,refs:c,required:x,maxLength:S,minLength:I,min:v,max:E,pattern:_,validate:B,name:T,valueAsNumber:N,mount:L}=e._f,b=y(t,T);if(!L||i.has(T))return{};const j=c?c[0]:l,V=F=>{o&&j.reportValidity&&(j.setCustomValidity(Z(F)?"":F||""),j.reportValidity())},A={},$=Ie(l),te=ge(l),re=$||te,ee=(N||Ne(l))&&O(l.value)&&O(b)||_e(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,Y=Me.bind(null,T,r,A),ve=(F,w,M,P=se.maxLength,J=se.minLength)=>{const K=F?w:M;A[T]={type:F?P:J,message:K,ref:l,...Y(F?P:J,K)}};if(a?!Array.isArray(b)||!b.length:x&&(!re&&(ee||z(b))||Z(b)&&!b||te&&!bt(c).isValid||$&&!Ft(c).isValid)){const{value:F,message:w}=G(x)?{value:!!x,message:x}:oe(x);if(F&&(A[T]={type:se.required,message:w,ref:j,...Y(se.required,w)},!r))return V(w),A}if(!ee&&(!z(v)||!z(E))){let F,w;const M=oe(E),P=oe(v);if(!z(b)&&!isNaN(b)){const J=l.valueAsNumber||b&&+b;z(M.value)||(F=J>M.value),z(P.value)||(w=J<P.value)}else{const J=l.valueAsDate||new Date(b),K=fe=>new Date(new Date().toDateString()+" "+fe),le=l.type=="time",ce=l.type=="week";G(M.value)&&b&&(F=le?K(b)>K(M.value):ce?b>M.value:J>new Date(M.value)),G(P.value)&&b&&(w=le?K(b)<K(P.value):ce?b<P.value:J<new Date(P.value))}if((F||w)&&(ve(!!F,M.message,P.message,se.max,se.min),!r))return V(A[T].message),A}if((S||I)&&!ee&&(G(b)||a&&Array.isArray(b))){const F=oe(S),w=oe(I),M=!z(F.value)&&b.length>+F.value,P=!z(w.value)&&b.length<+w.value;if((M||P)&&(ve(M,F.message,w.message),!r))return V(A[T].message),A}if(_&&!ee&&G(b)){const{value:F,message:w}=oe(_);if(be(F)&&!b.match(F)&&(A[T]={type:se.pattern,message:w,ref:l,...Y(se.pattern,w)},!r))return V(w),A}if(B){if(H(B)){const F=await B(b,t),w=nt(F,j);if(w&&(A[T]={...w,...Y(se.validate,w.message)},!r))return V(w.message),A}else if(U(B)){let F={};for(const w in B){if(!q(F)&&!r)break;const M=nt(await B[w](b,t),j,w);M&&(F={...M,...Y(w,M.message)},V(M.message),r&&(A[T]=F))}if(!q(F)&&(A[T]={ref:j,...F},!r))return A}}return V(!0),A};const Xt={mode:Q.onSubmit,reValidateMode:Q.onChange,shouldFocusError:!0};function er(e={}){let i={...Xt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:H(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1},r={},o=U(i.defaultValues)||U(i.values)?R(i.defaultValues||i.values)||{}:{},a=i.shouldUnregister?{}:R(o),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,S=0;const I={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={...I};let E={...v};const _={array:Ye(),state:Ye()},B=i.criteriaMode===Q.all,T=s=>n=>{clearTimeout(S),S=setTimeout(s,n)},N=async s=>{if(!l.keepIsValid&&!i.disabled&&(v.isValid||E.isValid||s)){let n;i.resolver?(n=q((await re()).errors),L()):n=await Y(r,!0),n!==t.isValid&&_.state.next({isValid:n})}},L=(s,n)=>{!i.disabled&&(v.isValidating||v.validatingFields||E.isValidating||E.validatingFields)&&((s||Array.from(c.mount)).forEach(u=>{u&&(n?C(t.validatingFields,u,n):p(t.validatingFields,u))}),_.state.next({validatingFields:t.validatingFields,isValidating:!q(t.validatingFields)}))},b=(s,n=[],u,h,d=!0,f=!0)=>{if(h&&u&&!i.disabled){if(l.action=!0,f&&Array.isArray(y(r,s))){const g=u(y(r,s),h.argA,h.argB);d&&C(r,s,g)}if(f&&Array.isArray(y(t.errors,s))){const g=u(y(t.errors,s),h.argA,h.argB);d&&C(t.errors,s,g),Jt(t.errors,s)}if((v.touchedFields||E.touchedFields)&&f&&Array.isArray(y(t.touchedFields,s))){const g=u(y(t.touchedFields,s),h.argA,h.argB);d&&C(t.touchedFields,s,g)}(v.dirtyFields||E.dirtyFields)&&(t.dirtyFields=ue(o,a)),_.state.next({name:s,isDirty:F(s,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else C(a,s,n)},j=(s,n)=>{C(t.errors,s,n),_.state.next({errors:t.errors})},V=s=>{t.errors=s,_.state.next({errors:t.errors,isValid:!1})},A=(s,n,u,h)=>{const d=y(r,s);if(d){const f=y(a,s,O(u)?y(o,s):u);O(f)||h&&h.defaultChecked||n?C(a,s,n?f:et(d._f)):P(s,f),l.mount&&!l.action&&N()}},$=(s,n,u,h,d)=>{let f=!1,g=!1;const k={name:s};if(!i.disabled){if(!u||h){(v.isDirty||E.isDirty)&&(g=t.isDirty,t.isDirty=k.isDirty=F(),f=g!==k.isDirty);const D=X(y(o,s),n);g=!!y(t.dirtyFields,s),D?p(t.dirtyFields,s):C(t.dirtyFields,s,!0),k.dirtyFields=t.dirtyFields,f=f||(v.dirtyFields||E.dirtyFields)&&g!==!D}if(u){const D=y(t.touchedFields,s);D||(C(t.touchedFields,s,u),k.touchedFields=t.touchedFields,f=f||(v.touchedFields||E.touchedFields)&&D!==u)}f&&d&&_.state.next(k)}return f?k:{}},te=(s,n,u,h)=>{const d=y(t.errors,s),f=(v.isValid||E.isValid)&&Z(n)&&t.isValid!==n;if(i.delayError&&u?(x=T(()=>j(s,u)),x(i.delayError)):(clearTimeout(S),x=null,u?C(t.errors,s,u):p(t.errors,s)),(u?!X(d,u):d)||!q(h)||f){const g={...h,...f&&Z(n)?{isValid:n}:{},errors:t.errors,name:s};t={...t,...g},_.state.next(g)}},re=async s=>(L(s,!0),await i.resolver(a,i.context,$t(s||c.mount,r,i.criteriaMode,i.shouldUseNativeValidation))),ee=async s=>{const{errors:n}=await re(s);if(L(s),s)for(const u of s){const h=y(n,u);h?C(t.errors,u,h):p(t.errors,u)}else t.errors=n;return n},Y=async(s,n,u={valid:!0})=>{for(const h in s){const d=s[h];if(d){const{_f:f,...g}=d;if(f){const k=c.array.has(f.name),D=d._f&&zt(d._f);D&&v.validatingFields&&L([f.name],!0);const W=await at(d,c.disabled,a,B,i.shouldUseNativeValidation&&!n,k);if(D&&v.validatingFields&&L([f.name]),W[f.name]&&(u.valid=!1,n||e.shouldUseNativeValidation))break;!n&&(y(W,f.name)?k?Qt(t.errors,W,f.name):C(t.errors,f.name,W[f.name]):p(t.errors,f.name))}!q(g)&&await Y(g,n,u)}}return u.valid},ve=()=>{for(const s of c.unMount){const n=y(r,s);n&&(n._f.refs?n._f.refs.every(u=>!ke(u)):!ke(n._f.ref))&&Fe(s)}c.unMount=new Set},F=(s,n)=>!i.disabled&&(s&&n&&C(a,s,n),!X(Pe(),o)),w=(s,n,u)=>De(s,c,{...l.mount?a:O(n)?o:G(s)?{[s]:n}:n},u,n),M=s=>pe(y(l.mount?a:o,s,i.shouldUnregister?y(o,s,[]):[])),P=(s,n,u={})=>{const h=y(r,s);let d=n;if(h){const f=h._f;f&&(!f.disabled&&C(a,s,Vt(n,f)),d=_e(f.ref)&&z(n)?"":n,mt(f.ref)?[...f.ref.options].forEach(g=>g.selected=d.includes(g.value)):f.refs?ge(f.ref)?f.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(d)?g.checked=!!d.find(k=>k===g.value):g.checked=d===g.value||!!d)}):f.refs.forEach(g=>g.checked=g.value===d):Ne(f.ref)?f.ref.value="":(f.ref.value=d,f.ref.type||_.state.next({name:s,values:R(a)})))}(u.shouldDirty||u.shouldTouch)&&$(s,d,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&fe(s)},J=(s,n,u)=>{for(const h in n){if(!n.hasOwnProperty(h))return;const d=n[h],f=s+"."+h,g=y(r,f);(c.array.has(s)||U(d)||g&&!g._f)&&!ae(d)?J(f,d,u):P(f,d,u)}},K=(s,n,u={})=>{const h=y(r,s),d=c.array.has(s),f=R(n);C(a,s,f),d?(_.array.next({name:s,values:R(a)}),(v.isDirty||v.dirtyFields||E.isDirty||E.dirtyFields)&&u.shouldDirty&&_.state.next({name:s,dirtyFields:ue(o,a),isDirty:F(s,f)})):h&&!h._f&&!z(f)?J(s,f,u):P(s,f,u),st(s,c)?_.state.next({...t,name:s,values:R(a)}):_.state.next({name:l.mount?s:void 0,values:R(a)})},le=async s=>{l.mount=!0;const n=s.target;let u=n.name,h=!0;const d=y(r,u),f=D=>{h=Number.isNaN(D)||ae(D)&&isNaN(D.getTime())||X(D,y(a,u,D))},g=tt(i.mode),k=tt(i.reValidateMode);if(d){let D,W;const ne=n.type?et(d._f):dt(s),ie=s.type===me.BLUR||s.type===me.FOCUS_OUT,St=!Kt(d._f)&&!i.resolver&&!y(t.errors,u)&&!d._f.deps||Yt(ie,y(t.touchedFields,u),t.isSubmitted,k,g),we=st(u,c,ie);C(a,u,ne),ie?(!n||!n.readOnly)&&(d._f.onBlur&&d._f.onBlur(s),x&&x(0)):d._f.onChange&&d._f.onChange(s);const Ee=$(u,ne,ie),Ot=!q(Ee)||we;if(!ie&&_.state.next({name:u,type:s.type,values:R(a)}),St)return(v.isValid||E.isValid)&&(i.mode==="onBlur"?ie&&N():ie||N()),Ot&&_.state.next({name:u,...we?{}:Ee});if(!ie&&we&&_.state.next({...t}),i.resolver){const{errors:Ze}=await re([u]);if(L([u]),f(ne),h){const Rt=it(t.errors,r,u),Ge=it(Ze,r,Rt.name||u);D=Ge.error,u=Ge.name,W=q(Ze)}}else L([u],!0),D=(await at(d,c.disabled,a,B,i.shouldUseNativeValidation))[u],L([u]),f(ne),h&&(D?W=!1:(v.isValid||E.isValid)&&(W=await Y(r,!0)));h&&(d._f.deps&&(!Array.isArray(d._f.deps)||d._f.deps.length>0)&&fe(d._f.deps),te(u,W,D,Ee))}},ce=(s,n)=>{if(y(t.errors,n)&&s.focus)return s.focus(),1},fe=async(s,n={})=>{let u,h;const d=ye(s);if(i.resolver){const f=await ee(O(s)?s:d);u=q(f),h=s?!d.some(g=>y(f,g)):u}else s?(h=(await Promise.all(d.map(async f=>{const g=y(r,f);return await Y(g&&g._f?{[f]:g}:g)}))).every(Boolean),!(!h&&!t.isValid)&&N()):h=u=await Y(r);return _.state.next({...!G(s)||(v.isValid||E.isValid)&&u!==t.isValid?{}:{name:s},...i.resolver||!s?{isValid:u}:{},errors:t.errors}),n.shouldFocus&&!h&&he(r,ce,s?d:c.mount),h},Pe=(s,n)=>{let u={...l.mount?a:o};return n&&(u=vt(n.dirtyFields?t.dirtyFields:t.touchedFields,u)),O(s)?u:G(s)?y(u,s):s.map(h=>y(u,h))},Be=(s,n)=>({invalid:!!y((n||t).errors,s),isDirty:!!y((n||t).dirtyFields,s),error:y((n||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((n||t).touchedFields,s)}),At=s=>{const n=s?ye(s):void 0;n?.forEach(u=>p(t.errors,u)),n?n.forEach(u=>{_.state.next({name:u,errors:t.errors})}):_.state.next({errors:{}})},je=(s,n,u)=>{const h=(y(r,s,{_f:{}})._f||{}).ref,d=y(t.errors,s)||{},{ref:f,message:g,type:k,...D}=d;C(t.errors,s,{...D,...n,ref:h}),_.state.next({name:s,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&h&&h.focus&&h.focus()},xt=(s,n)=>H(s)?_.state.subscribe({next:u=>"values"in u&&s(w(void 0,n),u)}):w(s,n,!0),We=s=>_.state.subscribe({next:n=>{Gt(s.name,n.name,s.exact)&&Zt(n,s.formState||v,Ct,s.reRenderRoot)&&s.callback({values:{...a},...t,...n,defaultValues:o})}}).unsubscribe,wt=s=>(l.mount=!0,E={...E,...s.formState},We({...s,formState:{...I,...s.formState}})),Fe=(s,n={})=>{for(const u of s?ye(s):c.mount)c.mount.delete(u),c.array.delete(u),n.keepValue||(p(r,u),p(a,u)),!n.keepError&&p(t.errors,u),!n.keepDirty&&p(t.dirtyFields,u),!n.keepTouched&&p(t.touchedFields,u),!n.keepIsValidating&&p(t.validatingFields,u),!i.shouldUnregister&&!n.keepDefaultValue&&p(o,u);_.state.next({values:R(a)}),_.state.next({...t,...n.keepDirty?{isDirty:F()}:{}}),!n.keepIsValid&&N()},qe=({disabled:s,name:n})=>{if(Z(s)&&l.mount||s||c.disabled.has(n)){const d=c.disabled.has(n)!==!!s;s?c.disabled.add(n):c.disabled.delete(n),d&&l.mount&&!l.action&&N()}},Ae=(s,n={})=>{let u=y(r,s);const h=Z(n.disabled)||Z(i.disabled);return C(r,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...n}}),c.mount.add(s),u?qe({disabled:Z(n.disabled)?n.disabled:i.disabled,name:s}):A(s,!0,n.value),{...h?{disabled:n.disabled||i.disabled}:{},...i.progressive?{required:!!n.required,min:de(n.min),max:de(n.max),minLength:de(n.minLength),maxLength:de(n.maxLength),pattern:de(n.pattern)}:{},name:s,onChange:le,onBlur:le,ref:d=>{if(d){Ae(s,n),u=y(r,s);const f=O(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=jt(f),k=u._f.refs||[];if(g?k.find(D=>D===f):f===u._f.ref)return;C(r,s,{_f:{...u._f,...g?{refs:[...k.filter(ke),f,...Array.isArray(y(o,s))?[{}]:[]],ref:{type:f.type,name:s}}:{ref:f}}}),A(s,!1,void 0,f)}else u=y(r,s,{}),u._f&&(u._f.mount=!1),(i.shouldUnregister||n.shouldUnregister)&&!(yt(c.array,s)&&l.action)&&c.unMount.add(s)}}},xe=()=>i.shouldFocusError&&he(r,ce,c.mount),Et=s=>{Z(s)&&(_.state.next({disabled:s}),he(r,(n,u)=>{const h=y(r,u);h&&(n.disabled=h._f.disabled||s,Array.isArray(h._f.refs)&&h._f.refs.forEach(d=>{d.disabled=h._f.disabled||s}))},0,!1))},He=(s,n)=>async u=>{let h;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let d=R(a);if(_.state.next({isSubmitting:!0}),i.resolver){const{errors:f,values:g}=await re();L(),t.errors=f,d=R(g)}else await Y(r);if(c.disabled.size)for(const f of c.disabled)p(d,f);if(p(t.errors,"root"),q(t.errors)){_.state.next({errors:{}});try{await s(d,u)}catch(f){h=f}}else n&&await n({...t.errors},u),xe(),setTimeout(xe);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:q(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},kt=(s,n={})=>{y(r,s)&&(O(n.defaultValue)?K(s,R(y(o,s))):(K(s,n.defaultValue),C(o,s,R(n.defaultValue))),n.keepTouched||p(t.touchedFields,s),n.keepDirty||(p(t.dirtyFields,s),t.isDirty=n.defaultValue?F(s,R(y(o,s))):F()),n.keepError||(p(t.errors,s),v.isValid&&N()),_.state.next({...t}))},$e=(s,n={})=>{const u=s?R(s):o,h=R(u),d=q(s),f=d?o:h;if(n.keepDefaultValues||(o=u),!n.keepValues){if(n.keepDirtyValues){const g=new Set([...c.mount,...Object.keys(ue(o,a))]);for(const k of Array.from(g)){const D=y(t.dirtyFields,k),W=y(a,k),ne=y(f,k);D&&!O(W)?C(f,k,W):!D&&!O(ne)&&K(k,ne)}}else{if(Re&&O(s))for(const g of c.mount){const k=y(r,g);if(k&&k._f){const D=Array.isArray(k._f.refs)?k._f.refs[0]:k._f.ref;if(_e(D)){const W=D.closest("form");if(W){W.reset();break}}}}if(n.keepFieldsRef)for(const g of c.mount)K(g,y(f,g));else r={}}a=i.shouldUnregister?n.keepDefaultValues?R(o):{}:R(f),_.array.next({values:{...f}}),_.state.next({values:{...f}})}c={mount:n.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!v.isValid||!!n.keepIsValid||!!n.keepDirtyValues||!i.shouldUnregister&&!q(f),l.watch=!!i.shouldUnregister,l.keepIsValid=!!n.keepIsValid,l.action=!1,n.keepErrors||(t.errors={}),_.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:d?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!X(s,o)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?{}:n.keepDirtyValues?n.keepDefaultValues&&a?ue(o,a):t.dirtyFields:n.keepDefaultValues&&s?ue(o,s):n.keepDirty?t.dirtyFields:{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ze=(s,n)=>$e(H(s)?s(a):s,{...i.resetOptions,...n}),Dt=(s,n={})=>{const u=y(r,s),h=u&&u._f;if(h){const d=h.refs?h.refs[0]:h.ref;d.focus&&setTimeout(()=>{d.focus(),n.shouldSelect&&H(d.select)&&d.select()})}},Ct=s=>{t={...t,...s}},Ke={control:{register:Ae,unregister:Fe,getFieldState:Be,handleSubmit:He,setError:je,_subscribe:We,_runSchema:re,_updateIsValidating:L,_focusError:xe,_getWatch:w,_getDirty:F,_setValid:N,_setFieldArray:b,_setDisabledField:qe,_setErrors:V,_getFieldArray:M,_reset:$e,_resetDefaultValues:()=>H(i.defaultValues)&&i.defaultValues().then(s=>{ze(s,i.resetOptions),_.state.next({isLoading:!1})}),_removeUnmounted:ve,_disableForm:Et,_subjects:_,_proxyFormState:v,get _fields(){return r},get _formValues(){return a},get _state(){return l},set _state(s){l=s},get _defaultValues(){return o},get _names(){return c},set _names(s){c=s},get _formState(){return t},get _options(){return i},set _options(s){i={...i,...s}}},subscribe:wt,trigger:fe,register:Ae,handleSubmit:He,watch:xt,setValue:K,getValues:Pe,reset:ze,resetField:kt,clearErrors:At,unregister:Fe,setError:je,setFocus:Dt,getFieldState:Be};return{...Ke,formControl:Ke}}function or(e={}){const i=m.useRef(void 0),t=m.useRef(void 0),[r,o]=m.useState({isDirty:!1,isValidating:!1,isLoading:H(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:H(e.defaultValues)?void 0:e.defaultValues});if(!i.current)if(e.formControl)i.current={...e.formControl,formState:r},e.defaultValues&&!H(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...c}=er(e);i.current={...c,formState:r}}const a=i.current.control;return a._options=e,Le(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>o({...a._formState}),reRenderRoot:!0});return o(c=>({...c,isReady:!0})),a._formState.isReady=!0,l},[a]),m.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),m.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),m.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),m.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),m.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==r.isDirty&&a._subjects.state.next({isDirty:l})}},[a,r.isDirty]),m.useEffect(()=>{var l;e.values&&!X(e.values,t.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((l=a._options.resetOptions)===null||l===void 0)&&l.keepIsValid||a._setValid(),t.current=e.values,o(c=>({...c}))):a._resetDefaultValues()},[a,e.values]),m.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),i.current.formState=m.useMemo(()=>gt(r,a),[a,r]),i.current}const ot=(e,i,t)=>{if(e&&"reportValidity"in e){const r=y(t,i);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Oe=(e,i)=>{for(const t in i.fields){const r=i.fields[t];r&&r.ref&&"reportValidity"in r.ref?ot(r.ref,t,e):r&&r.refs&&r.refs.forEach(o=>ot(o,t,e))}},ut=(e,i)=>{i.shouldUseNativeValidation&&Oe(e,i);const t={};for(const r in e){const o=y(i.fields,r),a=Object.assign(e[r]||{},{ref:o&&o.ref});if(tr(i.names||Object.keys(e),r)){const l=Object.assign({},y(t,r));C(l,"root",a),C(t,r,l)}else C(t,r,a)}return t},tr=(e,i)=>{const t=lt(i);return e.some(r=>lt(r).match(`^${t}\\.\\d+`))};function lt(e){return e.replace(/\]|\[/g,"")}function ct(e,i){try{var t=e()}catch(r){return i(r)}return t&&t.then?t.then(void 0,i):t}function rr(e,i){for(var t={};e.length;){var r=e[0],o=r.code,a=r.message,l=r.path.join(".");if(!t[l])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];t[l]={message:c.message,type:c.code}}else t[l]={message:a,type:o};if("unionErrors"in r&&r.unionErrors.forEach(function(I){return I.errors.forEach(function(v){return e.push(v)})}),i){var x=t[l].types,S=x&&x[r.code];t[l]=Me(l,i,t,o,S?[].concat(S,r.message):r.message)}e.shift()}return t}function sr(e,i){for(var t={};e.length;){var r=e[0],o=r.code,a=r.message,l=r.path.join(".");if(!t[l])if(r.code==="invalid_union"&&r.errors.length>0){var c=r.errors[0][0];t[l]={message:c.message,type:c.code}}else t[l]={message:a,type:o};if(r.code==="invalid_union"&&r.errors.forEach(function(I){return I.forEach(function(v){return e.push(v)})}),i){var x=t[l].types,S=x&&x[r.code];t[l]=Me(l,i,t,o,S?[].concat(S,r.message):r.message)}e.shift()}return t}function ur(e,i,t){if(t===void 0&&(t={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,o,a){try{return Promise.resolve(ct(function(){return Promise.resolve(e[t.mode==="sync"?"parse":"parseAsync"](r,i)).then(function(l){return a.shouldUseNativeValidation&&Oe({},a),{errors:{},values:t.raw?Object.assign({},r):l}})},function(l){if((function(c){return Array.isArray(c?.issues)})(l))return{values:{},errors:ut(rr(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,o,a){try{return Promise.resolve(ct(function(){return Promise.resolve((t.mode==="sync"?pt:Ut)(e,r,i)).then(function(l){return a.shouldUseNativeValidation&&Oe({},a),{errors:{},values:t.raw?Object.assign({},r):l}})},function(l){if((function(c){return c instanceof Tt})(l))return{values:{},errors:ut(sr(l.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}export{ar as C,ur as a,or as u};
