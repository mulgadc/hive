import{g as wt,aK as pr,aL as yr,aM as Q,aN as lt,aO as Ne,aP as mr,aQ as gr,aR as wr,aS as br,aT as Er,aU as xr,aV as vr,aW as _r,aX as Cr,aY as Sr,aZ as bt,a_ as ce,a$ as qe,b0 as Ar,b1 as Rr,b2 as Br,b3 as pe,b4 as ye,b5 as me,b6 as ge,b7 as Fr,b8 as Dr,b9 as Tr,ba as Mr,bb as Lr,bc as kr,bd as Nr,be as Pr,c as Ie,j as z,aE as Ir,bf as Ur,bg as Ee,bh as Or,bi as qr,bj as St,bk as er,bl as Et,r as tr,bm as jr,B as Hr}from"./index.js";import{a as Wr,b as Kr,c as $r,e as zr,d as Vr,h as Gr,f as Yr,g as Xr}from"./alert-dialog.js";import{D as Qr}from"./download.js";import{T as Zr}from"./trash-2.js";import{u as rr}from"./useMutation.js";const Jr=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],en=wt("file",Jr);const tn=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],rn=wt("folder",tn);const nn=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],an=wt("upload",nn),on=typeof ReadableStream=="function"?ReadableStream:function(){};class sn extends on{}const un=({expectedChecksum:a,checksum:r,source:o,checksumSourceLocation:c,base64Encoder:p})=>{if(!pr(o))throw new Error(`@smithy/util-stream: unsupported source type ${o?.constructor?.name??o} in ChecksumStream.`);const l=p??yr;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const h=new TransformStream({start(){},async transform(d,b){r.update(d),b.enqueue(d)},async flush(d){const b=await r.digest(),D=l(b);if(a!==D){const R=new Error(`Checksum mismatch: expected "${a}" but received "${D}" in response header "${c}".`);d.error(R)}else d.terminate()}});o.pipeThrough(h);const i=h.readable;return Object.setPrototypeOf(i,sn.prototype),i};class ln{allocByteArray;byteLength=0;byteArrays=[];constructor(r){this.allocByteArray=r}push(r){this.byteArrays.push(r),this.byteLength+=r.byteLength}flush(){if(this.byteArrays.length===1){const c=this.byteArrays[0];return this.reset(),c}const r=this.allocByteArray(this.byteLength);let o=0;for(let c=0;c<this.byteArrays.length;++c){const p=this.byteArrays[c];r.set(p,o),o+=p.byteLength}return this.reset(),r}reset(){this.byteArrays=[],this.byteLength=0}}function fn(a,r,o){const c=a.getReader();let p=!1,l=0;const h=["",new ln(b=>new Uint8Array(b))];let i=-1;const d=async b=>{const{value:D,done:R}=await c.read(),B=D;if(R){if(i!==-1){const A=je(h,i);Ae(A)>0&&b.enqueue(A)}b.close()}else{const A=dn(B,!1);if(i!==A&&(i>=0&&b.enqueue(je(h,i)),i=A),i===-1){b.enqueue(B);return}const _=Ae(B);l+=_;const T=Ae(h[i]);if(_>=r&&T===0)b.enqueue(B);else{const F=hn(h,i,B);!p&&l>r*2&&(p=!0,o?.warn(`@smithy/util-stream - stream chunk size ${_} is below threshold of ${r}, automatically buffering.`)),F>=r?b.enqueue(je(h,i)):await d(b)}}};return new ReadableStream({pull:d})}const cn=fn;function hn(a,r,o){switch(r){case 0:return a[0]+=o,Ae(a[0]);case 1:case 2:return a[r].push(o),Ae(a[r])}}function je(a,r){switch(r){case 0:const o=a[0];return a[0]="",o;case 1:case 2:return a[r].flush()}throw new Error(`@smithy/util-stream - invalid index ${r} given to flush()`)}function Ae(a){return a?.byteLength??a?.length??0}function dn(a,r=!0){return r&&typeof Buffer<"u"&&a instanceof Buffer?2:a instanceof Uint8Array?1:typeof a=="string"?0:-1}const ft=[Q.CRC32,Q.CRC32C,Q.CRC64NVME,Q.SHA1,Q.SHA256],pn=[Q.SHA256,Q.SHA1,Q.CRC32,Q.CRC32C,Q.CRC64NVME],yn=(a,{requestChecksumRequired:r,requestAlgorithmMember:o,requestChecksumCalculation:c})=>{if(!o)return c===Ne.WHEN_SUPPORTED||r?lt:void 0;if(!a[o])return;const p=a[o];if(!ft.includes(p))throw new Error(`The checksum algorithm "${p}" is not supported by the client. Select one of ${ft}.`);return p},xt=a=>a===Q.MD5?"content-md5":`x-amz-checksum-${a.toLowerCase()}`,mn=(a,r)=>{const o=a.toLowerCase();for(const c of Object.keys(r))if(o===c.toLowerCase())return!0;return!1},gn=(a,r)=>{const o=a.toLowerCase();for(const c of Object.keys(r))if(c.toLowerCase().startsWith(o))return!0;return!1},nr=a=>a!==void 0&&typeof a!="string"&&!ArrayBuffer.isView(a)&&!mr(a);var wn=(function(){function a(){this.crc32c=new At}return a.prototype.update=function(r){gr(r)||this.crc32c.update(wr(r))},a.prototype.digest=function(){return br(this,void 0,void 0,function(){return Er(this,function(r){return[2,xr(this.crc32c.digest())]})})},a.prototype.reset=function(){this.crc32c=new At},a})(),At=(function(){function a(){this.checksum=4294967295}return a.prototype.update=function(r){var o,c;try{for(var p=vr(r),l=p.next();!l.done;l=p.next()){var h=l.value;this.checksum=this.checksum>>>8^En[(this.checksum^h)&255]}}catch(i){o={error:i}}finally{try{l&&!l.done&&(c=p.return)&&c.call(p)}finally{if(o)throw o.error}}return this},a.prototype.digest=function(){return(this.checksum^4294967295)>>>0},a})(),bn=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],En=_r(bn);const xn=()=>{const r=new Array(8);for(let o=0;o<8;o++){const c=new Array(512);for(let p=0;p<256;p++){let l=BigInt(p);for(let h=0;h<8*(o+1);h++)l&1n?l=l>>1n^0x9a6c9329ac4bc9b5n:l=l>>1n;c[p*2]=Number(l>>32n&0xffffffffn),c[p*2+1]=Number(l&0xffffffffn)}r[o]=new Uint32Array(c)}return r};let He,Se,ct,ht,dt,pt,yt,mt,gt;const vn=()=>{He||(He=xn(),[Se,ct,ht,dt,pt,yt,mt,gt]=He)};class _n{c1=0;c2=0;constructor(){vn(),this.reset()}update(r){const o=r.length;let c=0,p=this.c1,l=this.c2;for(;c+8<=o;){const h=((l^r[c++])&255)<<1,i=((l>>>8^r[c++])&255)<<1,d=((l>>>16^r[c++])&255)<<1,b=((l>>>24^r[c++])&255)<<1,D=((p^r[c++])&255)<<1,R=((p>>>8^r[c++])&255)<<1,B=((p>>>16^r[c++])&255)<<1,A=((p>>>24^r[c++])&255)<<1;p=gt[h]^mt[i]^yt[d]^pt[b]^dt[D]^ht[R]^ct[B]^Se[A],l=gt[h+1]^mt[i+1]^yt[d+1]^pt[b+1]^dt[D+1]^ht[R+1]^ct[B+1]^Se[A+1]}for(;c<o;){const h=((l^r[c])&255)<<1;l=(l>>>8|(p&255)<<24)>>>0,p=p>>>8^Se[h],l^=Se[h+1],c++}this.c1=p,this.c2=l}async digest(){const r=this.c1^4294967295,o=this.c2^4294967295;return new Uint8Array([r>>>24,r>>>16&255,r>>>8&255,r&255,o>>>24,o>>>16&255,o>>>8&255,o&255])}reset(){this.c1=4294967295,this.c2=4294967295}}const Cn=()=>Cr,ir=(a,r)=>{switch(a){case Q.MD5:return r.md5;case Q.CRC32:return Cn();case Q.CRC32C:return wn;case Q.CRC64NVME:return _n;case Q.SHA1:return r.sha1;case Q.SHA256:return r.sha256;default:throw new Error(`Unsupported checksum algorithm: ${a}`)}},ar=(a,r)=>{const o=new a;return o.update(Sr(r||"")),o.digest()},Sn={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},An=(a,r)=>(o,c)=>async p=>{if(!bt.isInstance(p.request)||gn("x-amz-checksum-",p.request.headers))return o(p);const{request:l,input:h}=p,{body:i,headers:d}=l,{base64Encoder:b,streamHasher:D}=a,{requestChecksumRequired:R,requestAlgorithmMember:B}=r,A=await a.requestChecksumCalculation(),_=B?.name,T=B?.httpHeader;_&&!h[_]&&(A===Ne.WHEN_SUPPORTED||R)&&(h[_]=lt,T&&(d[T]=lt));const F=yn(h,{requestChecksumRequired:R,requestAlgorithmMember:B?.name,requestChecksumCalculation:A});let y=i,v=d;if(F){switch(F){case Q.CRC32:ce(c,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Q.CRC32C:ce(c,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Q.CRC64NVME:ce(c,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Q.SHA1:ce(c,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Q.SHA256:ce(c,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const S=xt(F),m=ir(F,a);if(nr(i)){const{getAwsChunkedEncodingStream:g,bodyLengthChecker:C}=a;y=g(typeof a.requestStreamBufferSize=="number"&&a.requestStreamBufferSize>=8*1024?cn(i,a.requestStreamBufferSize,c.logger):i,{base64Encoder:b,bodyLengthChecker:C,checksumLocationName:S,checksumAlgorithmFn:m,streamHasher:D}),v={...d,"content-encoding":d["content-encoding"]?`${d["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":d["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":S},delete v["content-length"]}else if(!mn(S,d)){const g=await ar(m,i);v={...d,[S]:b(g)}}}try{return await o({...p,request:{...l,headers:v,body:y}})}catch(S){if(S instanceof Error&&S.name==="InvalidChunkSizeError")try{S.message.endsWith(".")||(S.message+="."),S.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch{}throw S}},Rn={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},Bn=(a,r)=>(o,c)=>async p=>{const l=p.input,{requestValidationModeMember:h}=r,i=await a.requestChecksumCalculation(),d=await a.responseChecksumValidation();switch(i){case Ne.WHEN_REQUIRED:ce(c,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Ne.WHEN_SUPPORTED:ce(c,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(d){case qe.WHEN_REQUIRED:ce(c,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case qe.WHEN_SUPPORTED:ce(c,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return h&&!l[h]&&d===qe.WHEN_SUPPORTED&&(l[h]="ENABLED"),o(p)},or=(a=[])=>{const r=[];for(const o of pn)!a.includes(o)||!ft.includes(o)||r.push(o);return r},Fn=a=>{const r=a.lastIndexOf("-");if(r!==-1){const o=a.slice(r+1);if(!o.startsWith("0")){const c=parseInt(o,10);if(!isNaN(c)&&c>=1&&c<=1e4)return!0}}return!1},Dn=async(a,{checksumAlgorithmFn:r,base64Encoder:o})=>o(await ar(r,a)),Tn=async(a,{config:r,responseAlgorithms:o,logger:c})=>{const p=or(o),{body:l,headers:h}=a;for(const i of p){const d=xt(i),b=h[d];if(b){let D;try{D=ir(i,r)}catch(A){if(i===Q.CRC64NVME){c?.warn(`Skipping ${Q.CRC64NVME} checksum validation: ${A.message}`);continue}throw A}const{base64Encoder:R}=r;if(nr(l)){a.body=un({expectedChecksum:b,checksumSourceLocation:d,checksum:new D,source:l,base64Encoder:R});return}const B=await Dn(l,{checksumAlgorithmFn:D,base64Encoder:R});if(B===b)break;throw new Error(`Checksum mismatch: expected "${B}" but received "${b}" in response header "${d}".`)}}},Mn={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Ln=(a,r)=>(o,c)=>async p=>{if(!bt.isInstance(p.request))return o(p);const l=p.input,h=await o(p),i=h.response,{requestValidationModeMember:d,responseAlgorithms:b}=r;if(d&&l[d]==="ENABLED"){const{clientName:D,commandName:R}=c;if(D==="S3Client"&&R==="GetObjectCommand"&&or(b).every(A=>{const _=xt(A),T=i.headers[_];return!T||Fn(T)}))return h;await Tn(i,{config:a,responseAlgorithms:b,logger:c.logger})}return h},Ue=(a,r)=>({applyToStack:o=>{o.add(An(a,r),Sn),o.addRelativeTo(Bn(a,r),Rn),o.addRelativeTo(Ln(a,r),Mn)}}),kn="content-length",Nn="x-amz-decoded-content-length";function Pn(){return(a,r)=>async o=>{const{request:c}=o;if(bt.isInstance(c)&&!(kn in c.headers)&&!(Nn in c.headers)){const p="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof r?.logger?.warn=="function"&&!(r.logger instanceof Ar)?r.logger.warn(p):console.warn(p)}return a({...o})}}const In={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Un=a=>({applyToStack:r=>{r.add(Pn(),In)}}),On=a=>(r,o)=>async c=>{const p=await r(c),{response:l}=p;if(Rr.isInstance(l)&&l.headers.expires){l.headers.expiresstring=l.headers.expires;try{Br(l.headers.expires)}catch(h){o.logger?.warn(`AWS SDK Warning for ${o.clientName}::${o.commandName} response parsing (${l.headers.expires}): ${h}`),delete l.headers.expires}}return p},qn={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},jn=a=>({applyToStack:r=>{r.addRelativeTo(On(),qn)}});class Hn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),ge(c)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").sc(Fr).build(){}function Wn(a){return r=>async o=>{const c={...o.input},p=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const l of p){const h=c[l.target];if(h){let i;typeof h=="string"?$n(h,a)?i=a.base64Decoder(h):(i=a.utf8Decoder(h),c[l.target]=a.base64Encoder(i)):(i=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h),c[l.target]=a.base64Encoder(i));const d=new a.md5;d.update(i),c[l.hash]=a.base64Encoder(await d.digest())}}return r({...o,input:c})}}const Kn={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Be=a=>({applyToStack:r=>{r.add(Wn(a),Kn)}});function $n(a,r){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a))return!1;try{return r.base64Decoder(a).length===32}catch{return!1}}class zn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),ge(c),Be(c)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").sc(Dr).build(){}class Vn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),ge(c),Be(c)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").sc(Tr).build(){}class Gn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),ge(c)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").sc(Mr).build(){}class Yn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),Ue(c,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),Be(c),jn()]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").sc(Lr).build(){}class Rt extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),Ue(c,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Un(),ge(c),Be(c)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(kr).build(){}class Xn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),Ue(c,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),ge(c)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").sc(Nr).build(){}class Qn extends pe.classBuilder().ep({...ye,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(r,o,c,p){return[me(c,r.getEndpointParameterInstructions()),Ue(c,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),ge(c),Be(c)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").sc(Pr).build(){}const Zn={CRC32:"CRC32"};function Ri(a){const r=Ie.c(9),{folderName:o,fullPrefix:c,bucketName:p}=a;let l;r[0]!==p||r[1]!==c?(l={bucket:p,_splat:c},r[0]=p,r[1]=c,r[2]=l):l=r[2];let h;r[3]===Symbol.for("react.memo_cache_sentinel")?(h=z.jsx(rn,{className:"size-5 text-muted-foreground"}),r[3]=h):h=r[3];let i;r[4]!==o?(i=z.jsx("span",{className:"font-medium",children:o}),r[4]=o,r[5]=i):i=r[5];let d;return r[6]!==l||r[7]!==i?(d=z.jsxs(Ir,{className:"flex items-center gap-3 rounded-lg border bg-card p-4 transition-colors hover:bg-accent",params:l,to:"/s3/ls/$bucket/$",children:[h,i]}),r[6]=l,r[7]=i,r[8]=d):d=r[8],d}class Jn{onabort=null;_aborted=!1;constructor(){Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}get aborted(){return this._aborted}abort(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)}}class ei{signal=new Jn;abort(){this.signal.abort()}}var De={exports:{}},Bt;function Oe(){if(Bt)return De.exports;Bt=1;var a=typeof Reflect=="object"?Reflect:null,r=a&&typeof a.apply=="function"?a.apply:function(g,C,I){return Function.prototype.apply.call(g,C,I)},o;a&&typeof a.ownKeys=="function"?o=a.ownKeys:Object.getOwnPropertySymbols?o=function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:o=function(g){return Object.getOwnPropertyNames(g)};function c(m){console&&console.warn&&console.warn(m)}var p=Number.isNaN||function(g){return g!==g};function l(){l.init.call(this)}De.exports=l,De.exports.once=y,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var h=10;function i(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(m){if(typeof m!="number"||m<0||p(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");h=m}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||p(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this};function d(m){return m._maxListeners===void 0?l.defaultMaxListeners:m._maxListeners}l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(g){for(var C=[],I=1;I<arguments.length;I++)C.push(arguments[I]);var P=g==="error",U=this._events;if(U!==void 0)P=P&&U.error===void 0;else if(!P)return!1;if(P){var q;if(C.length>0&&(q=C[0]),q instanceof Error)throw q;var G=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw G.context=q,G}var ee=U[g];if(ee===void 0)return!1;if(typeof ee=="function")r(ee,this,C);else for(var re=ee.length,ne=_(ee,re),I=0;I<re;++I)r(ne[I],this,C);return!0};function b(m,g,C,I){var P,U,q;if(i(C),U=m._events,U===void 0?(U=m._events=Object.create(null),m._eventsCount=0):(U.newListener!==void 0&&(m.emit("newListener",g,C.listener?C.listener:C),U=m._events),q=U[g]),q===void 0)q=U[g]=C,++m._eventsCount;else if(typeof q=="function"?q=U[g]=I?[C,q]:[q,C]:I?q.unshift(C):q.push(C),P=d(m),P>0&&q.length>P&&!q.warned){q.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=m,G.type=g,G.count=q.length,c(G)}return m}l.prototype.addListener=function(g,C){return b(this,g,C,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(g,C){return b(this,g,C,!0)};function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R(m,g,C){var I={fired:!1,wrapFn:void 0,target:m,type:g,listener:C},P=D.bind(I);return P.listener=C,I.wrapFn=P,P}l.prototype.once=function(g,C){return i(C),this.on(g,R(this,g,C)),this},l.prototype.prependOnceListener=function(g,C){return i(C),this.prependListener(g,R(this,g,C)),this},l.prototype.removeListener=function(g,C){var I,P,U,q,G;if(i(C),P=this._events,P===void 0)return this;if(I=P[g],I===void 0)return this;if(I===C||I.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete P[g],P.removeListener&&this.emit("removeListener",g,I.listener||C));else if(typeof I!="function"){for(U=-1,q=I.length-1;q>=0;q--)if(I[q]===C||I[q].listener===C){G=I[q].listener,U=q;break}if(U<0)return this;U===0?I.shift():T(I,U),I.length===1&&(P[g]=I[0]),P.removeListener!==void 0&&this.emit("removeListener",g,G||C)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(g){var C,I,P;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[g]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[g]),this;if(arguments.length===0){var U=Object.keys(I),q;for(P=0;P<U.length;++P)q=U[P],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=I[g],typeof C=="function")this.removeListener(g,C);else if(C!==void 0)for(P=C.length-1;P>=0;P--)this.removeListener(g,C[P]);return this};function B(m,g,C){var I=m._events;if(I===void 0)return[];var P=I[g];return P===void 0?[]:typeof P=="function"?C?[P.listener||P]:[P]:C?F(P):_(P,P.length)}l.prototype.listeners=function(g){return B(this,g,!0)},l.prototype.rawListeners=function(g){return B(this,g,!1)},l.listenerCount=function(m,g){return typeof m.listenerCount=="function"?m.listenerCount(g):A.call(m,g)},l.prototype.listenerCount=A;function A(m){var g=this._events;if(g!==void 0){var C=g[m];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function _(m,g){for(var C=new Array(g),I=0;I<g;++I)C[I]=m[I];return C}function T(m,g){for(;g+1<m.length;g++)m[g]=m[g+1];m.pop()}function F(m){for(var g=new Array(m.length),C=0;C<g.length;++C)g[C]=m[C].listener||m[C];return g}function y(m,g){return new Promise(function(C,I){function P(q){m.removeListener(g,U),I(q)}function U(){typeof m.removeListener=="function"&&m.removeListener("error",P),C([].slice.call(arguments))}S(m,g,U,{once:!0}),g!=="error"&&v(m,P,{once:!0})})}function v(m,g,C){typeof m.on=="function"&&S(m,"error",g,C)}function S(m,g,C,I){if(typeof m.on=="function")I.once?m.once(g,C):m.on(g,C);else if(typeof m.addEventListener=="function")m.addEventListener(g,function P(U){I.once&&m.removeEventListener(g,P),C(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return De.exports}var We=Oe(),Ke={},Ce={},Ft;function ti(){if(Ft)return Ce;Ft=1,Ce.byteLength=i,Ce.toByteArray=b,Ce.fromByteArray=B;for(var a=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,l=c.length;p<l;++p)a[p]=c[p],r[c.charCodeAt(p)]=p;r[45]=62,r[95]=63;function h(A){var _=A.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=A.indexOf("=");T===-1&&(T=_);var F=T===_?0:4-T%4;return[T,F]}function i(A){var _=h(A),T=_[0],F=_[1];return(T+F)*3/4-F}function d(A,_,T){return(_+T)*3/4-T}function b(A){var _,T=h(A),F=T[0],y=T[1],v=new o(d(A,F,y)),S=0,m=y>0?F-4:F,g;for(g=0;g<m;g+=4)_=r[A.charCodeAt(g)]<<18|r[A.charCodeAt(g+1)]<<12|r[A.charCodeAt(g+2)]<<6|r[A.charCodeAt(g+3)],v[S++]=_>>16&255,v[S++]=_>>8&255,v[S++]=_&255;return y===2&&(_=r[A.charCodeAt(g)]<<2|r[A.charCodeAt(g+1)]>>4,v[S++]=_&255),y===1&&(_=r[A.charCodeAt(g)]<<10|r[A.charCodeAt(g+1)]<<4|r[A.charCodeAt(g+2)]>>2,v[S++]=_>>8&255,v[S++]=_&255),v}function D(A){return a[A>>18&63]+a[A>>12&63]+a[A>>6&63]+a[A&63]}function R(A,_,T){for(var F,y=[],v=_;v<T;v+=3)F=(A[v]<<16&16711680)+(A[v+1]<<8&65280)+(A[v+2]&255),y.push(D(F));return y.join("")}function B(A){for(var _,T=A.length,F=T%3,y=[],v=16383,S=0,m=T-F;S<m;S+=v)y.push(R(A,S,S+v>m?m:S+v));return F===1?(_=A[T-1],y.push(a[_>>2]+a[_<<4&63]+"==")):F===2&&(_=(A[T-2]<<8)+A[T-1],y.push(a[_>>10]+a[_>>4&63]+a[_<<2&63]+"=")),y.join("")}return Ce}var Te={};var Dt;function ri(){return Dt||(Dt=1,Te.read=function(a,r,o,c,p){var l,h,i=p*8-c-1,d=(1<<i)-1,b=d>>1,D=-7,R=o?p-1:0,B=o?-1:1,A=a[r+R];for(R+=B,l=A&(1<<-D)-1,A>>=-D,D+=i;D>0;l=l*256+a[r+R],R+=B,D-=8);for(h=l&(1<<-D)-1,l>>=-D,D+=c;D>0;h=h*256+a[r+R],R+=B,D-=8);if(l===0)l=1-b;else{if(l===d)return h?NaN:(A?-1:1)*(1/0);h=h+Math.pow(2,c),l=l-b}return(A?-1:1)*h*Math.pow(2,l-c)},Te.write=function(a,r,o,c,p,l){var h,i,d,b=l*8-p-1,D=(1<<b)-1,R=D>>1,B=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=c?0:l-1,_=c?1:-1,T=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(i=isNaN(r)?1:0,h=D):(h=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+R>=1?r+=B/d:r+=B*Math.pow(2,1-R),r*d>=2&&(h++,d/=2),h+R>=D?(i=0,h=D):h+R>=1?(i=(r*d-1)*Math.pow(2,p),h=h+R):(i=r*Math.pow(2,R-1)*Math.pow(2,p),h=0));p>=8;a[o+A]=i&255,A+=_,i/=256,p-=8);for(h=h<<p|i,b+=p;b>0;a[o+A]=h&255,A+=_,h/=256,b-=8);a[o+A-_]|=T*128}),Te}var Tt;function Fe(){return Tt||(Tt=1,(function(a){var r=ti(),o=ri(),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=i,a.SlowBuffer=y,a.INSPECT_MAX_BYTES=50;var p=2147483647;a.kMaxLength=p,i.TYPED_ARRAY_SUPPORT=l(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function h(n){if(n>p)throw new RangeError('The value "'+n+'" is invalid for option "size"');var e=new Uint8Array(n);return Object.setPrototypeOf(e,i.prototype),e}function i(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(n)}return d(n,e,t)}i.poolSize=8192;function d(n,e,t){if(typeof n=="string")return B(n,e);if(ArrayBuffer.isView(n))return A(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(M(n,ArrayBuffer)||n&&M(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(M(n,SharedArrayBuffer)||n&&M(n.buffer,SharedArrayBuffer)))return _(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var u=n.valueOf&&n.valueOf();if(u!=null&&u!==n)return i.from(u,e,t);var w=T(n);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return i.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}i.from=function(n,e,t){return d(n,e,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function b(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function D(n,e,t){return b(n),n<=0?h(n):e!==void 0?typeof t=="string"?h(n).fill(e,t):h(n).fill(e):h(n)}i.alloc=function(n,e,t){return D(n,e,t)};function R(n){return b(n),h(n<0?0:F(n)|0)}i.allocUnsafe=function(n){return R(n)},i.allocUnsafeSlow=function(n){return R(n)};function B(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=v(n,e)|0,u=h(t),w=u.write(n,e);return w!==t&&(u=u.slice(0,w)),u}function A(n){for(var e=n.length<0?0:F(n.length)|0,t=h(e),u=0;u<e;u+=1)t[u]=n[u]&255;return t}function _(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var u;return e===void 0&&t===void 0?u=new Uint8Array(n):t===void 0?u=new Uint8Array(n,e):u=new Uint8Array(n,e,t),Object.setPrototypeOf(u,i.prototype),u}function T(n){if(i.isBuffer(n)){var e=F(n.length)|0,t=h(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||O(n.length)?h(0):A(n);if(n.type==="Buffer"&&Array.isArray(n.data))return A(n.data)}function F(n){if(n>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return n|0}function y(n){return+n!=n&&(n=0),i.alloc(+n)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,t){if(M(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var u=e.length,w=t.length,L=0,k=Math.min(u,w);L<k;++L)if(e[L]!==t[L]){u=e[L],w=t[L];break}return u<w?-1:w<u?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);var u;if(t===void 0)for(t=0,u=0;u<e.length;++u)t+=e[u].length;var w=i.allocUnsafe(t),L=0;for(u=0;u<e.length;++u){var k=e[u];if(M(k,Uint8Array)&&(k=i.from(k)),!i.isBuffer(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(w,L),L+=k.length}return w};function v(n,e){if(i.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||M(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);var t=n.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&t===0)return 0;for(var w=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return N(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return s(n).length;default:if(w)return u?-1:N(n).length;e=(""+e).toLowerCase(),w=!0}}i.byteLength=v;function S(n,e,t){var u=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return ue(this,e,t);case"utf8":case"utf-8":return ne(this,e,t);case"ascii":return ae(this,e,t);case"latin1":case"binary":return he(this,e,t);case"base64":return re(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,e,t);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),u=!0}}i.prototype._isBuffer=!0;function m(n,e,t){var u=n[e];n[e]=n[t],n[t]=u}i.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?ne(this,0,e):S.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(i.prototype[c]=i.prototype.inspect),i.prototype.compare=function(e,t,u,w,L){if(M(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),u===void 0&&(u=e?e.length:0),w===void 0&&(w=0),L===void 0&&(L=this.length),t<0||u>e.length||w<0||L>this.length)throw new RangeError("out of range index");if(w>=L&&t>=u)return 0;if(w>=L)return-1;if(t>=u)return 1;if(t>>>=0,u>>>=0,w>>>=0,L>>>=0,this===e)return 0;for(var k=L-w,W=u-t,K=Math.min(k,W),V=this.slice(w,L),J=e.slice(t,u),$=0;$<K;++$)if(V[$]!==J[$]){k=V[$],W=J[$];break}return k<W?-1:W<k?1:0};function g(n,e,t,u,w){if(n.length===0)return-1;if(typeof t=="string"?(u=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,O(t)&&(t=w?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(w)return-1;t=n.length-1}else if(t<0)if(w)t=0;else return-1;if(typeof e=="string"&&(e=i.from(e,u)),i.isBuffer(e))return e.length===0?-1:C(n,e,t,u,w);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):C(n,[e],t,u,w);throw new TypeError("val must be string, number or Buffer")}function C(n,e,t,u,w){var L=1,k=n.length,W=e.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(n.length<2||e.length<2)return-1;L=2,k/=2,W/=2,t/=2}function K(_t,Ct){return L===1?_t[Ct]:_t.readUInt16BE(Ct*L)}var V;if(w){var J=-1;for(V=t;V<k;V++)if(K(n,V)===K(e,J===-1?0:V-J)){if(J===-1&&(J=V),V-J+1===W)return J*L}else J!==-1&&(V-=V-J),J=-1}else for(t+W>k&&(t=k-W),V=t;V>=0;V--){for(var $=!0,se=0;se<W;se++)if(K(n,V+se)!==K(e,se)){$=!1;break}if($)return V}return-1}i.prototype.includes=function(e,t,u){return this.indexOf(e,t,u)!==-1},i.prototype.indexOf=function(e,t,u){return g(this,e,t,u,!0)},i.prototype.lastIndexOf=function(e,t,u){return g(this,e,t,u,!1)};function I(n,e,t,u){t=Number(t)||0;var w=n.length-t;u?(u=Number(u),u>w&&(u=w)):u=w;var L=e.length;u>L/2&&(u=L/2);for(var k=0;k<u;++k){var W=parseInt(e.substr(k*2,2),16);if(O(W))return k;n[t+k]=W}return k}function P(n,e,t,u){return f(N(e,n.length-t),n,t,u)}function U(n,e,t,u){return f(j(e),n,t,u)}function q(n,e,t,u){return U(n,e,t,u)}function G(n,e,t,u){return f(s(e),n,t,u)}function ee(n,e,t,u){return f(H(e,n.length-t),n,t,u)}i.prototype.write=function(e,t,u,w){if(t===void 0)w="utf8",u=this.length,t=0;else if(u===void 0&&typeof t=="string")w=t,u=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(u)?(u=u>>>0,w===void 0&&(w="utf8")):(w=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var L=this.length-t;if((u===void 0||u>L)&&(u=L),e.length>0&&(u<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(var k=!1;;)switch(w){case"hex":return I(this,e,t,u);case"utf8":case"utf-8":return P(this,e,t,u);case"ascii":return U(this,e,t,u);case"latin1":case"binary":return q(this,e,t,u);case"base64":return G(this,e,t,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,e,t,u);default:if(k)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),k=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(n,e,t){return e===0&&t===n.length?r.fromByteArray(n):r.fromByteArray(n.slice(e,t))}function ne(n,e,t){t=Math.min(n.length,t);for(var u=[],w=e;w<t;){var L=n[w],k=null,W=L>239?4:L>223?3:L>191?2:1;if(w+W<=t){var K,V,J,$;switch(W){case 1:L<128&&(k=L);break;case 2:K=n[w+1],(K&192)===128&&($=(L&31)<<6|K&63,$>127&&(k=$));break;case 3:K=n[w+1],V=n[w+2],(K&192)===128&&(V&192)===128&&($=(L&15)<<12|(K&63)<<6|V&63,$>2047&&($<55296||$>57343)&&(k=$));break;case 4:K=n[w+1],V=n[w+2],J=n[w+3],(K&192)===128&&(V&192)===128&&(J&192)===128&&($=(L&15)<<18|(K&63)<<12|(V&63)<<6|J&63,$>65535&&$<1114112&&(k=$))}}k===null?(k=65533,W=1):k>65535&&(k-=65536,u.push(k>>>10&1023|55296),k=56320|k&1023),u.push(k),w+=W}return oe(u)}var ie=4096;function oe(n){var e=n.length;if(e<=ie)return String.fromCharCode.apply(String,n);for(var t="",u=0;u<e;)t+=String.fromCharCode.apply(String,n.slice(u,u+=ie));return t}function ae(n,e,t){var u="";t=Math.min(n.length,t);for(var w=e;w<t;++w)u+=String.fromCharCode(n[w]&127);return u}function he(n,e,t){var u="";t=Math.min(n.length,t);for(var w=e;w<t;++w)u+=String.fromCharCode(n[w]);return u}function ue(n,e,t){var u=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>u)&&(t=u);for(var w="",L=e;L<t;++L)w+=X[n[L]];return w}function fe(n,e,t){for(var u=n.slice(e,t),w="",L=0;L<u.length;L+=2)w+=String.fromCharCode(u[L]+u[L+1]*256);return w}i.prototype.slice=function(e,t){var u=this.length;e=~~e,t=t===void 0?u:~~t,e<0?(e+=u,e<0&&(e=0)):e>u&&(e=u),t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),t<e&&(t=e);var w=this.subarray(e,t);return Object.setPrototypeOf(w,i.prototype),w};function Y(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(e,t,u){e=e>>>0,t=t>>>0,u||Y(e,t,this.length);for(var w=this[e],L=1,k=0;++k<t&&(L*=256);)w+=this[e+k]*L;return w},i.prototype.readUIntBE=function(e,t,u){e=e>>>0,t=t>>>0,u||Y(e,t,this.length);for(var w=this[e+--t],L=1;t>0&&(L*=256);)w+=this[e+--t]*L;return w},i.prototype.readUInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,u){e=e>>>0,t=t>>>0,u||Y(e,t,this.length);for(var w=this[e],L=1,k=0;++k<t&&(L*=256);)w+=this[e+k]*L;return L*=128,w>=L&&(w-=Math.pow(2,8*t)),w},i.prototype.readIntBE=function(e,t,u){e=e>>>0,t=t>>>0,u||Y(e,t,this.length);for(var w=t,L=1,k=this[e+--w];w>0&&(L*=256);)k+=this[e+--w]*L;return L*=128,k>=L&&(k-=Math.pow(2,8*t)),k},i.prototype.readInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var u=this[e]|this[e+1]<<8;return u&32768?u|4294901760:u},i.prototype.readInt16BE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var u=this[e+1]|this[e]<<8;return u&32768?u|4294901760:u},i.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),o.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),o.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),o.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),o.read(this,e,!1,52,8)};function Z(n,e,t,u,w,L){if(!i.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>w||e<L)throw new RangeError('"value" argument is out of bounds');if(t+u>n.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(e,t,u,w){if(e=+e,t=t>>>0,u=u>>>0,!w){var L=Math.pow(2,8*u)-1;Z(this,e,t,u,L,0)}var k=1,W=0;for(this[t]=e&255;++W<u&&(k*=256);)this[t+W]=e/k&255;return t+u},i.prototype.writeUIntBE=function(e,t,u,w){if(e=+e,t=t>>>0,u=u>>>0,!w){var L=Math.pow(2,8*u)-1;Z(this,e,t,u,L,0)}var k=u-1,W=1;for(this[t+k]=e&255;--k>=0&&(W*=256);)this[t+k]=e/W&255;return t+u},i.prototype.writeUInt8=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,1,255,0),this[t]=e&255,t+1},i.prototype.writeUInt16LE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeUInt32LE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},i.prototype.writeUInt32BE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},i.prototype.writeIntLE=function(e,t,u,w){if(e=+e,t=t>>>0,!w){var L=Math.pow(2,8*u-1);Z(this,e,t,u,L-1,-L)}var k=0,W=1,K=0;for(this[t]=e&255;++k<u&&(W*=256);)e<0&&K===0&&this[t+k-1]!==0&&(K=1),this[t+k]=(e/W>>0)-K&255;return t+u},i.prototype.writeIntBE=function(e,t,u,w){if(e=+e,t=t>>>0,!w){var L=Math.pow(2,8*u-1);Z(this,e,t,u,L-1,-L)}var k=u-1,W=1,K=0;for(this[t+k]=e&255;--k>=0&&(W*=256);)e<0&&K===0&&this[t+k+1]!==0&&(K=1),this[t+k]=(e/W>>0)-K&255;return t+u},i.prototype.writeInt8=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},i.prototype.writeInt16LE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeInt32LE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,u){return e=+e,t=t>>>0,u||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function te(n,e,t,u,w,L){if(t+u>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function we(n,e,t,u,w){return e=+e,t=t>>>0,w||te(n,e,t,4),o.write(n,e,t,u,23,4),t+4}i.prototype.writeFloatLE=function(e,t,u){return we(this,e,t,!0,u)},i.prototype.writeFloatBE=function(e,t,u){return we(this,e,t,!1,u)};function be(n,e,t,u,w){return e=+e,t=t>>>0,w||te(n,e,t,8),o.write(n,e,t,u,52,8),t+8}i.prototype.writeDoubleLE=function(e,t,u){return be(this,e,t,!0,u)},i.prototype.writeDoubleBE=function(e,t,u){return be(this,e,t,!1,u)},i.prototype.copy=function(e,t,u,w){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(u||(u=0),!w&&w!==0&&(w=this.length),t>=e.length&&(t=e.length),t||(t=0),w>0&&w<u&&(w=u),w===u||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),e.length-t<w-u&&(w=e.length-t+u);var L=w-u;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,u,w);else if(this===e&&u<t&&t<w)for(var k=L-1;k>=0;--k)e[k+t]=this[k+u];else Uint8Array.prototype.set.call(e,this.subarray(u,w),t);return L},i.prototype.fill=function(e,t,u,w){if(typeof e=="string"){if(typeof t=="string"?(w=t,t=0,u=this.length):typeof u=="string"&&(w=u,u=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!i.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(e.length===1){var L=e.charCodeAt(0);(w==="utf8"&&L<128||w==="latin1")&&(e=L)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<u)throw new RangeError("Out of range index");if(u<=t)return this;t=t>>>0,u=u===void 0?this.length:u>>>0,e||(e=0);var k;if(typeof e=="number")for(k=t;k<u;++k)this[k]=e;else{var W=i.isBuffer(e)?e:i.from(e,w),K=W.length;if(K===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(k=0;k<u-t;++k)this[k+t]=W[k%K]}return this};var x=/[^+/0-9A-Za-z-_]/g;function E(n){if(n=n.split("=")[0],n=n.trim().replace(x,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function N(n,e){e=e||1/0;for(var t,u=n.length,w=null,L=[],k=0;k<u;++k){if(t=n.charCodeAt(k),t>55295&&t<57344){if(!w){if(t>56319){(e-=3)>-1&&L.push(239,191,189);continue}else if(k+1===u){(e-=3)>-1&&L.push(239,191,189);continue}w=t;continue}if(t<56320){(e-=3)>-1&&L.push(239,191,189),w=t;continue}t=(w-55296<<10|t-56320)+65536}else w&&(e-=3)>-1&&L.push(239,191,189);if(w=null,t<128){if((e-=1)<0)break;L.push(t)}else if(t<2048){if((e-=2)<0)break;L.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;L.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;L.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return L}function j(n){for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function H(n,e){for(var t,u,w,L=[],k=0;k<n.length&&!((e-=2)<0);++k)t=n.charCodeAt(k),u=t>>8,w=t%256,L.push(w),L.push(u);return L}function s(n){return r.toByteArray(E(n))}function f(n,e,t,u){for(var w=0;w<u&&!(w+t>=e.length||w>=n.length);++w)e[w+t]=n[w];return w}function M(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function O(n){return n!==n}var X=(function(){for(var n="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var u=t*16,w=0;w<16;++w)e[u+w]=n[t]+n[w];return e})()})(Ke)),Ke}var de=Fe();const ni={lstatSync:()=>{},isFileReadStream(a){return!1}},Pe={...ni,runtime:"browser"},Me=a=>{if(a==null)return 0;if(typeof a=="string")return de.Buffer.byteLength(a);if(typeof a.byteLength=="number")return a.byteLength;if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.start=="number"&&typeof a.end=="number")return a.end+1-a.start;if(Pe.isFileReadStream(a))try{return Pe.lstatSync(a.path).size}catch{return}};var le;(function(a){a.EMPTY_INPUT="a null or undefined Body",a.CONTENT_LENGTH="the ContentLength property of the params set by the caller",a.STRING_LENGTH="the encoded byte length of the Body string",a.TYPED_ARRAY="the byteLength of a typed byte array such as Uint8Array",a.LENGTH="the value of Body.length",a.SIZE="the value of Body.size",a.START_END_DIFF="the numeric difference between Body.start and Body.end",a.LSTAT="the size of the file given by Body.path on disk as reported by lstatSync"})(le||(le={}));const ii=(a,r)=>{if(r!=null)return le.CONTENT_LENGTH;if(a==null)return le.EMPTY_INPUT;if(typeof a=="string")return le.STRING_LENGTH;if(typeof a.byteLength=="number")return le.TYPED_ARRAY;if(typeof a.length=="number")return le.LENGTH;if(typeof a.size=="number")return le.SIZE;if(typeof a.start=="number"&&typeof a.end=="number")return le.START_END_DIFF;if(Pe.isFileReadStream(a))try{return Pe.lstatSync(a.path).size,le.LSTAT}catch{return}};var Le={exports:{}},Mt;function ve(){return Mt||(Mt=1,typeof Object.create=="function"?Le.exports=function(r,o){o&&(r.super_=o,r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Le.exports=function(r,o){if(o){r.super_=o;var c=function(){};c.prototype=o.prototype,r.prototype=new c,r.prototype.constructor=r}}),Le.exports}var $e,Lt;function sr(){return Lt||(Lt=1,$e=Oe().EventEmitter),$e}const ai={},oi=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),ur=Ur(oi);var ze,kt;function si(){if(kt)return ze;kt=1;function a(_,T){var F=Object.keys(_);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(_);T&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(_,v).enumerable})),F.push.apply(F,y)}return F}function r(_){for(var T=1;T<arguments.length;T++){var F=arguments[T]!=null?arguments[T]:{};T%2?a(Object(F),!0).forEach(function(y){o(_,y,F[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(F)):a(Object(F)).forEach(function(y){Object.defineProperty(_,y,Object.getOwnPropertyDescriptor(F,y))})}return _}function o(_,T,F){return T=h(T),T in _?Object.defineProperty(_,T,{value:F,enumerable:!0,configurable:!0,writable:!0}):_[T]=F,_}function c(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function p(_,T){for(var F=0;F<T.length;F++){var y=T[F];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,h(y.key),y)}}function l(_,T,F){return T&&p(_.prototype,T),Object.defineProperty(_,"prototype",{writable:!1}),_}function h(_){var T=i(_,"string");return typeof T=="symbol"?T:String(T)}function i(_,T){if(typeof _!="object"||_===null)return _;var F=_[Symbol.toPrimitive];if(F!==void 0){var y=F.call(_,T);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var d=Fe(),b=d.Buffer,D=ur,R=D.inspect,B=R&&R.custom||"inspect";function A(_,T,F){b.prototype.copy.call(_,T,F)}return ze=(function(){function _(){c(this,_),this.head=null,this.tail=null,this.length=0}return l(_,[{key:"push",value:function(F){var y={data:F,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(F){var y={data:F,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var F=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,F}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(F){if(this.length===0)return"";for(var y=this.head,v=""+y.data;y=y.next;)v+=F+y.data;return v}},{key:"concat",value:function(F){if(this.length===0)return b.alloc(0);for(var y=b.allocUnsafe(F>>>0),v=this.head,S=0;v;)A(v.data,y,S),S+=v.data.length,v=v.next;return y}},{key:"consume",value:function(F,y){var v;return F<this.head.data.length?(v=this.head.data.slice(0,F),this.head.data=this.head.data.slice(F)):F===this.head.data.length?v=this.shift():v=y?this._getString(F):this._getBuffer(F),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(F){var y=this.head,v=1,S=y.data;for(F-=S.length;y=y.next;){var m=y.data,g=F>m.length?m.length:F;if(g===m.length?S+=m:S+=m.slice(0,F),F-=g,F===0){g===m.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=m.slice(g));break}++v}return this.length-=v,S}},{key:"_getBuffer",value:function(F){var y=b.allocUnsafe(F),v=this.head,S=1;for(v.data.copy(y),F-=v.data.length;v=v.next;){var m=v.data,g=F>m.length?m.length:F;if(m.copy(y,y.length-F,0,g),F-=g,F===0){g===m.length?(++S,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=m.slice(g));break}++S}return this.length-=S,y}},{key:B,value:function(F,y){return R(this,r(r({},y),{},{depth:0,customInspect:!1}))}}]),_})(),ze}var Ve,Nt;function lr(){if(Nt)return Ve;Nt=1;function a(h,i){var d=this,b=this._readableState&&this._readableState.destroyed,D=this._writableState&&this._writableState.destroyed;return b||D?(i?i(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(p,this,h)):process.nextTick(p,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(R){!i&&R?d._writableState?d._writableState.errorEmitted?process.nextTick(o,d):(d._writableState.errorEmitted=!0,process.nextTick(r,d,R)):process.nextTick(r,d,R):i?(process.nextTick(o,d),i(R)):process.nextTick(o,d)}),this)}function r(h,i){p(h,i),o(h)}function o(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function p(h,i){h.emit("error",i)}function l(h,i){var d=h._readableState,b=h._writableState;d&&d.autoDestroy||b&&b.autoDestroy?h.destroy(i):h.emit("error",i)}return Ve={destroy:a,undestroy:c,errorOrDestroy:l},Ve}var Ge={},Pt;function _e(){if(Pt)return Ge;Pt=1;function a(i,d){i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.__proto__=d}var r={};function o(i,d,b){b||(b=Error);function D(B,A,_){return typeof d=="string"?d:d(B,A,_)}var R=(function(B){a(A,B);function A(_,T,F){return B.call(this,D(_,T,F))||this}return A})(b);R.prototype.name=b.name,R.prototype.code=i,r[i]=R}function c(i,d){if(Array.isArray(i)){var b=i.length;return i=i.map(function(D){return String(D)}),b>2?"one of ".concat(d," ").concat(i.slice(0,b-1).join(", "),", or ")+i[b-1]:b===2?"one of ".concat(d," ").concat(i[0]," or ").concat(i[1]):"of ".concat(d," ").concat(i[0])}else return"of ".concat(d," ").concat(String(i))}function p(i,d,b){return i.substr(0,d.length)===d}function l(i,d,b){return(b===void 0||b>i.length)&&(b=i.length),i.substring(b-d.length,b)===d}function h(i,d,b){return typeof b!="number"&&(b=0),b+d.length>i.length?!1:i.indexOf(d,b)!==-1}return o("ERR_INVALID_OPT_VALUE",function(i,d){return'The value "'+d+'" is invalid for option "'+i+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(i,d,b){var D;typeof d=="string"&&p(d,"not ")?(D="must not be",d=d.replace(/^not /,"")):D="must be";var R;if(l(i," argument"))R="The ".concat(i," ").concat(D," ").concat(c(d,"type"));else{var B=h(i,".")?"property":"argument";R='The "'.concat(i,'" ').concat(B," ").concat(D," ").concat(c(d,"type"))}return R+=". Received type ".concat(typeof b),R},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ge.codes=r,Ge}var Ye,It;function fr(){if(It)return Ye;It=1;var a=_e().codes.ERR_INVALID_OPT_VALUE;function r(c,p,l){return c.highWaterMark!=null?c.highWaterMark:p?c[l]:null}function o(c,p,l,h){var i=r(p,h,l);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var d=h?l:"highWaterMark";throw new a(d,i)}return Math.floor(i)}return c.objectMode?16:16*1024}return Ye={getHighWaterMark:o},Ye}var Xe,Ut;function ui(){if(Ut)return Xe;Ut=1,Xe=a;function a(o,c){if(r("noDeprecation"))return o;var p=!1;function l(){if(!p){if(r("throwDeprecation"))throw new Error(c);r("traceDeprecation")?console.trace(c):console.warn(c),p=!0}return o.apply(this,arguments)}return l}function r(o){try{if(!Ee.localStorage)return!1}catch{return!1}var c=Ee.localStorage[o];return c==null?!1:String(c).toLowerCase()==="true"}return Xe}var Qe,Ot;function cr(){if(Ot)return Qe;Ot=1,Qe=P;function a(x){var E=this;this.next=null,this.entry=null,this.finish=function(){be(E,x)}}var r;P.WritableState=C;var o={deprecate:ui()},c=sr(),p=Fe().Buffer,l=(typeof Ee<"u"?Ee:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(x){return p.from(x)}function i(x){return p.isBuffer(x)||x instanceof l}var d=lr(),b=fr(),D=b.getHighWaterMark,R=_e().codes,B=R.ERR_INVALID_ARG_TYPE,A=R.ERR_METHOD_NOT_IMPLEMENTED,_=R.ERR_MULTIPLE_CALLBACK,T=R.ERR_STREAM_CANNOT_PIPE,F=R.ERR_STREAM_DESTROYED,y=R.ERR_STREAM_NULL_VALUES,v=R.ERR_STREAM_WRITE_AFTER_END,S=R.ERR_UNKNOWN_ENCODING,m=d.errorOrDestroy;ve()(P,c);function g(){}function C(x,E,N){r=r||xe(),x=x||{},typeof N!="boolean"&&(N=E instanceof r),this.objectMode=!!x.objectMode,N&&(this.objectMode=this.objectMode||!!x.writableObjectMode),this.highWaterMark=D(this,x,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=x.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=x.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){oe(E,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}C.prototype.getBuffer=function(){for(var E=this.bufferedRequest,N=[];E;)N.push(E),E=E.next;return N},(function(){try{Object.defineProperty(C.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var I;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(E){return I.call(this,E)?!0:this!==P?!1:E&&E._writableState instanceof C}})):I=function(E){return E instanceof this};function P(x){r=r||xe();var E=this instanceof r;if(!E&&!I.call(P,this))return new P(x);this._writableState=new C(x,this,E),this.writable=!0,x&&(typeof x.write=="function"&&(this._write=x.write),typeof x.writev=="function"&&(this._writev=x.writev),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.final=="function"&&(this._final=x.final)),c.call(this)}P.prototype.pipe=function(){m(this,new T)};function U(x,E){var N=new v;m(x,N),process.nextTick(E,N)}function q(x,E,N,j){var H;return N===null?H=new y:typeof N!="string"&&!E.objectMode&&(H=new B("chunk",["string","Buffer"],N)),H?(m(x,H),process.nextTick(j,H),!1):!0}P.prototype.write=function(x,E,N){var j=this._writableState,H=!1,s=!j.objectMode&&i(x);return s&&!p.isBuffer(x)&&(x=h(x)),typeof E=="function"&&(N=E,E=null),s?E="buffer":E||(E=j.defaultEncoding),typeof N!="function"&&(N=g),j.ending?U(this,N):(s||q(this,j,x,N))&&(j.pendingcb++,H=ee(this,j,s,x,E,N)),H},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var x=this._writableState;x.corked&&(x.corked--,!x.writing&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&ue(this,x))},P.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())>-1))throw new S(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(x,E,N){return!x.objectMode&&x.decodeStrings!==!1&&typeof E=="string"&&(E=p.from(E,N)),E}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee(x,E,N,j,H,s){if(!N){var f=G(E,j,H);j!==f&&(N=!0,H="buffer",j=f)}var M=E.objectMode?1:j.length;E.length+=M;var O=E.length<E.highWaterMark;if(O||(E.needDrain=!0),E.writing||E.corked){var X=E.lastBufferedRequest;E.lastBufferedRequest={chunk:j,encoding:H,isBuf:N,callback:s,next:null},X?X.next=E.lastBufferedRequest:E.bufferedRequest=E.lastBufferedRequest,E.bufferedRequestCount+=1}else re(x,E,!1,M,j,H,s);return O}function re(x,E,N,j,H,s,f){E.writelen=j,E.writecb=f,E.writing=!0,E.sync=!0,E.destroyed?E.onwrite(new F("write")):N?x._writev(H,E.onwrite):x._write(H,s,E.onwrite),E.sync=!1}function ne(x,E,N,j,H){--E.pendingcb,N?(process.nextTick(H,j),process.nextTick(te,x,E),x._writableState.errorEmitted=!0,m(x,j)):(H(j),x._writableState.errorEmitted=!0,m(x,j),te(x,E))}function ie(x){x.writing=!1,x.writecb=null,x.length-=x.writelen,x.writelen=0}function oe(x,E){var N=x._writableState,j=N.sync,H=N.writecb;if(typeof H!="function")throw new _;if(ie(N),E)ne(x,N,j,E,H);else{var s=fe(N)||x.destroyed;!s&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&ue(x,N),j?process.nextTick(ae,x,N,s,H):ae(x,N,s,H)}}function ae(x,E,N,j){N||he(x,E),E.pendingcb--,j(),te(x,E)}function he(x,E){E.length===0&&E.needDrain&&(E.needDrain=!1,x.emit("drain"))}function ue(x,E){E.bufferProcessing=!0;var N=E.bufferedRequest;if(x._writev&&N&&N.next){var j=E.bufferedRequestCount,H=new Array(j),s=E.corkedRequestsFree;s.entry=N;for(var f=0,M=!0;N;)H[f]=N,N.isBuf||(M=!1),N=N.next,f+=1;H.allBuffers=M,re(x,E,!0,E.length,H,"",s.finish),E.pendingcb++,E.lastBufferedRequest=null,s.next?(E.corkedRequestsFree=s.next,s.next=null):E.corkedRequestsFree=new a(E),E.bufferedRequestCount=0}else{for(;N;){var O=N.chunk,X=N.encoding,n=N.callback,e=E.objectMode?1:O.length;if(re(x,E,!1,e,O,X,n),N=N.next,E.bufferedRequestCount--,E.writing)break}N===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=N,E.bufferProcessing=!1}P.prototype._write=function(x,E,N){N(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(x,E,N){var j=this._writableState;return typeof x=="function"?(N=x,x=null,E=null):typeof E=="function"&&(N=E,E=null),x!=null&&this.write(x,E),j.corked&&(j.corked=1,this.uncork()),j.ending||we(this,j,N),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function fe(x){return x.ending&&x.length===0&&x.bufferedRequest===null&&!x.finished&&!x.writing}function Y(x,E){x._final(function(N){E.pendingcb--,N&&m(x,N),E.prefinished=!0,x.emit("prefinish"),te(x,E)})}function Z(x,E){!E.prefinished&&!E.finalCalled&&(typeof x._final=="function"&&!E.destroyed?(E.pendingcb++,E.finalCalled=!0,process.nextTick(Y,x,E)):(E.prefinished=!0,x.emit("prefinish")))}function te(x,E){var N=fe(E);if(N&&(Z(x,E),E.pendingcb===0&&(E.finished=!0,x.emit("finish"),E.autoDestroy))){var j=x._readableState;(!j||j.autoDestroy&&j.endEmitted)&&x.destroy()}return N}function we(x,E,N){E.ending=!0,te(x,E),N&&(E.finished?process.nextTick(N):x.once("finish",N)),E.ended=!0,x.writable=!1}function be(x,E,N){var j=x.entry;for(x.entry=null;j;){var H=j.callback;E.pendingcb--,H(N),j=j.next}E.corkedRequestsFree.next=x}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),P.prototype.destroy=d.destroy,P.prototype._undestroy=d.undestroy,P.prototype._destroy=function(x,E){E(x)},Qe}var Ze,qt;function xe(){if(qt)return Ze;qt=1;var a=Object.keys||function(b){var D=[];for(var R in b)D.push(R);return D};Ze=h;var r=hr(),o=cr();ve()(h,r);for(var c=a(o.prototype),p=0;p<c.length;p++){var l=c[p];h.prototype[l]||(h.prototype[l]=o.prototype[l])}function h(b){if(!(this instanceof h))return new h(b);r.call(this,b),o.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function i(){this._writableState.ended||process.nextTick(d,this)}function d(b){b.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(D){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=D,this._writableState.destroyed=D)}}),Ze}var Je={},ke={exports:{}};var jt;function li(){return jt||(jt=1,(function(a,r){var o=Fe(),c=o.Buffer;function p(h,i){for(var d in h)i[d]=h[d]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?a.exports=o:(p(o,r),r.Buffer=l);function l(h,i,d){return c(h,i,d)}l.prototype=Object.create(c.prototype),p(c,l),l.from=function(h,i,d){if(typeof h=="number")throw new TypeError("Argument must not be a number");return c(h,i,d)},l.alloc=function(h,i,d){if(typeof h!="number")throw new TypeError("Argument must be a number");var b=c(h);return i!==void 0?typeof d=="string"?b.fill(i,d):b.fill(i):b.fill(0),b},l.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return c(h)},l.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(h)}})(ke,ke.exports)),ke.exports}var Ht;function Wt(){if(Ht)return Je;Ht=1;var a=li().Buffer,r=a.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function c(y){var v=o(y);if(typeof v!="string"&&(a.isEncoding===r||!r(y)))throw new Error("Unknown encoding: "+y);return v||y}Je.StringDecoder=p;function p(y){this.encoding=c(y);var v;switch(this.encoding){case"utf16le":this.text=R,this.end=B,v=4;break;case"utf8":this.fillLast=d,v=4;break;case"base64":this.text=A,this.end=_,v=3;break;default:this.write=T,this.end=F;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(v)}p.prototype.write=function(y){if(y.length===0)return"";var v,S;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<y.length?v?v+this.text(y,S):this.text(y,S):v||""},p.prototype.end=D,p.prototype.text=b,p.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function l(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function h(y,v,S){var m=v.length-1;if(m<S)return 0;var g=l(v[m]);return g>=0?(g>0&&(y.lastNeed=g-1),g):--m<S||g===-2?0:(g=l(v[m]),g>=0?(g>0&&(y.lastNeed=g-2),g):--m<S||g===-2?0:(g=l(v[m]),g>=0?(g>0&&(g===2?g=0:y.lastNeed=g-3),g):0))}function i(y,v,S){if((v[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,""}}function d(y){var v=this.lastTotal-this.lastNeed,S=i(this,y);if(S!==void 0)return S;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function b(y,v){var S=h(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=S;var m=y.length-(S-this.lastNeed);return y.copy(this.lastChar,0,m),y.toString("utf8",v,m)}function D(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"":v}function R(y,v){if((y.length-v)%2===0){var S=y.toString("utf16le",v);if(S){var m=S.charCodeAt(S.length-1);if(m>=55296&&m<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function B(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,S)}return v}function A(y,v){var S=(y.length-v)%3;return S===0?y.toString("base64",v):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-S))}function _(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function T(y){return y.toString(this.encoding)}function F(y){return y&&y.length?this.write(y):""}return Je}var et,Kt;function vt(){if(Kt)return et;Kt=1;var a=_e().codes.ERR_STREAM_PREMATURE_CLOSE;function r(l){var h=!1;return function(){if(!h){h=!0;for(var i=arguments.length,d=new Array(i),b=0;b<i;b++)d[b]=arguments[b];l.apply(this,d)}}}function o(){}function c(l){return l.setHeader&&typeof l.abort=="function"}function p(l,h,i){if(typeof h=="function")return p(l,null,h);h||(h={}),i=r(i||o);var d=h.readable||h.readable!==!1&&l.readable,b=h.writable||h.writable!==!1&&l.writable,D=function(){l.writable||B()},R=l._writableState&&l._writableState.finished,B=function(){b=!1,R=!0,d||i.call(l)},A=l._readableState&&l._readableState.endEmitted,_=function(){d=!1,A=!0,b||i.call(l)},T=function(S){i.call(l,S)},F=function(){var S;if(d&&!A)return(!l._readableState||!l._readableState.ended)&&(S=new a),i.call(l,S);if(b&&!R)return(!l._writableState||!l._writableState.ended)&&(S=new a),i.call(l,S)},y=function(){l.req.on("finish",B)};return c(l)?(l.on("complete",B),l.on("abort",F),l.req?y():l.on("request",y)):b&&!l._writableState&&(l.on("end",D),l.on("close",D)),l.on("end",_),l.on("finish",B),h.error!==!1&&l.on("error",T),l.on("close",F),function(){l.removeListener("complete",B),l.removeListener("abort",F),l.removeListener("request",y),l.req&&l.req.removeListener("finish",B),l.removeListener("end",D),l.removeListener("close",D),l.removeListener("finish",B),l.removeListener("end",_),l.removeListener("error",T),l.removeListener("close",F)}}return et=p,et}var tt,$t;function fi(){if($t)return tt;$t=1;var a;function r(S,m,g){return m=o(m),m in S?Object.defineProperty(S,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):S[m]=g,S}function o(S){var m=c(S,"string");return typeof m=="symbol"?m:String(m)}function c(S,m){if(typeof S!="object"||S===null)return S;var g=S[Symbol.toPrimitive];if(g!==void 0){var C=g.call(S,m);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(S)}var p=vt(),l=Symbol("lastResolve"),h=Symbol("lastReject"),i=Symbol("error"),d=Symbol("ended"),b=Symbol("lastPromise"),D=Symbol("handlePromise"),R=Symbol("stream");function B(S,m){return{value:S,done:m}}function A(S){var m=S[l];if(m!==null){var g=S[R].read();g!==null&&(S[b]=null,S[l]=null,S[h]=null,m(B(g,!1)))}}function _(S){process.nextTick(A,S)}function T(S,m){return function(g,C){S.then(function(){if(m[d]){g(B(void 0,!0));return}m[D](g,C)},C)}}var F=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[R]},next:function(){var m=this,g=this[i];if(g!==null)return Promise.reject(g);if(this[d])return Promise.resolve(B(void 0,!0));if(this[R].destroyed)return new Promise(function(U,q){process.nextTick(function(){m[i]?q(m[i]):U(B(void 0,!0))})});var C=this[b],I;if(C)I=new Promise(T(C,this));else{var P=this[R].read();if(P!==null)return Promise.resolve(B(P,!1));I=new Promise(this[D])}return this[b]=I,I}},r(a,Symbol.asyncIterator,function(){return this}),r(a,"return",function(){var m=this;return new Promise(function(g,C){m[R].destroy(null,function(I){if(I){C(I);return}g(B(void 0,!0))})})}),a),F),v=function(m){var g,C=Object.create(y,(g={},r(g,R,{value:m,writable:!0}),r(g,l,{value:null,writable:!0}),r(g,h,{value:null,writable:!0}),r(g,i,{value:null,writable:!0}),r(g,d,{value:m._readableState.endEmitted,writable:!0}),r(g,D,{value:function(P,U){var q=C[R].read();q?(C[b]=null,C[l]=null,C[h]=null,P(B(q,!1))):(C[l]=P,C[h]=U)},writable:!0}),g));return C[b]=null,p(m,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=C[h];P!==null&&(C[b]=null,C[l]=null,C[h]=null,P(I)),C[i]=I;return}var U=C[l];U!==null&&(C[b]=null,C[l]=null,C[h]=null,U(B(void 0,!0))),C[d]=!0}),m.on("readable",_.bind(null,C)),C};return tt=v,tt}var rt,zt;function ci(){return zt||(zt=1,rt=function(){throw new Error("Readable.from is not available in the browser")}),rt}var nt,Vt;function hr(){if(Vt)return nt;Vt=1,nt=U;var a;U.ReadableState=P,Oe().EventEmitter;var r=function(f,M){return f.listeners(M).length},o=sr(),c=Fe().Buffer,p=(typeof Ee<"u"?Ee:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(s){return c.from(s)}function h(s){return c.isBuffer(s)||s instanceof p}var i=ur,d;i&&i.debuglog?d=i.debuglog("stream"):d=function(){};var b=si(),D=lr(),R=fr(),B=R.getHighWaterMark,A=_e().codes,_=A.ERR_INVALID_ARG_TYPE,T=A.ERR_STREAM_PUSH_AFTER_EOF,F=A.ERR_METHOD_NOT_IMPLEMENTED,y=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,S,m;ve()(U,o);var g=D.errorOrDestroy,C=["error","close","destroy","pause","resume"];function I(s,f,M){if(typeof s.prependListener=="function")return s.prependListener(f,M);!s._events||!s._events[f]?s.on(f,M):Array.isArray(s._events[f])?s._events[f].unshift(M):s._events[f]=[M,s._events[f]]}function P(s,f,M){a=a||xe(),s=s||{},typeof M!="boolean"&&(M=f instanceof a),this.objectMode=!!s.objectMode,M&&(this.objectMode=this.objectMode||!!s.readableObjectMode),this.highWaterMark=B(this,s,"readableHighWaterMark",M),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=s.emitClose!==!1,this.autoDestroy=!!s.autoDestroy,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(v||(v=Wt().StringDecoder),this.decoder=new v(s.encoding),this.encoding=s.encoding)}function U(s){if(a=a||xe(),!(this instanceof U))return new U(s);var f=this instanceof a;this._readableState=new P(s,this,f),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),o.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(f){this._readableState&&(this._readableState.destroyed=f)}}),U.prototype.destroy=D.destroy,U.prototype._undestroy=D.undestroy,U.prototype._destroy=function(s,f){f(s)},U.prototype.push=function(s,f){var M=this._readableState,O;return M.objectMode?O=!0:typeof s=="string"&&(f=f||M.defaultEncoding,f!==M.encoding&&(s=c.from(s,f),f=""),O=!0),q(this,s,f,!1,O)},U.prototype.unshift=function(s){return q(this,s,null,!0,!1)};function q(s,f,M,O,X){d("readableAddChunk",f);var n=s._readableState;if(f===null)n.reading=!1,oe(s,n);else{var e;if(X||(e=ee(n,f)),e)g(s,e);else if(n.objectMode||f&&f.length>0)if(typeof f!="string"&&!n.objectMode&&Object.getPrototypeOf(f)!==c.prototype&&(f=l(f)),O)n.endEmitted?g(s,new y):G(s,n,f,!0);else if(n.ended)g(s,new T);else{if(n.destroyed)return!1;n.reading=!1,n.decoder&&!M?(f=n.decoder.write(f),n.objectMode||f.length!==0?G(s,n,f,!1):ue(s,n)):G(s,n,f,!1)}else O||(n.reading=!1,ue(s,n))}return!n.ended&&(n.length<n.highWaterMark||n.length===0)}function G(s,f,M,O){f.flowing&&f.length===0&&!f.sync?(f.awaitDrain=0,s.emit("data",M)):(f.length+=f.objectMode?1:M.length,O?f.buffer.unshift(M):f.buffer.push(M),f.needReadable&&ae(s)),ue(s,f)}function ee(s,f){var M;return!h(f)&&typeof f!="string"&&f!==void 0&&!s.objectMode&&(M=new _("chunk",["string","Buffer","Uint8Array"],f)),M}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(s){v||(v=Wt().StringDecoder);var f=new v(s);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;for(var M=this._readableState.buffer.head,O="";M!==null;)O+=f.write(M.data),M=M.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var re=1073741824;function ne(s){return s>=re?s=re:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function ie(s,f){return s<=0||f.length===0&&f.ended?0:f.objectMode?1:s!==s?f.flowing&&f.length?f.buffer.head.data.length:f.length:(s>f.highWaterMark&&(f.highWaterMark=ne(s)),s<=f.length?s:f.ended?f.length:(f.needReadable=!0,0))}U.prototype.read=function(s){d("read",s),s=parseInt(s,10);var f=this._readableState,M=s;if(s!==0&&(f.emittedReadable=!1),s===0&&f.needReadable&&((f.highWaterMark!==0?f.length>=f.highWaterMark:f.length>0)||f.ended))return d("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?N(this):ae(this),null;if(s=ie(s,f),s===0&&f.ended)return f.length===0&&N(this),null;var O=f.needReadable;d("need readable",O),(f.length===0||f.length-s<f.highWaterMark)&&(O=!0,d("length less than watermark",O)),f.ended||f.reading?(O=!1,d("reading or ended",O)):O&&(d("do read"),f.reading=!0,f.sync=!0,f.length===0&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1,f.reading||(s=ie(M,f)));var X;return s>0?X=E(s,f):X=null,X===null?(f.needReadable=f.length<=f.highWaterMark,s=0):(f.length-=s,f.awaitDrain=0),f.length===0&&(f.ended||(f.needReadable=!0),M!==s&&f.ended&&N(this)),X!==null&&this.emit("data",X),X};function oe(s,f){if(d("onEofChunk"),!f.ended){if(f.decoder){var M=f.decoder.end();M&&M.length&&(f.buffer.push(M),f.length+=f.objectMode?1:M.length)}f.ended=!0,f.sync?ae(s):(f.needReadable=!1,f.emittedReadable||(f.emittedReadable=!0,he(s)))}}function ae(s){var f=s._readableState;d("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(d("emitReadable",f.flowing),f.emittedReadable=!0,process.nextTick(he,s))}function he(s){var f=s._readableState;d("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&(f.length||f.ended)&&(s.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,x(s)}function ue(s,f){f.readingMore||(f.readingMore=!0,process.nextTick(fe,s,f))}function fe(s,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){var M=f.length;if(d("maybeReadMore read 0"),s.read(0),M===f.length)break}f.readingMore=!1}U.prototype._read=function(s){g(this,new F("_read()"))},U.prototype.pipe=function(s,f){var M=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=s;break;case 1:O.pipes=[O.pipes,s];break;default:O.pipes.push(s);break}O.pipesCount+=1,d("pipe count=%d opts=%j",O.pipesCount,f);var X=(!f||f.end!==!1)&&s!==process.stdout&&s!==process.stderr,n=X?t:J;O.endEmitted?process.nextTick(n):M.once("end",n),s.on("unpipe",e);function e($,se){d("onunpipe"),$===M&&se&&se.hasUnpiped===!1&&(se.hasUnpiped=!0,L())}function t(){d("onend"),s.end()}var u=Y(M);s.on("drain",u);var w=!1;function L(){d("cleanup"),s.removeListener("close",K),s.removeListener("finish",V),s.removeListener("drain",u),s.removeListener("error",W),s.removeListener("unpipe",e),M.removeListener("end",t),M.removeListener("end",J),M.removeListener("data",k),w=!0,O.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&u()}M.on("data",k);function k($){d("ondata");var se=s.write($);d("dest.write",se),se===!1&&((O.pipesCount===1&&O.pipes===s||O.pipesCount>1&&H(O.pipes,s)!==-1)&&!w&&(d("false write response, pause",O.awaitDrain),O.awaitDrain++),M.pause())}function W($){d("onerror",$),J(),s.removeListener("error",W),r(s,"error")===0&&g(s,$)}I(s,"error",W);function K(){s.removeListener("finish",V),J()}s.once("close",K);function V(){d("onfinish"),s.removeListener("close",K),J()}s.once("finish",V);function J(){d("unpipe"),M.unpipe(s)}return s.emit("pipe",M),O.flowing||(d("pipe resume"),M.resume()),s};function Y(s){return function(){var M=s._readableState;d("pipeOnDrain",M.awaitDrain),M.awaitDrain&&M.awaitDrain--,M.awaitDrain===0&&r(s,"data")&&(M.flowing=!0,x(s))}}U.prototype.unpipe=function(s){var f=this._readableState,M={hasUnpiped:!1};if(f.pipesCount===0)return this;if(f.pipesCount===1)return s&&s!==f.pipes?this:(s||(s=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,s&&s.emit("unpipe",this,M),this);if(!s){var O=f.pipes,X=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var n=0;n<X;n++)O[n].emit("unpipe",this,{hasUnpiped:!1});return this}var e=H(f.pipes,s);return e===-1?this:(f.pipes.splice(e,1),f.pipesCount-=1,f.pipesCount===1&&(f.pipes=f.pipes[0]),s.emit("unpipe",this,M),this)},U.prototype.on=function(s,f){var M=o.prototype.on.call(this,s,f),O=this._readableState;return s==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):s==="readable"&&!O.endEmitted&&!O.readableListening&&(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,d("on readable",O.length,O.reading),O.length?ae(this):O.reading||process.nextTick(te,this)),M},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(s,f){var M=o.prototype.removeListener.call(this,s,f);return s==="readable"&&process.nextTick(Z,this),M},U.prototype.removeAllListeners=function(s){var f=o.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&process.nextTick(Z,this),f};function Z(s){var f=s._readableState;f.readableListening=s.listenerCount("readable")>0,f.resumeScheduled&&!f.paused?f.flowing=!0:s.listenerCount("data")>0&&s.resume()}function te(s){d("readable nexttick read 0"),s.read(0)}U.prototype.resume=function(){var s=this._readableState;return s.flowing||(d("resume"),s.flowing=!s.readableListening,we(this,s)),s.paused=!1,this};function we(s,f){f.resumeScheduled||(f.resumeScheduled=!0,process.nextTick(be,s,f))}function be(s,f){d("resume",f.reading),f.reading||s.read(0),f.resumeScheduled=!1,s.emit("resume"),x(s),f.flowing&&!f.reading&&s.read(0)}U.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function x(s){var f=s._readableState;for(d("flow",f.flowing);f.flowing&&s.read()!==null;);}U.prototype.wrap=function(s){var f=this,M=this._readableState,O=!1;s.on("end",function(){if(d("wrapped end"),M.decoder&&!M.ended){var e=M.decoder.end();e&&e.length&&f.push(e)}f.push(null)}),s.on("data",function(e){if(d("wrapped data"),M.decoder&&(e=M.decoder.write(e)),!(M.objectMode&&e==null)&&!(!M.objectMode&&(!e||!e.length))){var t=f.push(e);t||(O=!0,s.pause())}});for(var X in s)this[X]===void 0&&typeof s[X]=="function"&&(this[X]=(function(t){return function(){return s[t].apply(s,arguments)}})(X));for(var n=0;n<C.length;n++)s.on(C[n],this.emit.bind(this,C[n]));return this._read=function(e){d("wrapped _read",e),O&&(O=!1,s.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=fi()),S(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}}),U._fromList=E,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function E(s,f){if(f.length===0)return null;var M;return f.objectMode?M=f.buffer.shift():!s||s>=f.length?(f.decoder?M=f.buffer.join(""):f.buffer.length===1?M=f.buffer.first():M=f.buffer.concat(f.length),f.buffer.clear()):M=f.buffer.consume(s,f.decoder),M}function N(s){var f=s._readableState;d("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,process.nextTick(j,f,s))}function j(s,f){if(d("endReadableNT",s.endEmitted,s.length),!s.endEmitted&&s.length===0&&(s.endEmitted=!0,f.readable=!1,f.emit("end"),s.autoDestroy)){var M=f._writableState;(!M||M.autoDestroy&&M.finished)&&f.destroy()}}typeof Symbol=="function"&&(U.from=function(s,f){return m===void 0&&(m=ci()),m(U,s,f)});function H(s,f){for(var M=0,O=s.length;M<O;M++)if(s[M]===f)return M;return-1}return nt}var it,Gt;function dr(){if(Gt)return it;Gt=1,it=i;var a=_e().codes,r=a.ERR_METHOD_NOT_IMPLEMENTED,o=a.ERR_MULTIPLE_CALLBACK,c=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=a.ERR_TRANSFORM_WITH_LENGTH_0,l=xe();ve()(i,l);function h(D,R){var B=this._transformState;B.transforming=!1;var A=B.writecb;if(A===null)return this.emit("error",new o);B.writechunk=null,B.writecb=null,R!=null&&this.push(R),A(D);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function i(D){if(!(this instanceof i))return new i(D);l.call(this,D),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,D&&(typeof D.transform=="function"&&(this._transform=D.transform),typeof D.flush=="function"&&(this._flush=D.flush)),this.on("prefinish",d)}function d(){var D=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(R,B){b(D,R,B)}):b(this,null,null)}i.prototype.push=function(D,R){return this._transformState.needTransform=!1,l.prototype.push.call(this,D,R)},i.prototype._transform=function(D,R,B){B(new r("_transform()"))},i.prototype._write=function(D,R,B){var A=this._transformState;if(A.writecb=B,A.writechunk=D,A.writeencoding=R,!A.transforming){var _=this._readableState;(A.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},i.prototype._read=function(D){var R=this._transformState;R.writechunk!==null&&!R.transforming?(R.transforming=!0,this._transform(R.writechunk,R.writeencoding,R.afterTransform)):R.needTransform=!0},i.prototype._destroy=function(D,R){l.prototype._destroy.call(this,D,function(B){R(B)})};function b(D,R,B){if(R)return D.emit("error",R);if(B!=null&&D.push(B),D._writableState.length)throw new p;if(D._transformState.transforming)throw new c;return D.push(null)}return it}var at,Yt;function hi(){if(Yt)return at;Yt=1,at=r;var a=dr();ve()(r,a);function r(o){if(!(this instanceof r))return new r(o);a.call(this,o)}return r.prototype._transform=function(o,c,p){p(null,o)},at}var ot,Xt;function di(){if(Xt)return ot;Xt=1;var a;function r(B){var A=!1;return function(){A||(A=!0,B.apply(void 0,arguments))}}var o=_e().codes,c=o.ERR_MISSING_ARGS,p=o.ERR_STREAM_DESTROYED;function l(B){if(B)throw B}function h(B){return B.setHeader&&typeof B.abort=="function"}function i(B,A,_,T){T=r(T);var F=!1;B.on("close",function(){F=!0}),a===void 0&&(a=vt()),a(B,{readable:A,writable:_},function(v){if(v)return T(v);F=!0,T()});var y=!1;return function(v){if(!F&&!y){if(y=!0,h(B))return B.abort();if(typeof B.destroy=="function")return B.destroy();T(v||new p("pipe"))}}}function d(B){B()}function b(B,A){return B.pipe(A)}function D(B){return!B.length||typeof B[B.length-1]!="function"?l:B.pop()}function R(){for(var B=arguments.length,A=new Array(B),_=0;_<B;_++)A[_]=arguments[_];var T=D(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new c("streams");var F,y=A.map(function(v,S){var m=S<A.length-1,g=S>0;return i(v,m,g,function(C){F||(F=C),C&&y.forEach(d),!m&&(y.forEach(d),T(F))})});return A.reduce(b)}return ot=R,ot}var st,Qt;function pi(){if(Qt)return st;Qt=1,st=o;var a=Oe().EventEmitter,r=ve();r(o,a),o.Readable=hr(),o.Writable=cr(),o.Duplex=xe(),o.Transform=dr(),o.PassThrough=hi(),o.finished=vt(),o.pipeline=di(),o.Stream=o;function o(){a.call(this)}return o.prototype.pipe=function(c,p){var l=this;function h(A){c.writable&&c.write(A)===!1&&l.pause&&l.pause()}l.on("data",h);function i(){l.readable&&l.resume&&l.resume()}c.on("drain",i),!c._isStdio&&(!p||p.end!==!1)&&(l.on("end",b),l.on("close",D));var d=!1;function b(){d||(d=!0,c.end())}function D(){d||(d=!0,typeof c.destroy=="function"&&c.destroy())}function R(A){if(B(),a.listenerCount(this,"error")===0)throw A}l.on("error",R),c.on("error",R);function B(){l.removeListener("data",h),c.removeListener("drain",i),l.removeListener("end",b),l.removeListener("close",D),l.removeListener("error",R),c.removeListener("error",R),l.removeListener("end",B),l.removeListener("close",B),c.removeListener("close",B)}return l.on("end",B),l.on("close",B),c.on("close",B),c.emit("pipe",l),c},st}var yi=pi();async function*ut(a,r,o){let c=1;const p={chunks:[],length:0};for await(const l of o(a))for(p.chunks.push(l),p.length+=l.byteLength;p.length>r;){const h=p.chunks.length>1?de.Buffer.concat(p.chunks):p.chunks[0];yield{partNumber:c,data:h.subarray(0,r)},p.chunks=[h.subarray(r)],p.length=p.chunks[0].byteLength,c+=1}yield{partNumber:c,data:p.chunks.length!==1?de.Buffer.concat(p.chunks):p.chunks[0],lastPart:!0}}async function*Zt(a,r){let o=1,c=0,p=r;for(;p<a.byteLength;)yield{partNumber:o,data:a.subarray(c,p)},o+=1,c=p,p=c+r;yield{partNumber:o,data:a.subarray(c),lastPart:!0}}async function*mi(a){for await(const r of a)de.Buffer.isBuffer(r)||r instanceof Uint8Array?yield r:yield de.Buffer.from(r)}async function*Jt(a){const r=a.getReader();try{for(;;){const{done:o,value:c}=await r.read();if(o)return;de.Buffer.isBuffer(c)||c instanceof Uint8Array?yield c:yield de.Buffer.from(c)}}catch(o){throw o}finally{r.releaseLock()}}const gi=(a,r)=>{if(a instanceof Uint8Array)return Zt(a,r);if(a instanceof yi.Readable)return ut(a,r,mi);if(a instanceof String||typeof a=="string")return Zt(de.Buffer.from(a),r);if(typeof a.stream=="function")return ut(a.stream(),r,Jt);if(a instanceof ReadableStream)return ut(a,r,Jt);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")};class Re extends We.EventEmitter{static MIN_PART_SIZE=1024*1024*5;MAX_PARTS=1e4;queueSize=4;partSize;leavePartsOnError=!1;tags=[];client;params;totalBytes;totalBytesSource;bytesUploadedSoFar;abortController;concurrentUploaders=[];createMultiPartPromise;abortMultipartUploadCommand=null;uploadedParts=[];uploadEnqueuedPartsCount=0;expectedPartsCount;uploadId;uploadEvent;isMultiPart=!0;singleUploadResult;sent=!1;constructor(r){if(super(),this.queueSize=r.queueSize||this.queueSize,this.leavePartsOnError=r.leavePartsOnError||this.leavePartsOnError,this.tags=r.tags||this.tags,this.client=r.client,this.params=r.params,!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");this.totalBytes=this.params.ContentLength??Me(this.params.Body),this.totalBytesSource=ii(this.params.Body,this.params.ContentLength),this.bytesUploadedSoFar=0,this.abortController=r.abortController??new ei,this.partSize=r.partSize||Math.max(Re.MIN_PART_SIZE,Math.floor((this.totalBytes||0)/this.MAX_PARTS)),this.totalBytes!==void 0&&(this.expectedPartsCount=Math.ceil(this.totalBytes/this.partSize)),this.__validateInput()}async abort(){this.abortController.abort()}async done(){if(this.sent)throw new Error("@aws-sdk/lib-storage: this instance of Upload has already executed .done(). Create a new instance.");return this.sent=!0,await Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])}on(r,o){return this.uploadEvent=r,super.on(r,o)}async __uploadUsingPut(r){this.isMultiPart=!1;const o={...this.params,Body:r.data},c=this.client.config,p=c.requestHandler,l=p instanceof We.EventEmitter?p:null,h=_=>{this.bytesUploadedSoFar=_.loaded,this.totalBytes=_.total,this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:r.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})};l!==null&&l.on("xhr.upload.progress",h);const i=await Promise.all([this.client.send(new Rt(o)),c?.endpoint?.()]),d=i[0];let b=i[1];if(b||(b=Or(await qr(o,Rt,{...c}))),!b)throw new Error('Could not resolve endpoint from S3 "client.config.endpoint()" nor EndpointsV2.');l!==null&&l.off("xhr.upload.progress",h);const D=this.params.Key.split("/").map(_=>St(_)).join("/"),R=St(this.params.Bucket),B=(()=>{const _=b.hostname.startsWith(`${R}.`),T=this.client.config.forcePathStyle,F=b.port?`:${b.port}`:"";return T?`${b.protocol}//${b.hostname}${F}/${R}/${D}`:_?`${b.protocol}//${b.hostname}${F}/${D}`:`${b.protocol}//${R}.${b.hostname}${F}/${D}`})();this.singleUploadResult={...d,Bucket:this.params.Bucket,Key:this.params.Key,Location:B};const A=Me(r.data);this.__notifyProgress({loaded:A,total:A,part:1,Key:this.params.Key,Bucket:this.params.Bucket})}async __createMultipartUpload(){const r=await this.client.config.requestChecksumCalculation();if(!this.createMultiPartPromise){const o={...this.params,Body:void 0};r==="WHEN_SUPPORTED"&&(o.ChecksumAlgorithm=this.params.ChecksumAlgorithm||Zn.CRC32),this.createMultiPartPromise=this.client.send(new Vn(o)).then(c=>(this.abortMultipartUploadCommand=new Hn({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:c.UploadId}),c))}return this.createMultiPartPromise}async __doConcurrentUpload(r){for await(const o of r){if(this.uploadEnqueuedPartsCount>this.MAX_PARTS)throw new Error(`Exceeded ${this.MAX_PARTS} parts in multipart upload to Bucket: ${this.params.Bucket} Key: ${this.params.Key}.`);if(this.abortController.signal.aborted)return;if(o.partNumber===1&&o.lastPart)return await this.__uploadUsingPut(o);if(!this.uploadId){const{UploadId:b}=await this.__createMultipartUpload();if(this.uploadId=b,this.abortController.signal.aborted)return}const c=Me(o.data)||0,p=this.client.config.requestHandler,l=p instanceof We.EventEmitter?p:null;let h=0;const i=(b,D)=>{(Number(D.query.partNumber)||-1)===o.partNumber&&(b.total&&c&&(this.bytesUploadedSoFar+=b.loaded-h,h=b.loaded),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:o.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}))};l!==null&&l.on("xhr.upload.progress",i),this.uploadEnqueuedPartsCount+=1,this.__validateUploadPart(o);const d=await this.client.send(new Qn({...this.params,ContentLength:void 0,UploadId:this.uploadId,Body:o.data,PartNumber:o.partNumber}));if(l!==null&&l.off("xhr.upload.progress",i),this.abortController.signal.aborted)return;if(!d.ETag)throw new Error(`Part ${o.partNumber} is missing ETag in UploadPart response. Missing Bucket CORS configuration for ETag header?`);this.uploadedParts.push({PartNumber:o.partNumber,ETag:d.ETag,...d.ChecksumCRC32&&{ChecksumCRC32:d.ChecksumCRC32},...d.ChecksumCRC32C&&{ChecksumCRC32C:d.ChecksumCRC32C},...d.ChecksumSHA1&&{ChecksumSHA1:d.ChecksumSHA1},...d.ChecksumSHA256&&{ChecksumSHA256:d.ChecksumSHA256}}),l===null&&(this.bytesUploadedSoFar+=c),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:o.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})}}async __doMultipartUpload(){const r=gi(this.params.Body,this.partSize),o=[];for(let p=0;p<this.queueSize;p++){const l=this.__doConcurrentUpload(r).catch(h=>{o.push(h)});this.concurrentUploaders.push(l)}if(await Promise.all(this.concurrentUploaders),o.length>=1)throw await this.markUploadAsAborted(),o[0];if(this.abortController.signal.aborted)throw await this.markUploadAsAborted(),Object.assign(new Error("Upload aborted."),{name:"AbortError"});let c;if(this.isMultiPart){const{expectedPartsCount:p,uploadedParts:l,totalBytes:h,totalBytesSource:i}=this;if(h!==void 0&&p!==void 0&&l.length!==p)throw new Error(`Expected ${p} part(s) but uploaded ${l.length} part(s).
The expected part count is based on the byte-count of the input.params.Body,
which was read from ${i} and is ${h}.
If this is not correct, provide an override value by setting a number
to input.params.ContentLength in bytes.
`);this.uploadedParts.sort((b,D)=>b.PartNumber-D.PartNumber);const d={...this.params,Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}};c=await this.client.send(new zn(d)),typeof c?.Location=="string"&&c.Location.includes("%2F")&&(c.Location=c.Location.replace(/%2F/g,"/"))}else c=this.singleUploadResult;return this.abortMultipartUploadCommand=null,this.tags.length&&await this.client.send(new Xn({...this.params,Tagging:{TagSet:this.tags}})),c}async markUploadAsAborted(){this.uploadId&&!this.leavePartsOnError&&this.abortMultipartUploadCommand!==null&&(await this.client.send(this.abortMultipartUploadCommand),this.abortMultipartUploadCommand=null)}__notifyProgress(r){this.uploadEvent&&this.emit(this.uploadEvent,r)}async __abortTimeout(r){return new Promise((o,c)=>{r.onabort=()=>{const p=new Error("Upload aborted.");p.name="AbortError",c(p)}})}__validateUploadPart(r){const o=Me(r.data);if(o===void 0)throw new Error(`A dataPart was generated without a measurable data chunk size for part number ${r.partNumber}`);if(!(r.partNumber===1&&r.lastPart)&&!r.lastPart&&o!==this.partSize)throw new Error(`The byte size for part number ${r.partNumber}, size ${o} does not match expected size ${this.partSize}`)}__validateInput(){if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<Re.MIN_PART_SIZE)throw new Error(`EntityTooSmall: Your proposed upload part size [${this.partSize}] is smaller than the minimum allowed size [${Re.MIN_PART_SIZE}] (5MB)`);if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")}}function wi(){const a=Ie.c(2),r=er();let o;return a[0]!==r?(o={mutationFn:bi,onSuccess:(c,p)=>{r.invalidateQueries({queryKey:["s3","buckets",p.bucket,"objects"]})}},a[0]=r,a[1]=o):o=a[1],rr(o)}async function bi(a){const{bucket:r,key:o,file:c}=a;return await new Re({client:Et(),params:{Bucket:r,Key:o,Body:c,ContentType:c.type}}).done()}function Ei(){const a=Ie.c(2),r=er();let o;return a[0]!==r?(o={mutationFn:xi,onSuccess:(c,p)=>{r.invalidateQueries({queryKey:["s3","buckets",p.bucket,"objects"]})}},a[0]=r,a[1]=o):o=a[1],rr(o)}async function xi(a){const{bucket:r,key:o}=a,c=new Gn({Bucket:r,Key:o});return await Et().send(c)}function Bi(a){const r=Ie.c(46),{object:o,bucketName:c,displayName:p,fullKey:l}=a,[h,i]=tr.useState(!1),d=Ei();let b;r[0]!==c||r[1]!==p||r[2]!==l?(b=async function(){try{const ue=new Yn({Bucket:c,Key:l}),fe=await Et().send(ue);if(fe.Body){const Y=await fe.Body.transformToByteArray(),Z=URL.createObjectURL(new Blob([Y])),te=document.createElement("a");te.href=Z,te.download=p,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(Z)}}catch{throw new Error("Failed to download object")}},r[0]=c,r[1]=p,r[2]=l,r[3]=b):b=r[3];const D=b;let R;r[4]!==c||r[5]!==d||r[6]!==l?(R=async function(){await d.mutateAsync({bucket:c,key:l}),i(!1)},r[4]=c,r[5]=d,r[6]=l,r[7]=R):R=r[7];const B=R,A=o.Key;let _;r[8]===Symbol.for("react.memo_cache_sentinel")?(_=z.jsx(en,{className:"size-5 text-muted-foreground"}),r[8]=_):_=r[8];let T;r[9]!==p?(T=z.jsx("h3",{className:"font-medium",children:p}),r[9]=p,r[10]=T):T=r[10];let F;r[11]!==o.LastModified?(F=o.LastModified&&z.jsxs("p",{className:"text-muted-foreground text-sm",children:["Last Modified: ",o.LastModified.toLocaleString()]}),r[11]=o.LastModified,r[12]=F):F=r[12];let y;r[13]!==T||r[14]!==F?(y=z.jsxs("div",{className:"flex items-center gap-3",children:[_,z.jsxs("div",{children:[T,F]})]}),r[13]=T,r[14]=F,r[15]=y):y=r[15];const v=o.Size||0;let S;r[16]!==v?(S=jr(v),r[16]=v,r[17]=S):S=r[17];let m;r[18]!==S?(m=z.jsx("div",{className:"text-muted-foreground text-sm",children:S}),r[18]=S,r[19]=m):m=r[19];let g;r[20]===Symbol.for("react.memo_cache_sentinel")?(g=z.jsx(Qr,{className:"size-4"}),r[20]=g):g=r[20];let C;r[21]!==D?(C=z.jsx("button",{className:"rounded-md p-2 transition-colors hover:bg-accent",onClick:D,type:"button",children:g}),r[21]=D,r[22]=C):C=r[22];let I;r[23]===Symbol.for("react.memo_cache_sentinel")?(I=()=>i(!0),r[23]=I):I=r[23];let P;r[24]===Symbol.for("react.memo_cache_sentinel")?(P=z.jsx("button",{className:"rounded-md p-2 text-destructive transition-colors hover:bg-accent",onClick:I,type:"button",children:z.jsx(Zr,{className:"size-4"})}),r[24]=P):P=r[24];let U;r[25]!==m||r[26]!==C?(U=z.jsxs("div",{className:"flex items-center gap-3",children:[m,C,P]}),r[25]=m,r[26]=C,r[27]=U):U=r[27];let q;r[28]===Symbol.for("react.memo_cache_sentinel")?(q=z.jsx(Wr,{children:"Delete Object"}),r[28]=q):q=r[28];let G;r[29]!==p?(G=z.jsxs(Kr,{children:[q,z.jsxs($r,{children:["Are you sure you want to delete ",z.jsx("strong",{children:p}),"? This action cannot be undone."]})]}),r[29]=p,r[30]=G):G=r[30];let ee;r[31]===Symbol.for("react.memo_cache_sentinel")?(ee=z.jsx(zr,{children:"Cancel"}),r[31]=ee):ee=r[31];const re=d.isPending?"Deleting":"Delete";let ne;r[32]!==B||r[33]!==re?(ne=z.jsxs(Vr,{children:[ee,z.jsx(Gr,{className:"bg-destructive hover:bg-destructive/90",onClick:B,children:re})]}),r[32]=B,r[33]=re,r[34]=ne):ne=r[34];let ie;r[35]!==G||r[36]!==ne?(ie=z.jsxs(Yr,{children:[G,ne]}),r[35]=G,r[36]=ne,r[37]=ie):ie=r[37];let oe;r[38]!==h||r[39]!==ie?(oe=z.jsx(Xr,{onOpenChange:i,open:h,children:ie}),r[38]=h,r[39]=ie,r[40]=oe):oe=r[40];let ae;return r[41]!==o.Key||r[42]!==U||r[43]!==oe||r[44]!==y?(ae=z.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-card p-4",children:[y,U,oe]},A),r[41]=o.Key,r[42]=U,r[43]=oe,r[44]=y,r[45]=ae):ae=r[45],ae}function Fi({bucket:a,prefix:r=""}){const o=tr.useRef(null),c=wi();async function p(l){const h=l.target.files;if(!(!h||h.length===0))try{await Promise.all(Array.from(h).map(i=>{const d=`${r}${i.name}`;return c.mutateAsync({bucket:a,key:d,file:i})}))}finally{o.current&&(o.current.value="")}}return z.jsxs(z.Fragment,{children:[z.jsx("input",{accept:"*/*",className:"hidden",multiple:!0,onChange:p,ref:o,type:"file"}),z.jsxs(Hr,{disabled:c.isPending,onClick:()=>o.current?.click(),size:"sm",children:[z.jsx(an,{className:"mr-2 size-4"}),c.isPending?"Uploading":"Upload Files"]})]})}export{Ri as F,Bi as O,Fi as U};
