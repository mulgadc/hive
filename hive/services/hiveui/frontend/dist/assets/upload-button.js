import{g as ee,aR as be,aS as ge,aT as d,aU as $,aV as P,aW as Fe,aX as Se,aY as ke,aZ as we,a_ as Re,a$ as _e,b0 as Me,b1 as Ne,b2 as Le,b3 as He,b4 as te,b5 as y,b6 as I,b7 as je,b8 as Oe,b9 as ve,ba as se,bb as ne,bc as re,bd as ue,be as Te,bf as Pe,bg as Ue,c as U,j as u,aL as qe,bh as de,bi as ae,r as xe,bj as Ie,B as ze}from"./index.js";import{a as Ke,b as $e,c as We,e as Ve,d as Ge,h as Qe,f as Xe,g as Ye}from"./alert-dialog.js";import{D as Ze}from"./download.js";import{T as Je}from"./trash-2.js";import{u as me}from"./useMutation.js";const et=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],tt=ee("file",et);const st=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nt=ee("folder",st);const rt=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],at=ee("upload",rt),ct=typeof ReadableStream=="function"?ReadableStream:function(){};class ot extends ct{}const it=({expectedChecksum:t,checksum:e,source:s,checksumSourceLocation:n,base64Encoder:r})=>{if(!be(s))throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);const a=r??ge;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const c=new TransformStream({start(){},async transform(i,l){e.update(i),l.enqueue(i)},async flush(i){const l=await e.digest(),m=a(l);if(t!==m){const C=new Error(`Checksum mismatch: expected "${t}" but received "${m}" in response header "${n}".`);i.error(C)}else i.terminate()}});s.pipeThrough(c);const o=c.readable;return Object.setPrototypeOf(o,ot.prototype),o};class lt{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const n=this.byteArrays[0];return this.reset(),n}const e=this.allocByteArray(this.byteLength);let s=0;for(let n=0;n<this.byteArrays.length;++n){const r=this.byteArrays[n];e.set(r,s),s+=r.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function ut(t,e,s){const n=t.getReader();let r=!1,a=0;const c=["",new lt(l=>new Uint8Array(l))];let o=-1;const i=async l=>{const{value:m,done:C}=await n.read(),x=m;if(C){if(o!==-1){const f=z(c,o);L(f)>0&&l.enqueue(f)}l.close()}else{const f=mt(x,!1);if(o!==f&&(o>=0&&l.enqueue(z(c,o)),o=f),o===-1){l.enqueue(x);return}const E=L(x);a+=E;const A=L(c[o]);if(E>=e&&A===0)l.enqueue(x);else{const p=xt(c,o,x);!r&&a>e*2&&(r=!0,s?.warn(`@smithy/util-stream - stream chunk size ${E} is below threshold of ${e}, automatically buffering.`)),p>=e?l.enqueue(z(c,o)):await i(l)}}};return new ReadableStream({pull:i})}const dt=ut;function xt(t,e,s){switch(e){case 0:return t[0]+=s,L(t[0]);case 1:case 2:return t[e].push(s),L(t[e])}}function z(t,e){switch(e){case 0:const s=t[0];return t[0]="",s;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function L(t){return t?.byteLength??t?.length??0}function mt(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const W=[d.CRC32,d.CRC32C,d.CRC64NVME,d.SHA1,d.SHA256],Ct=[d.SHA256,d.SHA1,d.CRC32,d.CRC32C,d.CRC64NVME],ht=(t,{requestChecksumRequired:e,requestAlgorithmMember:s,requestChecksumCalculation:n})=>{if(!s)return n===P.WHEN_SUPPORTED||e?$:void 0;if(!t[s])return;const r=t[s];if(!W.includes(r))throw new Error(`The checksum algorithm "${r}" is not supported by the client. Select one of ${W}.`);return r},ce=t=>t===d.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,ft=(t,e)=>{const s=t.toLowerCase();for(const n of Object.keys(e))if(s===n.toLowerCase())return!0;return!1},Et=(t,e)=>{const s=t.toLowerCase();for(const n of Object.keys(e))if(n.toLowerCase().startsWith(s))return!0;return!1},Ce=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!Fe(t);var At=(function(){function t(){this.crc32c=new le}return t.prototype.update=function(e){Se(e)||this.crc32c.update(ke(e))},t.prototype.digest=function(){return we(this,void 0,void 0,function(){return Re(this,function(e){return[2,_e(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new le},t})(),le=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var s,n;try{for(var r=Me(e),a=r.next();!a.done;a=r.next()){var c=a.value;this.checksum=this.checksum>>>8^Dt[(this.checksum^c)&255]}}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),pt=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Dt=Ne(pt);const Bt=()=>{const e=new Array(8);for(let s=0;s<8;s++){const n=new Array(512);for(let r=0;r<256;r++){let a=BigInt(r);for(let c=0;c<8*(s+1);c++)a&1n?a=a>>1n^0x9a6c9329ac4bc9b5n:a=a>>1n;n[r*2]=Number(a>>32n&0xffffffffn),n[r*2+1]=Number(a&0xffffffffn)}e[s]=new Uint32Array(n)}return e};let K,N,V,G,Q,X,Y,Z,J;const yt=()=>{K||(K=Bt(),[N,V,G,Q,X,Y,Z,J]=K)};class bt{c1=0;c2=0;constructor(){yt(),this.reset()}update(e){const s=e.length;let n=0,r=this.c1,a=this.c2;for(;n+8<=s;){const c=((a^e[n++])&255)<<1,o=((a>>>8^e[n++])&255)<<1,i=((a>>>16^e[n++])&255)<<1,l=((a>>>24^e[n++])&255)<<1,m=((r^e[n++])&255)<<1,C=((r>>>8^e[n++])&255)<<1,x=((r>>>16^e[n++])&255)<<1,f=((r>>>24^e[n++])&255)<<1;r=J[c]^Z[o]^Y[i]^X[l]^Q[m]^G[C]^V[x]^N[f],a=J[c+1]^Z[o+1]^Y[i+1]^X[l+1]^Q[m+1]^G[C+1]^V[x+1]^N[f+1]}for(;n<s;){const c=((a^e[n])&255)<<1;a=(a>>>8|(r&255)<<24)>>>0,r=r>>>8^N[c],a^=N[c+1],n++}this.c1=r,this.c2=a}async digest(){const e=this.c1^4294967295,s=this.c2^4294967295;return new Uint8Array([e>>>24,e>>>16&255,e>>>8&255,e&255,s>>>24,s>>>16&255,s>>>8&255,s&255])}reset(){this.c1=4294967295,this.c2=4294967295}}const gt=()=>Le,he=(t,e)=>{switch(t){case d.MD5:return e.md5;case d.CRC32:return gt();case d.CRC32C:return At;case d.CRC64NVME:return bt;case d.SHA1:return e.sha1;case d.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},fe=(t,e)=>{const s=new t;return s.update(He(e||"")),s.digest()},Ft={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},St=(t,e)=>(s,n)=>async r=>{if(!te.isInstance(r.request)||Et("x-amz-checksum-",r.request.headers))return s(r);const{request:a,input:c}=r,{body:o,headers:i}=a,{base64Encoder:l,streamHasher:m}=t,{requestChecksumRequired:C,requestAlgorithmMember:x}=e,f=await t.requestChecksumCalculation(),E=x?.name,A=x?.httpHeader;E&&!c[E]&&(f===P.WHEN_SUPPORTED||C)&&(c[E]=$,A&&(i[A]=$));const p=ht(c,{requestChecksumRequired:C,requestAlgorithmMember:x?.name,requestChecksumCalculation:f});let B=o,b=i;if(p){switch(p){case d.CRC32:y(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case d.CRC32C:y(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case d.CRC64NVME:y(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case d.SHA1:y(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case d.SHA256:y(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const h=ce(p),D=he(p,t);if(Ce(o)){const{getAwsChunkedEncodingStream:g,bodyLengthChecker:F}=t;B=g(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?dt(o,t.requestStreamBufferSize,n.logger):o,{base64Encoder:l,bodyLengthChecker:F,checksumLocationName:h,checksumAlgorithmFn:D,streamHasher:m}),b={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":h},delete b["content-length"]}else if(!ft(h,i)){const g=await fe(D,o);b={...i,[h]:l(g)}}}try{return await s({...r,request:{...a,headers:b,body:B}})}catch(h){if(h instanceof Error&&h.name==="InvalidChunkSizeError")try{h.message.endsWith(".")||(h.message+="."),h.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch{}throw h}},kt={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},wt=(t,e)=>(s,n)=>async r=>{const a=r.input,{requestValidationModeMember:c}=e,o=await t.requestChecksumCalculation(),i=await t.responseChecksumValidation();switch(o){case P.WHEN_REQUIRED:y(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case P.WHEN_SUPPORTED:y(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(i){case I.WHEN_REQUIRED:y(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case I.WHEN_SUPPORTED:y(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return c&&!a[c]&&i===I.WHEN_SUPPORTED&&(a[c]="ENABLED"),s(r)},Ee=(t=[])=>{const e=[];for(const s of Ct)!t.includes(s)||!W.includes(s)||e.push(s);return e},Rt=t=>{const e=t.lastIndexOf("-");if(e!==-1){const s=t.slice(e+1);if(!s.startsWith("0")){const n=parseInt(s,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},_t=async(t,{checksumAlgorithmFn:e,base64Encoder:s})=>s(await fe(e,t)),Mt=async(t,{config:e,responseAlgorithms:s,logger:n})=>{const r=Ee(s),{body:a,headers:c}=t;for(const o of r){const i=ce(o),l=c[i];if(l){let m;try{m=he(o,e)}catch(f){if(o===d.CRC64NVME){n?.warn(`Skipping ${d.CRC64NVME} checksum validation: ${f.message}`);continue}throw f}const{base64Encoder:C}=e;if(Ce(a)){t.body=it({expectedChecksum:l,checksumSourceLocation:i,checksum:new m,source:a,base64Encoder:C});return}const x=await _t(a,{checksumAlgorithmFn:m,base64Encoder:C});if(x===l)break;throw new Error(`Checksum mismatch: expected "${x}" but received "${l}" in response header "${i}".`)}}},Nt={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Lt=(t,e)=>(s,n)=>async r=>{if(!te.isInstance(r.request))return s(r);const a=r.input,c=await s(r),o=c.response,{requestValidationModeMember:i,responseAlgorithms:l}=e;if(i&&a[i]==="ENABLED"){const{clientName:m,commandName:C}=n;if(m==="S3Client"&&C==="GetObjectCommand"&&Ee(l).every(f=>{const E=ce(f),A=o.headers[E];return!A||Rt(A)}))return c;await Mt(o,{config:t,responseAlgorithms:l,logger:n.logger})}return c},Ae=(t,e)=>({applyToStack:s=>{s.add(St(t,e),Ft),s.addRelativeTo(wt(t,e),kt),s.addRelativeTo(Lt(t,e),Nt)}}),Ht="content-length",jt="x-amz-decoded-content-length";function Ot(){return(t,e)=>async s=>{const{request:n}=s;if(te.isInstance(n)&&!(Ht in n.headers)&&!(jt in n.headers)){const r="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof je)?e.logger.warn(r):console.warn(r)}return t({...s})}}const vt={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Tt=t=>({applyToStack:e=>{e.add(Ot(),vt)}}),Pt=t=>(e,s)=>async n=>{const r=await e(n),{response:a}=r;if(Oe.isInstance(a)&&a.headers.expires){a.headers.expiresstring=a.headers.expires;try{ve(a.headers.expires)}catch(c){s.logger?.warn(`AWS SDK Warning for ${s.clientName}::${s.commandName} response parsing (${a.headers.expires}): ${c}`),delete a.headers.expires}}return r},Ut={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},qt=t=>({applyToStack:e=>{e.addRelativeTo(Pt(),Ut)}});function It(t){return e=>async s=>{const n={...s.input},r=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const a of r){const c=n[a.target];if(c){let o;typeof c=="string"?Kt(c,t)?o=t.base64Decoder(c):(o=t.utf8Decoder(c),n[a.target]=t.base64Encoder(o)):(o=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c),n[a.target]=t.base64Encoder(o));const i=new t.md5;i.update(o),n[a.hash]=t.base64Encoder(await i.digest())}}return e({...s,input:n})}}const zt={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},pe=t=>({applyToStack:e=>{e.add(It(t),zt)}});function Kt(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class $t extends se.classBuilder().ep({...ne,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,s,n,r){return[re(n,e.getEndpointParameterInstructions()),ue(n)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").sc(Te).build(){}class Wt extends se.classBuilder().ep({...ne,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,s,n,r){return[re(n,e.getEndpointParameterInstructions()),Ae(n,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),pe(n),qt()]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").sc(Pe).build(){}class Vt extends se.classBuilder().ep({...ne,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,s,n,r){return[re(n,e.getEndpointParameterInstructions()),Ae(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Tt(),ue(n),pe(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(Ue).build(){}function ns(t){const e=U.c(9),{folderName:s,fullPrefix:n,bucketName:r}=t;let a;e[0]!==r||e[1]!==n?(a={bucket:r,_splat:n},e[0]=r,e[1]=n,e[2]=a):a=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(nt,{className:"size-5 text-muted-foreground"}),e[3]=c):c=e[3];let o;e[4]!==s?(o=u.jsx("span",{className:"font-medium",children:s}),e[4]=s,e[5]=o):o=e[5];let i;return e[6]!==a||e[7]!==o?(i=u.jsxs(qe,{className:"flex items-center gap-3 rounded-lg border bg-card p-4 transition-colors hover:bg-accent",params:a,to:"/s3/ls/$bucket/$",children:[c,o]}),e[6]=a,e[7]=o,e[8]=i):i=e[8],i}function Gt(){const t=U.c(2),e=de();let s;return t[0]!==e?(s={mutationFn:Qt,onSuccess:(n,r)=>{e.invalidateQueries({queryKey:["s3","buckets",r.bucket,"objects"]})}},t[0]=e,t[1]=s):s=t[1],me(s)}async function Qt(t){const{bucket:e,key:s,file:n}=t,r=await n.arrayBuffer(),a=new Uint8Array(r),c=new Vt({Bucket:e,Key:s,Body:a,ContentType:n.type});return await ae().send(c)}function Xt(){const t=U.c(2),e=de();let s;return t[0]!==e?(s={mutationFn:Yt,onSuccess:(n,r)=>{e.invalidateQueries({queryKey:["s3","buckets",r.bucket,"objects"]})}},t[0]=e,t[1]=s):s=t[1],me(s)}async function Yt(t){const{bucket:e,key:s}=t,n=new $t({Bucket:e,Key:s});return await ae().send(n)}function rs(t){const e=U.c(46),{object:s,bucketName:n,displayName:r,fullKey:a}=t,[c,o]=xe.useState(!1),i=Xt();let l;e[0]!==n||e[1]!==r||e[2]!==a?(l=async function(){try{const Be=new Wt({Bucket:n,Key:a}),oe=await ae().send(Be);if(oe.Body){const ye=await oe.Body.transformToByteArray(),ie=URL.createObjectURL(new Blob([ye])),M=document.createElement("a");M.href=ie,M.download=r,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(ie)}}catch{throw new Error("Failed to download object")}},e[0]=n,e[1]=r,e[2]=a,e[3]=l):l=e[3];const m=l;let C;e[4]!==n||e[5]!==i||e[6]!==a?(C=async function(){await i.mutateAsync({bucket:n,key:a}),o(!1)},e[4]=n,e[5]=i,e[6]=a,e[7]=C):C=e[7];const x=C,f=s.Key;let E;e[8]===Symbol.for("react.memo_cache_sentinel")?(E=u.jsx(tt,{className:"size-5 text-muted-foreground"}),e[8]=E):E=e[8];let A;e[9]!==r?(A=u.jsx("h3",{className:"font-medium",children:r}),e[9]=r,e[10]=A):A=e[10];let p;e[11]!==s.LastModified?(p=s.LastModified&&u.jsxs("p",{className:"text-muted-foreground text-sm",children:["Last Modified: ",s.LastModified.toLocaleString()]}),e[11]=s.LastModified,e[12]=p):p=e[12];let B;e[13]!==A||e[14]!==p?(B=u.jsxs("div",{className:"flex items-center gap-3",children:[E,u.jsxs("div",{children:[A,p]})]}),e[13]=A,e[14]=p,e[15]=B):B=e[15];const b=s.Size||0;let h;e[16]!==b?(h=Ie(b),e[16]=b,e[17]=h):h=e[17];let D;e[18]!==h?(D=u.jsx("div",{className:"text-muted-foreground text-sm",children:h}),e[18]=h,e[19]=D):D=e[19];let g;e[20]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx(Ze,{className:"size-4"}),e[20]=g):g=e[20];let F;e[21]!==m?(F=u.jsx("button",{className:"rounded-md p-2 transition-colors hover:bg-accent",onClick:m,type:"button",children:g}),e[21]=m,e[22]=F):F=e[22];let H;e[23]===Symbol.for("react.memo_cache_sentinel")?(H=()=>o(!0),e[23]=H):H=e[23];let j;e[24]===Symbol.for("react.memo_cache_sentinel")?(j=u.jsx("button",{className:"rounded-md p-2 text-destructive transition-colors hover:bg-accent",onClick:H,type:"button",children:u.jsx(Je,{className:"size-4"})}),e[24]=j):j=e[24];let S;e[25]!==D||e[26]!==F?(S=u.jsxs("div",{className:"flex items-center gap-3",children:[D,F,j]}),e[25]=D,e[26]=F,e[27]=S):S=e[27];let O;e[28]===Symbol.for("react.memo_cache_sentinel")?(O=u.jsx(Ke,{children:"Delete Object"}),e[28]=O):O=e[28];let k;e[29]!==r?(k=u.jsxs($e,{children:[O,u.jsxs(We,{children:["Are you sure you want to delete ",u.jsx("strong",{children:r}),"? This action cannot be undone."]})]}),e[29]=r,e[30]=k):k=e[30];let v;e[31]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx(Ve,{children:"Cancel"}),e[31]=v):v=e[31];const q=i.isPending?"Deleting…":"Delete";let w;e[32]!==x||e[33]!==q?(w=u.jsxs(Ge,{children:[v,u.jsx(Qe,{className:"bg-destructive hover:bg-destructive/90",onClick:x,children:q})]}),e[32]=x,e[33]=q,e[34]=w):w=e[34];let R;e[35]!==k||e[36]!==w?(R=u.jsxs(Xe,{children:[k,w]}),e[35]=k,e[36]=w,e[37]=R):R=e[37];let _;e[38]!==c||e[39]!==R?(_=u.jsx(Ye,{onOpenChange:o,open:c,children:R}),e[38]=c,e[39]=R,e[40]=_):_=e[40];let T;return e[41]!==s.Key||e[42]!==S||e[43]!==_||e[44]!==B?(T=u.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-card p-4",children:[B,S,_]},f),e[41]=s.Key,e[42]=S,e[43]=_,e[44]=B,e[45]=T):T=e[45],T}function as({bucket:t,prefix:e=""}){const s=xe.useRef(null),n=Gt();async function r(a){const c=a.target.files;if(!(!c||c.length===0))try{await Promise.all(Array.from(c).map(o=>{const i=`${e}${o.name}`;return n.mutateAsync({bucket:t,key:i,file:o})}))}finally{s.current&&(s.current.value="")}}return u.jsxs(u.Fragment,{children:[u.jsx("input",{accept:"*/*",className:"hidden",multiple:!0,onChange:r,ref:s,type:"file"}),u.jsxs(ze,{disabled:n.isPending,onClick:()=>s.current?.click(),size:"sm",children:[u.jsx(at,{className:"mr-2 size-4"}),n.isPending?"Uploading…":"Upload Files"]})]})}export{ns as F,rs as O,as as U};
