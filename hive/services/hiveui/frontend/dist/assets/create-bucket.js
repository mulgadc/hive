import{o as M,f as $,c as I,u as R,j as t,B as E}from"./index.js";import{a as A,u as H,I as L,F as O,b as T,c as q}from"./field.js";import{B as D}from"./back-link.js";import{E as G}from"./error-banner.js";import{P as J}from"./page-heading.js";import{u as K}from"./s3.js";const Q=M({bucketName:$().min(3,"Bucket name must be at least 3 characters").max(63,"Bucket name must be at most 63 characters").regex(/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/,"Must start and end with a lowercase letter or number").regex(/^[a-z0-9.-]+$/,"Only lowercase letters, numbers, hyphens, and periods allowed").refine(e=>!e.includes(".."),"Must not contain consecutive periods").refine(e=>!(e.includes(".-")||e.includes("-.")),"Must not contain adjacent period and hyphen")});function ee(){const e=I.c(40),a=R(),s=K();let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x={resolver:A(Q)},e[0]=x):x=e[0];const{handleSubmit:y,register:N,formState:P}=H(x),{errors:h,isSubmitting:S}=P;let k;e[1]!==s||e[2]!==a?(k=async z=>{await s.mutateAsync(z),a({to:"/s3/ls"})},e[1]=s,e[2]=a,e[3]=k):k=e[3];const F=k;let p,j;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(D,{to:"/s3/ls",children:"Back to buckets"}),j=t.jsx(J,{title:"Create Bucket"}),e[4]=p,e[5]=j):(p=e[4],j=e[5]);let r;e[6]!==s.error?(r=s.error&&t.jsx(G,{error:s.error,msg:"Failed to create bucket"}),e[6]=s.error,e[7]=r):r=e[7];let i;e[8]!==y||e[9]!==F?(i=y(F),e[8]=y,e[9]=F,e[10]=i):i=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(T,{children:t.jsx("label",{htmlFor:"bucketName",children:"Bucket Name"})}),e[11]=g):g=e[11];const v=!!h.bucketName;let l;e[12]!==N?(l=N("bucketName"),e[12]=N,e[13]=l):l=e[13];let n;e[14]!==v||e[15]!==l?(n=t.jsx(L,{"aria-invalid":v,id:"bucketName",placeholder:"my-bucket",type:"text",...l}),e[14]=v,e[15]=l,e[16]=n):n=e[16];let c;e[17]!==h.bucketName?(c=t.jsx(O,{errors:[h.bucketName]}),e[17]=h.bucketName,e[18]=c):c=e[18];let o;e[19]!==n||e[20]!==c?(o=t.jsxs(q,{children:[g,n,c]}),e[19]=n,e[20]=c,e[21]=o):o=e[21];const C=S||s.isPending;let m;e[22]!==a?(m=()=>a({to:"/s3/ls"}),e[22]=a,e[23]=m):m=e[23];let u;e[24]!==C||e[25]!==m?(u=t.jsx(E,{disabled:C,onClick:m,type:"button",variant:"outline",children:"Cancel"}),e[24]=C,e[25]=m,e[26]=u):u=e[26];const w=S||s.isPending,_=S||s.isPending?"Creatingâ€¦":"Create Bucket";let d;e[27]!==w||e[28]!==_?(d=t.jsx(E,{disabled:w,type:"submit",children:_}),e[27]=w,e[28]=_,e[29]=d):d=e[29];let f;e[30]!==u||e[31]!==d?(f=t.jsxs("div",{className:"flex gap-2",children:[u,d]}),e[30]=u,e[31]=d,e[32]=f):f=e[32];let b;e[33]!==o||e[34]!==f||e[35]!==i?(b=t.jsxs("form",{className:"max-w-4xl space-y-6",onSubmit:i,children:[o,f]}),e[33]=o,e[34]=f,e[35]=i,e[36]=b):b=e[36];let B;return e[37]!==b||e[38]!==r?(B=t.jsxs(t.Fragment,{children:[p,j,r,b]}),e[37]=b,e[38]=r,e[39]=B):B=e[39],B}export{ee as component};
