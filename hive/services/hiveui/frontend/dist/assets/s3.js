import{M as cr,N as hr,P as G,Q as ot,S as Me,T as dr,U as pr,V as yr,_ as mr,W as Er,X as wr,Y as gr,Z as br,$ as vr,a0 as xr,a1 as yt,a2 as ae,a3 as Ie,a4 as _r,E as fe,F as le,G as ce,a5 as he,a6 as Cr,a7 as Sr,a8 as Ar,a9 as Rr,aa as Br,ab as Fr,ac as Tr,ad as Dr,ae as Lr,af as we,ag as Mr,ah as kr,ai as St,c as mt,aj as Et,K as wt}from"./index.js";import{u as gt}from"./error-banner.js";const Pr=typeof ReadableStream=="function"?ReadableStream:function(){};class Nr extends Pr{}const Ir=({expectedChecksum:a,checksum:n,source:f,checksumSourceLocation:l,base64Encoder:y})=>{if(!cr(f))throw new Error(`@smithy/util-stream: unsupported source type ${f?.constructor?.name??f} in ChecksumStream.`);const c=y??hr;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const h=new TransformStream({start(){},async transform(d,g){n.update(d),g.enqueue(d)},async flush(d){const g=await n.digest(),F=c(g);if(a!==F){const R=new Error(`Checksum mismatch: expected "${a}" but received "${F}" in response header "${l}".`);d.error(R)}else d.terminate()}});f.pipeThrough(h);const i=h.readable;return Object.setPrototypeOf(i,Nr.prototype),i};class Ur{allocByteArray;byteLength=0;byteArrays=[];constructor(n){this.allocByteArray=n}push(n){this.byteArrays.push(n),this.byteLength+=n.byteLength}flush(){if(this.byteArrays.length===1){const l=this.byteArrays[0];return this.reset(),l}const n=this.allocByteArray(this.byteLength);let f=0;for(let l=0;l<this.byteArrays.length;++l){const y=this.byteArrays[l];n.set(y,f),f+=y.byteLength}return this.reset(),n}reset(){this.byteArrays=[],this.byteLength=0}}function Or(a,n,f){const l=a.getReader();let y=!1,c=0;const h=["",new Ur(g=>new Uint8Array(g))];let i=-1;const d=async g=>{const{value:F,done:R}=await l.read(),B=F;if(R){if(i!==-1){const C=Ue(h,i);Se(C)>0&&g.enqueue(C)}g.close()}else{const C=jr(B,!1);if(i!==C&&(i>=0&&g.enqueue(Ue(h,i)),i=C),i===-1){g.enqueue(B);return}const _=Se(B);c+=_;const L=Se(h[i]);if(_>=n&&L===0)g.enqueue(B);else{const T=Hr(h,i,B);!y&&c>n*2&&(y=!0,f?.warn(`@smithy/util-stream - stream chunk size ${_} is below threshold of ${n}, automatically buffering.`)),T>=n?g.enqueue(Ue(h,i)):await d(g)}}};return new ReadableStream({pull:d})}const qr=Or;function Hr(a,n,f){switch(n){case 0:return a[0]+=f,Se(a[0]);case 1:case 2:return a[n].push(f),Se(a[n])}}function Ue(a,n){switch(n){case 0:const f=a[0];return a[0]="",f;case 1:case 2:return a[n].flush()}throw new Error(`@smithy/util-stream - invalid index ${n} given to flush()`)}function Se(a){return a?.byteLength??a?.length??0}function jr(a,n=!0){return n&&typeof Buffer<"u"&&a instanceof Buffer?2:a instanceof Uint8Array?1:typeof a=="string"?0:-1}const st=[G.CRC32,G.CRC32C,G.CRC64NVME,G.SHA1,G.SHA256],Wr=[G.SHA256,G.SHA1,G.CRC32,G.CRC32C,G.CRC64NVME],Kr=(a,{requestChecksumRequired:n,requestAlgorithmMember:f,requestChecksumCalculation:l})=>{if(!f)return l===Me.WHEN_SUPPORTED||n?ot:void 0;if(!a[f])return;const y=a[f];if(!st.includes(y))throw new Error(`The checksum algorithm "${y}" is not supported by the client. Select one of ${st}.`);return y},bt=a=>a===G.MD5?"content-md5":`x-amz-checksum-${a.toLowerCase()}`,$r=(a,n)=>{const f=a.toLowerCase();for(const l of Object.keys(n))if(f===l.toLowerCase())return!0;return!1},zr=(a,n)=>{const f=a.toLowerCase();for(const l of Object.keys(n))if(l.toLowerCase().startsWith(f))return!0;return!1},er=a=>a!==void 0&&typeof a!="string"&&!ArrayBuffer.isView(a)&&!dr(a);var Vr=(function(){function a(){this.crc32c=new At}return a.prototype.update=function(n){pr(n)||this.crc32c.update(yr(n))},a.prototype.digest=function(){return mr(this,void 0,void 0,function(){return Er(this,function(n){return[2,wr(this.crc32c.digest())]})})},a.prototype.reset=function(){this.crc32c=new At},a})(),At=(function(){function a(){this.checksum=4294967295}return a.prototype.update=function(n){var f,l;try{for(var y=gr(n),c=y.next();!c.done;c=y.next()){var h=c.value;this.checksum=this.checksum>>>8^Yr[(this.checksum^h)&255]}}catch(i){f={error:i}}finally{try{c&&!c.done&&(l=y.return)&&l.call(y)}finally{if(f)throw f.error}}return this},a.prototype.digest=function(){return(this.checksum^4294967295)>>>0},a})(),Gr=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Yr=br(Gr);const Xr=()=>{const n=new Array(8);for(let f=0;f<8;f++){const l=new Array(512);for(let y=0;y<256;y++){let c=BigInt(y);for(let h=0;h<8*(f+1);h++)c&1n?c=c>>1n^0x9a6c9329ac4bc9b5n:c=c>>1n;l[y*2]=Number(c>>32n&0xffffffffn),l[y*2+1]=Number(c&0xffffffffn)}n[f]=new Uint32Array(l)}return n};let Oe,Ce,ut,ft,lt,ct,ht,dt,pt;const Qr=()=>{Oe||(Oe=Xr(),[Ce,ut,ft,lt,ct,ht,dt,pt]=Oe)};class Zr{c1=0;c2=0;constructor(){Qr(),this.reset()}update(n){const f=n.length;let l=0,y=this.c1,c=this.c2;for(;l+8<=f;){const h=((c^n[l++])&255)<<1,i=((c>>>8^n[l++])&255)<<1,d=((c>>>16^n[l++])&255)<<1,g=((c>>>24^n[l++])&255)<<1,F=((y^n[l++])&255)<<1,R=((y>>>8^n[l++])&255)<<1,B=((y>>>16^n[l++])&255)<<1,C=((y>>>24^n[l++])&255)<<1;y=pt[h]^dt[i]^ht[d]^ct[g]^lt[F]^ft[R]^ut[B]^Ce[C],c=pt[h+1]^dt[i+1]^ht[d+1]^ct[g+1]^lt[F+1]^ft[R+1]^ut[B+1]^Ce[C+1]}for(;l<f;){const h=((c^n[l])&255)<<1;c=(c>>>8|(y&255)<<24)>>>0,y=y>>>8^Ce[h],c^=Ce[h+1],l++}this.c1=y,this.c2=c}async digest(){const n=this.c1^4294967295,f=this.c2^4294967295;return new Uint8Array([n>>>24,n>>>16&255,n>>>8&255,n&255,f>>>24,f>>>16&255,f>>>8&255,f&255])}reset(){this.c1=4294967295,this.c2=4294967295}}const Jr=()=>vr,tr=(a,n)=>{switch(a){case G.MD5:return n.md5;case G.CRC32:return Jr();case G.CRC32C:return Vr;case G.CRC64NVME:return Zr;case G.SHA1:return n.sha1;case G.SHA256:return n.sha256;default:throw new Error(`Unsupported checksum algorithm: ${a}`)}},rr=(a,n)=>{const f=new a;return f.update(xr(n||"")),f.digest()},en={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},tn=(a,n)=>(f,l)=>async y=>{if(!yt.isInstance(y.request)||zr("x-amz-checksum-",y.request.headers))return f(y);const{request:c,input:h}=y,{body:i,headers:d}=c,{base64Encoder:g,streamHasher:F}=a,{requestChecksumRequired:R,requestAlgorithmMember:B}=n,C=await a.requestChecksumCalculation(),_=B?.name,L=B?.httpHeader;_&&!h[_]&&(C===Me.WHEN_SUPPORTED||R)&&(h[_]=ot,L&&(d[L]=ot));const T=Kr(h,{requestChecksumRequired:R,requestAlgorithmMember:B?.name,requestChecksumCalculation:C});let p=i,x=d;if(T){switch(T){case G.CRC32:ae(l,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case G.CRC32C:ae(l,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case G.CRC64NVME:ae(l,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case G.SHA1:ae(l,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case G.SHA256:ae(l,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const A=bt(T),E=tr(T,a);if(er(i)){const{getAwsChunkedEncodingStream:m,bodyLengthChecker:S}=a;p=m(typeof a.requestStreamBufferSize=="number"&&a.requestStreamBufferSize>=8*1024?qr(i,a.requestStreamBufferSize,l.logger):i,{base64Encoder:g,bodyLengthChecker:S,checksumLocationName:A,checksumAlgorithmFn:E,streamHasher:F}),x={...d,"content-encoding":d["content-encoding"]?`${d["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":d["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":A},delete x["content-length"]}else if(!$r(A,d)){const m=await rr(E,i);x={...d,[A]:g(m)}}}try{return await f({...y,request:{...c,headers:x,body:p}})}catch(A){if(A instanceof Error&&A.name==="InvalidChunkSizeError")try{A.message.endsWith(".")||(A.message+="."),A.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch{}throw A}},rn={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},nn=(a,n)=>(f,l)=>async y=>{const c=y.input,{requestValidationModeMember:h}=n,i=await a.requestChecksumCalculation(),d=await a.responseChecksumValidation();switch(i){case Me.WHEN_REQUIRED:ae(l,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Me.WHEN_SUPPORTED:ae(l,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(d){case Ie.WHEN_REQUIRED:ae(l,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Ie.WHEN_SUPPORTED:ae(l,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return h&&!c[h]&&d===Ie.WHEN_SUPPORTED&&(c[h]="ENABLED"),f(y)},nr=(a=[])=>{const n=[];for(const f of Wr)!a.includes(f)||!st.includes(f)||n.push(f);return n},an=a=>{const n=a.lastIndexOf("-");if(n!==-1){const f=a.slice(n+1);if(!f.startsWith("0")){const l=parseInt(f,10);if(!isNaN(l)&&l>=1&&l<=1e4)return!0}}return!1},on=async(a,{checksumAlgorithmFn:n,base64Encoder:f})=>f(await rr(n,a)),sn=async(a,{config:n,responseAlgorithms:f,logger:l})=>{const y=nr(f),{body:c,headers:h}=a;for(const i of y){const d=bt(i),g=h[d];if(g){let F;try{F=tr(i,n)}catch(C){if(i===G.CRC64NVME){l?.warn(`Skipping ${G.CRC64NVME} checksum validation: ${C.message}`);continue}throw C}const{base64Encoder:R}=n;if(er(c)){a.body=Ir({expectedChecksum:g,checksumSourceLocation:d,checksum:new F,source:c,base64Encoder:R});return}const B=await on(c,{checksumAlgorithmFn:F,base64Encoder:R});if(B===g)break;throw new Error(`Checksum mismatch: expected "${B}" but received "${g}" in response header "${d}".`)}}},un={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},fn=(a,n)=>(f,l)=>async y=>{if(!yt.isInstance(y.request))return f(y);const c=y.input,h=await f(y),i=h.response,{requestValidationModeMember:d,responseAlgorithms:g}=n;if(d&&c[d]==="ENABLED"){const{clientName:F,commandName:R}=l;if(F==="S3Client"&&R==="GetObjectCommand"&&nr(g).every(C=>{const _=bt(C),L=i.headers[_];return!L||an(L)}))return h;await sn(i,{config:a,responseAlgorithms:g,logger:l.logger})}return h},vt=(a,n)=>({applyToStack:f=>{f.add(tn(a,n),en),f.addRelativeTo(nn(a,n),rn),f.addRelativeTo(fn(a,n),un)}}),ln="content-length",cn="x-amz-decoded-content-length";function hn(){return(a,n)=>async f=>{const{request:l}=f;if(yt.isInstance(l)&&!(ln in l.headers)&&!(cn in l.headers)){const y="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof n?.logger?.warn=="function"&&!(n.logger instanceof _r)?n.logger.warn(y):console.warn(y)}return a({...f})}}const dn={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},pn=a=>({applyToStack:n=>{n.add(hn(),dn)}});class yn extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),he(l)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").sc(Cr).build(){}function mn(a){return n=>async f=>{const l={...f.input},y=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const c of y){const h=l[c.target];if(h){let i;typeof h=="string"?wn(h,a)?i=a.base64Decoder(h):(i=a.utf8Decoder(h),l[c.target]=a.base64Encoder(i)):(i=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h),l[c.target]=a.base64Encoder(i));const d=new a.md5;d.update(i),l[c.hash]=a.base64Encoder(await d.digest())}}return n({...f,input:l})}}const En={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Pe=a=>({applyToStack:n=>{n.add(mn(a),En)}});function wn(a,n){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a))return!1;try{return n.base64Decoder(a).length===32}catch{return!1}}class gn extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),he(l),Pe(l)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").sc(Sr).build(){}function bn(a){return n=>async f=>{const{CreateBucketConfiguration:l}=f.input,y=await a.region();return!l?.LocationConstraint&&!l?.Location&&y!=="us-east-1"&&(f.input.CreateBucketConfiguration=f.input.CreateBucketConfiguration??{},f.input.CreateBucketConfiguration.LocationConstraint=y),n(f)}}const vn={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0},xn=a=>({applyToStack:n=>{n.add(bn(a),vn)}});class _n extends fe.classBuilder().ep({...le,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},DisableAccessPoints:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),he(l),xn(l)]}).s("AmazonS3","CreateBucket",{}).n("S3Client","CreateBucketCommand").sc(Ar).build(){}class Cn extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),he(l),Pe(l)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").sc(Rr).build(){}class Sn extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),he(l)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").sc(Br).build(){}class Rt extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),vt(l,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),pn(),he(l),Pe(l)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(Fr).build(){}class An extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),vt(l,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),he(l)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").sc(Tr).build(){}class Rn extends fe.classBuilder().ep({...le,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(n,f,l,y){return[ce(l,n.getEndpointParameterInstructions()),vt(l,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),he(l),Pe(l)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").sc(Dr).build(){}const Bn={CRC32:"CRC32"};class Fn{onabort=null;_aborted=!1;constructor(){Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}get aborted(){return this._aborted}abort(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)}}class Tn{signal=new Fn;abort(){this.signal.abort()}}var Be={exports:{}},Bt;function Ne(){if(Bt)return Be.exports;Bt=1;var a=typeof Reflect=="object"?Reflect:null,n=a&&typeof a.apply=="function"?a.apply:function(m,S,I){return Function.prototype.apply.call(m,S,I)},f;a&&typeof a.ownKeys=="function"?f=a.ownKeys:Object.getOwnPropertySymbols?f=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:f=function(m){return Object.getOwnPropertyNames(m)};function l(E){console&&console.warn&&console.warn(E)}var y=Number.isNaN||function(m){return m!==m};function c(){c.init.call(this)}Be.exports=c,Be.exports.once=p,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var h=10;function i(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(E){if(typeof E!="number"||E<0||y(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");h=E}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||y(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function d(E){return E._maxListeners===void 0?c.defaultMaxListeners:E._maxListeners}c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(m){for(var S=[],I=1;I<arguments.length;I++)S.push(arguments[I]);var N=m==="error",U=this._events;if(U!==void 0)N=N&&U.error===void 0;else if(!N)return!1;if(N){var H;if(S.length>0&&(H=S[0]),H instanceof Error)throw H;var Q=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw Q.context=H,Q}var J=U[m];if(J===void 0)return!1;if(typeof J=="function")n(J,this,S);else for(var ee=J.length,oe=_(J,ee),I=0;I<ee;++I)n(oe[I],this,S);return!0};function g(E,m,S,I){var N,U,H;if(i(S),U=E._events,U===void 0?(U=E._events=Object.create(null),E._eventsCount=0):(U.newListener!==void 0&&(E.emit("newListener",m,S.listener?S.listener:S),U=E._events),H=U[m]),H===void 0)H=U[m]=S,++E._eventsCount;else if(typeof H=="function"?H=U[m]=I?[S,H]:[H,S]:I?H.unshift(S):H.push(S),N=d(E),N>0&&H.length>N&&!H.warned){H.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=E,Q.type=m,Q.count=H.length,l(Q)}return E}c.prototype.addListener=function(m,S){return g(this,m,S,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(m,S){return g(this,m,S,!0)};function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R(E,m,S){var I={fired:!1,wrapFn:void 0,target:E,type:m,listener:S},N=F.bind(I);return N.listener=S,I.wrapFn=N,N}c.prototype.once=function(m,S){return i(S),this.on(m,R(this,m,S)),this},c.prototype.prependOnceListener=function(m,S){return i(S),this.prependListener(m,R(this,m,S)),this},c.prototype.removeListener=function(m,S){var I,N,U,H,Q;if(i(S),N=this._events,N===void 0)return this;if(I=N[m],I===void 0)return this;if(I===S||I.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete N[m],N.removeListener&&this.emit("removeListener",m,I.listener||S));else if(typeof I!="function"){for(U=-1,H=I.length-1;H>=0;H--)if(I[H]===S||I[H].listener===S){Q=I[H].listener,U=H;break}if(U<0)return this;U===0?I.shift():L(I,U),I.length===1&&(N[m]=I[0]),N.removeListener!==void 0&&this.emit("removeListener",m,Q||S)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(m){var S,I,N;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[m]),this;if(arguments.length===0){var U=Object.keys(I),H;for(N=0;N<U.length;++N)H=U[N],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=I[m],typeof S=="function")this.removeListener(m,S);else if(S!==void 0)for(N=S.length-1;N>=0;N--)this.removeListener(m,S[N]);return this};function B(E,m,S){var I=E._events;if(I===void 0)return[];var N=I[m];return N===void 0?[]:typeof N=="function"?S?[N.listener||N]:[N]:S?T(N):_(N,N.length)}c.prototype.listeners=function(m){return B(this,m,!0)},c.prototype.rawListeners=function(m){return B(this,m,!1)},c.listenerCount=function(E,m){return typeof E.listenerCount=="function"?E.listenerCount(m):C.call(E,m)},c.prototype.listenerCount=C;function C(E){var m=this._events;if(m!==void 0){var S=m[E];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?f(this._events):[]};function _(E,m){for(var S=new Array(m),I=0;I<m;++I)S[I]=E[I];return S}function L(E,m){for(;m+1<E.length;m++)E[m]=E[m+1];E.pop()}function T(E){for(var m=new Array(E.length),S=0;S<m.length;++S)m[S]=E[S].listener||E[S];return m}function p(E,m){return new Promise(function(S,I){function N(H){E.removeListener(m,U),I(H)}function U(){typeof E.removeListener=="function"&&E.removeListener("error",N),S([].slice.call(arguments))}A(E,m,U,{once:!0}),m!=="error"&&x(E,N,{once:!0})})}function x(E,m,S){typeof E.on=="function"&&A(E,"error",m,S)}function A(E,m,S,I){if(typeof E.on=="function")I.once?E.once(m,S):E.on(m,S);else if(typeof E.addEventListener=="function")E.addEventListener(m,function N(U){I.once&&E.removeEventListener(m,N),S(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Be.exports}var qe=Ne(),He={},_e={},Ft;function Dn(){if(Ft)return _e;Ft=1,_e.byteLength=i,_e.toByteArray=g,_e.fromByteArray=B;for(var a=[],n=[],f=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,c=l.length;y<c;++y)a[y]=l[y],n[l.charCodeAt(y)]=y;n[45]=62,n[95]=63;function h(C){var _=C.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=C.indexOf("=");L===-1&&(L=_);var T=L===_?0:4-L%4;return[L,T]}function i(C){var _=h(C),L=_[0],T=_[1];return(L+T)*3/4-T}function d(C,_,L){return(_+L)*3/4-L}function g(C){var _,L=h(C),T=L[0],p=L[1],x=new f(d(C,T,p)),A=0,E=p>0?T-4:T,m;for(m=0;m<E;m+=4)_=n[C.charCodeAt(m)]<<18|n[C.charCodeAt(m+1)]<<12|n[C.charCodeAt(m+2)]<<6|n[C.charCodeAt(m+3)],x[A++]=_>>16&255,x[A++]=_>>8&255,x[A++]=_&255;return p===2&&(_=n[C.charCodeAt(m)]<<2|n[C.charCodeAt(m+1)]>>4,x[A++]=_&255),p===1&&(_=n[C.charCodeAt(m)]<<10|n[C.charCodeAt(m+1)]<<4|n[C.charCodeAt(m+2)]>>2,x[A++]=_>>8&255,x[A++]=_&255),x}function F(C){return a[C>>18&63]+a[C>>12&63]+a[C>>6&63]+a[C&63]}function R(C,_,L){for(var T,p=[],x=_;x<L;x+=3)T=(C[x]<<16&16711680)+(C[x+1]<<8&65280)+(C[x+2]&255),p.push(F(T));return p.join("")}function B(C){for(var _,L=C.length,T=L%3,p=[],x=16383,A=0,E=L-T;A<E;A+=x)p.push(R(C,A,A+x>E?E:A+x));return T===1?(_=C[L-1],p.push(a[_>>2]+a[_<<4&63]+"==")):T===2&&(_=(C[L-2]<<8)+C[L-1],p.push(a[_>>10]+a[_>>4&63]+a[_<<2&63]+"=")),p.join("")}return _e}var Fe={};var Tt;function Ln(){return Tt||(Tt=1,Fe.read=function(a,n,f,l,y){var c,h,i=y*8-l-1,d=(1<<i)-1,g=d>>1,F=-7,R=f?y-1:0,B=f?-1:1,C=a[n+R];for(R+=B,c=C&(1<<-F)-1,C>>=-F,F+=i;F>0;c=c*256+a[n+R],R+=B,F-=8);for(h=c&(1<<-F)-1,c>>=-F,F+=l;F>0;h=h*256+a[n+R],R+=B,F-=8);if(c===0)c=1-g;else{if(c===d)return h?NaN:(C?-1:1)*(1/0);h=h+Math.pow(2,l),c=c-g}return(C?-1:1)*h*Math.pow(2,c-l)},Fe.write=function(a,n,f,l,y,c){var h,i,d,g=c*8-y-1,F=(1<<g)-1,R=F>>1,B=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=l?0:c-1,_=l?1:-1,L=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(i=isNaN(n)?1:0,h=F):(h=Math.floor(Math.log(n)/Math.LN2),n*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+R>=1?n+=B/d:n+=B*Math.pow(2,1-R),n*d>=2&&(h++,d/=2),h+R>=F?(i=0,h=F):h+R>=1?(i=(n*d-1)*Math.pow(2,y),h=h+R):(i=n*Math.pow(2,R-1)*Math.pow(2,y),h=0));y>=8;a[f+C]=i&255,C+=_,i/=256,y-=8);for(h=h<<y|i,g+=y;g>0;a[f+C]=h&255,C+=_,h/=256,g-=8);a[f+C-_]|=L*128}),Fe}var Dt;function Re(){return Dt||(Dt=1,(function(a){var n=Dn(),f=Ln(),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=i,a.SlowBuffer=p,a.INSPECT_MAX_BYTES=50;var y=2147483647;a.kMaxLength=y,i.TYPED_ARRAY_SUPPORT=c(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function h(r){if(r>y)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,i.prototype),e}function i(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(r)}return d(r,e,t)}i.poolSize=8192;function d(r,e,t){if(typeof r=="string")return B(r,e);if(ArrayBuffer.isView(r))return C(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(D(r,ArrayBuffer)||r&&D(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(r,SharedArrayBuffer)||r&&D(r.buffer,SharedArrayBuffer)))return _(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var s=r.valueOf&&r.valueOf();if(s!=null&&s!==r)return i.from(s,e,t);var w=L(r);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return i.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}i.from=function(r,e,t){return d(r,e,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function g(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function F(r,e,t){return g(r),r<=0?h(r):e!==void 0?typeof t=="string"?h(r).fill(e,t):h(r).fill(e):h(r)}i.alloc=function(r,e,t){return F(r,e,t)};function R(r){return g(r),h(r<0?0:T(r)|0)}i.allocUnsafe=function(r){return R(r)},i.allocUnsafeSlow=function(r){return R(r)};function B(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=x(r,e)|0,s=h(t),w=s.write(r,e);return w!==t&&(s=s.slice(0,w)),s}function C(r){for(var e=r.length<0?0:T(r.length)|0,t=h(e),s=0;s<e;s+=1)t[s]=r[s]&255;return t}function _(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var s;return e===void 0&&t===void 0?s=new Uint8Array(r):t===void 0?s=new Uint8Array(r,e):s=new Uint8Array(r,e,t),Object.setPrototypeOf(s,i.prototype),s}function L(r){if(i.isBuffer(r)){var e=T(r.length)|0,t=h(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||O(r.length)?h(0):C(r);if(r.type==="Buffer"&&Array.isArray(r.data))return C(r.data)}function T(r){if(r>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return r|0}function p(r){return+r!=r&&(r=0),i.alloc(+r)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,t){if(D(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var s=e.length,w=t.length,M=0,k=Math.min(s,w);M<k;++M)if(e[M]!==t[M]){s=e[M],w=t[M];break}return s<w?-1:w<s?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);var s;if(t===void 0)for(t=0,s=0;s<e.length;++s)t+=e[s].length;var w=i.allocUnsafe(t),M=0;for(s=0;s<e.length;++s){var k=e[s];if(D(k,Uint8Array)&&(k=i.from(k)),!i.isBuffer(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(w,M),M+=k.length}return w};function x(r,e){if(i.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||D(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&t===0)return 0;for(var w=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return P(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return o(r).length;default:if(w)return s?-1:P(r).length;e=(""+e).toLowerCase(),w=!0}}i.byteLength=x;function A(r,e,t){var s=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return se(this,e,t);case"utf8":case"utf-8":return oe(this,e,t);case"ascii":return ie(this,e,t);case"latin1":case"binary":return pe(this,e,t);case"base64":return ee(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,e,t);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}i.prototype._isBuffer=!0;function E(r,e,t){var s=r[e];r[e]=r[t],r[t]=s}i.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?oe(this,0,e):A.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(i.prototype[l]=i.prototype.inspect),i.prototype.compare=function(e,t,s,w,M){if(D(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),s===void 0&&(s=e?e.length:0),w===void 0&&(w=0),M===void 0&&(M=this.length),t<0||s>e.length||w<0||M>this.length)throw new RangeError("out of range index");if(w>=M&&t>=s)return 0;if(w>=M)return-1;if(t>=s)return 1;if(t>>>=0,s>>>=0,w>>>=0,M>>>=0,this===e)return 0;for(var k=M-w,W=s-t,K=Math.min(k,W),z=this.slice(w,M),X=e.slice(t,s),$=0;$<K;++$)if(z[$]!==X[$]){k=z[$],W=X[$];break}return k<W?-1:W<k?1:0};function m(r,e,t,s,w){if(r.length===0)return-1;if(typeof t=="string"?(s=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,O(t)&&(t=w?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(w)return-1;t=r.length-1}else if(t<0)if(w)t=0;else return-1;if(typeof e=="string"&&(e=i.from(e,s)),i.isBuffer(e))return e.length===0?-1:S(r,e,t,s,w);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):S(r,[e],t,s,w);throw new TypeError("val must be string, number or Buffer")}function S(r,e,t,s,w){var M=1,k=r.length,W=e.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(r.length<2||e.length<2)return-1;M=2,k/=2,W/=2,t/=2}function K(_t,Ct){return M===1?_t[Ct]:_t.readUInt16BE(Ct*M)}var z;if(w){var X=-1;for(z=t;z<k;z++)if(K(r,z)===K(e,X===-1?0:z-X)){if(X===-1&&(X=z),z-X+1===W)return X*M}else X!==-1&&(z-=z-X),X=-1}else for(t+W>k&&(t=k-W),z=t;z>=0;z--){for(var $=!0,te=0;te<W;te++)if(K(r,z+te)!==K(e,te)){$=!1;break}if($)return z}return-1}i.prototype.includes=function(e,t,s){return this.indexOf(e,t,s)!==-1},i.prototype.indexOf=function(e,t,s){return m(this,e,t,s,!0)},i.prototype.lastIndexOf=function(e,t,s){return m(this,e,t,s,!1)};function I(r,e,t,s){t=Number(t)||0;var w=r.length-t;s?(s=Number(s),s>w&&(s=w)):s=w;var M=e.length;s>M/2&&(s=M/2);for(var k=0;k<s;++k){var W=parseInt(e.substr(k*2,2),16);if(O(W))return k;r[t+k]=W}return k}function N(r,e,t,s){return u(P(e,r.length-t),r,t,s)}function U(r,e,t,s){return u(q(e),r,t,s)}function H(r,e,t,s){return U(r,e,t,s)}function Q(r,e,t,s){return u(o(e),r,t,s)}function J(r,e,t,s){return u(j(e,r.length-t),r,t,s)}i.prototype.write=function(e,t,s,w){if(t===void 0)w="utf8",s=this.length,t=0;else if(s===void 0&&typeof t=="string")w=t,s=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(s)?(s=s>>>0,w===void 0&&(w="utf8")):(w=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var M=this.length-t;if((s===void 0||s>M)&&(s=M),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(var k=!1;;)switch(w){case"hex":return I(this,e,t,s);case"utf8":case"utf-8":return N(this,e,t,s);case"ascii":return U(this,e,t,s);case"latin1":case"binary":return H(this,e,t,s);case"base64":return Q(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,e,t,s);default:if(k)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),k=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(r,e,t){return e===0&&t===r.length?n.fromByteArray(r):n.fromByteArray(r.slice(e,t))}function oe(r,e,t){t=Math.min(r.length,t);for(var s=[],w=e;w<t;){var M=r[w],k=null,W=M>239?4:M>223?3:M>191?2:1;if(w+W<=t){var K,z,X,$;switch(W){case 1:M<128&&(k=M);break;case 2:K=r[w+1],(K&192)===128&&($=(M&31)<<6|K&63,$>127&&(k=$));break;case 3:K=r[w+1],z=r[w+2],(K&192)===128&&(z&192)===128&&($=(M&15)<<12|(K&63)<<6|z&63,$>2047&&($<55296||$>57343)&&(k=$));break;case 4:K=r[w+1],z=r[w+2],X=r[w+3],(K&192)===128&&(z&192)===128&&(X&192)===128&&($=(M&15)<<18|(K&63)<<12|(z&63)<<6|X&63,$>65535&&$<1114112&&(k=$))}}k===null?(k=65533,W=1):k>65535&&(k-=65536,s.push(k>>>10&1023|55296),k=56320|k&1023),s.push(k),w+=W}return xe(s)}var de=4096;function xe(r){var e=r.length;if(e<=de)return String.fromCharCode.apply(String,r);for(var t="",s=0;s<e;)t+=String.fromCharCode.apply(String,r.slice(s,s+=de));return t}function ie(r,e,t){var s="";t=Math.min(r.length,t);for(var w=e;w<t;++w)s+=String.fromCharCode(r[w]&127);return s}function pe(r,e,t){var s="";t=Math.min(r.length,t);for(var w=e;w<t;++w)s+=String.fromCharCode(r[w]);return s}function se(r,e,t){var s=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>s)&&(t=s);for(var w="",M=e;M<t;++M)w+=V[r[M]];return w}function ye(r,e,t){for(var s=r.slice(e,t),w="",M=0;M<s.length;M+=2)w+=String.fromCharCode(s[M]+s[M+1]*256);return w}i.prototype.slice=function(e,t){var s=this.length;e=~~e,t=t===void 0?s:~~t,e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),t<e&&(t=e);var w=this.subarray(e,t);return Object.setPrototypeOf(w,i.prototype),w};function Y(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);for(var w=this[e],M=1,k=0;++k<t&&(M*=256);)w+=this[e+k]*M;return w},i.prototype.readUIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);for(var w=this[e+--t],M=1;t>0&&(M*=256);)w+=this[e+--t]*M;return w},i.prototype.readUInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);for(var w=this[e],M=1,k=0;++k<t&&(M*=256);)w+=this[e+k]*M;return M*=128,w>=M&&(w-=Math.pow(2,8*t)),w},i.prototype.readIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);for(var w=t,M=1,k=this[e+--w];w>0&&(M*=256);)k+=this[e+--w]*M;return M*=128,k>=M&&(k-=Math.pow(2,8*t)),k},i.prototype.readInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var s=this[e]|this[e+1]<<8;return s&32768?s|4294901760:s},i.prototype.readInt16BE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var s=this[e+1]|this[e]<<8;return s&32768?s|4294901760:s},i.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),f.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),f.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),f.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),f.read(this,e,!1,52,8)};function Z(r,e,t,s,w,M){if(!i.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>w||e<M)throw new RangeError('"value" argument is out of bounds');if(t+s>r.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(e,t,s,w){if(e=+e,t=t>>>0,s=s>>>0,!w){var M=Math.pow(2,8*s)-1;Z(this,e,t,s,M,0)}var k=1,W=0;for(this[t]=e&255;++W<s&&(k*=256);)this[t+W]=e/k&255;return t+s},i.prototype.writeUIntBE=function(e,t,s,w){if(e=+e,t=t>>>0,s=s>>>0,!w){var M=Math.pow(2,8*s)-1;Z(this,e,t,s,M,0)}var k=s-1,W=1;for(this[t+k]=e&255;--k>=0&&(W*=256);)this[t+k]=e/W&255;return t+s},i.prototype.writeUInt8=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,1,255,0),this[t]=e&255,t+1},i.prototype.writeUInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeUInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},i.prototype.writeUInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},i.prototype.writeIntLE=function(e,t,s,w){if(e=+e,t=t>>>0,!w){var M=Math.pow(2,8*s-1);Z(this,e,t,s,M-1,-M)}var k=0,W=1,K=0;for(this[t]=e&255;++k<s&&(W*=256);)e<0&&K===0&&this[t+k-1]!==0&&(K=1),this[t+k]=(e/W>>0)-K&255;return t+s},i.prototype.writeIntBE=function(e,t,s,w){if(e=+e,t=t>>>0,!w){var M=Math.pow(2,8*s-1);Z(this,e,t,s,M-1,-M)}var k=s-1,W=1,K=0;for(this[t+k]=e&255;--k>=0&&(W*=256);)e<0&&K===0&&this[t+k+1]!==0&&(K=1),this[t+k]=(e/W>>0)-K&255;return t+s},i.prototype.writeInt8=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},i.prototype.writeInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function re(r,e,t,s,w,M){if(t+s>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function me(r,e,t,s,w){return e=+e,t=t>>>0,w||re(r,e,t,4),f.write(r,e,t,s,23,4),t+4}i.prototype.writeFloatLE=function(e,t,s){return me(this,e,t,!0,s)},i.prototype.writeFloatBE=function(e,t,s){return me(this,e,t,!1,s)};function Ee(r,e,t,s,w){return e=+e,t=t>>>0,w||re(r,e,t,8),f.write(r,e,t,s,52,8),t+8}i.prototype.writeDoubleLE=function(e,t,s){return Ee(this,e,t,!0,s)},i.prototype.writeDoubleBE=function(e,t,s){return Ee(this,e,t,!1,s)},i.prototype.copy=function(e,t,s,w){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),!w&&w!==0&&(w=this.length),t>=e.length&&(t=e.length),t||(t=0),w>0&&w<s&&(w=s),w===s||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),e.length-t<w-s&&(w=e.length-t+s);var M=w-s;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,s,w);else if(this===e&&s<t&&t<w)for(var k=M-1;k>=0;--k)e[k+t]=this[k+s];else Uint8Array.prototype.set.call(e,this.subarray(s,w),t);return M},i.prototype.fill=function(e,t,s,w){if(typeof e=="string"){if(typeof t=="string"?(w=t,t=0,s=this.length):typeof s=="string"&&(w=s,s=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!i.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(e.length===1){var M=e.charCodeAt(0);(w==="utf8"&&M<128||w==="latin1")&&(e=M)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;t=t>>>0,s=s===void 0?this.length:s>>>0,e||(e=0);var k;if(typeof e=="number")for(k=t;k<s;++k)this[k]=e;else{var W=i.isBuffer(e)?e:i.from(e,w),K=W.length;if(K===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(k=0;k<s-t;++k)this[k+t]=W[k%K]}return this};var v=/[^+/0-9A-Za-z-_]/g;function b(r){if(r=r.split("=")[0],r=r.trim().replace(v,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function P(r,e){e=e||1/0;for(var t,s=r.length,w=null,M=[],k=0;k<s;++k){if(t=r.charCodeAt(k),t>55295&&t<57344){if(!w){if(t>56319){(e-=3)>-1&&M.push(239,191,189);continue}else if(k+1===s){(e-=3)>-1&&M.push(239,191,189);continue}w=t;continue}if(t<56320){(e-=3)>-1&&M.push(239,191,189),w=t;continue}t=(w-55296<<10|t-56320)+65536}else w&&(e-=3)>-1&&M.push(239,191,189);if(w=null,t<128){if((e-=1)<0)break;M.push(t)}else if(t<2048){if((e-=2)<0)break;M.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;M.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;M.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return M}function q(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function j(r,e){for(var t,s,w,M=[],k=0;k<r.length&&!((e-=2)<0);++k)t=r.charCodeAt(k),s=t>>8,w=t%256,M.push(w),M.push(s);return M}function o(r){return n.toByteArray(b(r))}function u(r,e,t,s){for(var w=0;w<s&&!(w+t>=e.length||w>=r.length);++w)e[w+t]=r[w];return w}function D(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function O(r){return r!==r}var V=(function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var s=t*16,w=0;w<16;++w)e[s+w]=r[t]+r[w];return e})()})(He)),He}var ue=Re();const Mn={lstatSync:()=>{},isFileReadStream(a){return!1}},ke={...Mn,runtime:"browser"},Te=a=>{if(a==null)return 0;if(typeof a=="string")return ue.Buffer.byteLength(a);if(typeof a.byteLength=="number")return a.byteLength;if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.start=="number"&&typeof a.end=="number")return a.end+1-a.start;if(ke.isFileReadStream(a))try{return ke.lstatSync(a.path).size}catch{return}};var ne;(function(a){a.EMPTY_INPUT="a null or undefined Body",a.CONTENT_LENGTH="the ContentLength property of the params set by the caller",a.STRING_LENGTH="the encoded byte length of the Body string",a.TYPED_ARRAY="the byteLength of a typed byte array such as Uint8Array",a.LENGTH="the value of Body.length",a.SIZE="the value of Body.size",a.START_END_DIFF="the numeric difference between Body.start and Body.end",a.LSTAT="the size of the file given by Body.path on disk as reported by lstatSync"})(ne||(ne={}));const kn=(a,n)=>{if(n!=null)return ne.CONTENT_LENGTH;if(a==null)return ne.EMPTY_INPUT;if(typeof a=="string")return ne.STRING_LENGTH;if(typeof a.byteLength=="number")return ne.TYPED_ARRAY;if(typeof a.length=="number")return ne.LENGTH;if(typeof a.size=="number")return ne.SIZE;if(typeof a.start=="number"&&typeof a.end=="number")return ne.START_END_DIFF;if(ke.isFileReadStream(a))try{return ke.lstatSync(a.path).size,ne.LSTAT}catch{return}};var De={exports:{}},Lt;function be(){return Lt||(Lt=1,typeof Object.create=="function"?De.exports=function(n,f){f&&(n.super_=f,n.prototype=Object.create(f.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:De.exports=function(n,f){if(f){n.super_=f;var l=function(){};l.prototype=f.prototype,n.prototype=new l,n.prototype.constructor=n}}),De.exports}var je,Mt;function ir(){return Mt||(Mt=1,je=Ne().EventEmitter),je}const Pn={},Nn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),ar=Lr(Nn);var We,kt;function In(){if(kt)return We;kt=1;function a(_,L){var T=Object.keys(_);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(_);L&&(p=p.filter(function(x){return Object.getOwnPropertyDescriptor(_,x).enumerable})),T.push.apply(T,p)}return T}function n(_){for(var L=1;L<arguments.length;L++){var T=arguments[L]!=null?arguments[L]:{};L%2?a(Object(T),!0).forEach(function(p){f(_,p,T[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(T)):a(Object(T)).forEach(function(p){Object.defineProperty(_,p,Object.getOwnPropertyDescriptor(T,p))})}return _}function f(_,L,T){return L=h(L),L in _?Object.defineProperty(_,L,{value:T,enumerable:!0,configurable:!0,writable:!0}):_[L]=T,_}function l(_,L){if(!(_ instanceof L))throw new TypeError("Cannot call a class as a function")}function y(_,L){for(var T=0;T<L.length;T++){var p=L[T];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,h(p.key),p)}}function c(_,L,T){return L&&y(_.prototype,L),Object.defineProperty(_,"prototype",{writable:!1}),_}function h(_){var L=i(_,"string");return typeof L=="symbol"?L:String(L)}function i(_,L){if(typeof _!="object"||_===null)return _;var T=_[Symbol.toPrimitive];if(T!==void 0){var p=T.call(_,L);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var d=Re(),g=d.Buffer,F=ar,R=F.inspect,B=R&&R.custom||"inspect";function C(_,L,T){g.prototype.copy.call(_,L,T)}return We=(function(){function _(){l(this,_),this.head=null,this.tail=null,this.length=0}return c(_,[{key:"push",value:function(T){var p={data:T,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(T){var p={data:T,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var p=this.head,x=""+p.data;p=p.next;)x+=T+p.data;return x}},{key:"concat",value:function(T){if(this.length===0)return g.alloc(0);for(var p=g.allocUnsafe(T>>>0),x=this.head,A=0;x;)C(x.data,p,A),A+=x.data.length,x=x.next;return p}},{key:"consume",value:function(T,p){var x;return T<this.head.data.length?(x=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):T===this.head.data.length?x=this.shift():x=p?this._getString(T):this._getBuffer(T),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var p=this.head,x=1,A=p.data;for(T-=A.length;p=p.next;){var E=p.data,m=T>E.length?E.length:T;if(m===E.length?A+=E:A+=E.slice(0,T),T-=m,T===0){m===E.length?(++x,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=E.slice(m));break}++x}return this.length-=x,A}},{key:"_getBuffer",value:function(T){var p=g.allocUnsafe(T),x=this.head,A=1;for(x.data.copy(p),T-=x.data.length;x=x.next;){var E=x.data,m=T>E.length?E.length:T;if(E.copy(p,p.length-T,0,m),T-=m,T===0){m===E.length?(++A,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=E.slice(m));break}++A}return this.length-=A,p}},{key:B,value:function(T,p){return R(this,n(n({},p),{},{depth:0,customInspect:!1}))}}]),_})(),We}var Ke,Pt;function or(){if(Pt)return Ke;Pt=1;function a(h,i){var d=this,g=this._readableState&&this._readableState.destroyed,F=this._writableState&&this._writableState.destroyed;return g||F?(i?i(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(y,this,h)):process.nextTick(y,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(R){!i&&R?d._writableState?d._writableState.errorEmitted?process.nextTick(f,d):(d._writableState.errorEmitted=!0,process.nextTick(n,d,R)):process.nextTick(n,d,R):i?(process.nextTick(f,d),i(R)):process.nextTick(f,d)}),this)}function n(h,i){y(h,i),f(h)}function f(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function l(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function y(h,i){h.emit("error",i)}function c(h,i){var d=h._readableState,g=h._writableState;d&&d.autoDestroy||g&&g.autoDestroy?h.destroy(i):h.emit("error",i)}return Ke={destroy:a,undestroy:l,errorOrDestroy:c},Ke}var $e={},Nt;function ve(){if(Nt)return $e;Nt=1;function a(i,d){i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.__proto__=d}var n={};function f(i,d,g){g||(g=Error);function F(B,C,_){return typeof d=="string"?d:d(B,C,_)}var R=(function(B){a(C,B);function C(_,L,T){return B.call(this,F(_,L,T))||this}return C})(g);R.prototype.name=g.name,R.prototype.code=i,n[i]=R}function l(i,d){if(Array.isArray(i)){var g=i.length;return i=i.map(function(F){return String(F)}),g>2?"one of ".concat(d," ").concat(i.slice(0,g-1).join(", "),", or ")+i[g-1]:g===2?"one of ".concat(d," ").concat(i[0]," or ").concat(i[1]):"of ".concat(d," ").concat(i[0])}else return"of ".concat(d," ").concat(String(i))}function y(i,d,g){return i.substr(0,d.length)===d}function c(i,d,g){return(g===void 0||g>i.length)&&(g=i.length),i.substring(g-d.length,g)===d}function h(i,d,g){return typeof g!="number"&&(g=0),g+d.length>i.length?!1:i.indexOf(d,g)!==-1}return f("ERR_INVALID_OPT_VALUE",function(i,d){return'The value "'+d+'" is invalid for option "'+i+'"'},TypeError),f("ERR_INVALID_ARG_TYPE",function(i,d,g){var F;typeof d=="string"&&y(d,"not ")?(F="must not be",d=d.replace(/^not /,"")):F="must be";var R;if(c(i," argument"))R="The ".concat(i," ").concat(F," ").concat(l(d,"type"));else{var B=h(i,".")?"property":"argument";R='The "'.concat(i,'" ').concat(B," ").concat(F," ").concat(l(d,"type"))}return R+=". Received type ".concat(typeof g),R},TypeError),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),f("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),f("ERR_STREAM_PREMATURE_CLOSE","Premature close"),f("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),f("ERR_STREAM_WRITE_AFTER_END","write after end"),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$e.codes=n,$e}var ze,It;function sr(){if(It)return ze;It=1;var a=ve().codes.ERR_INVALID_OPT_VALUE;function n(l,y,c){return l.highWaterMark!=null?l.highWaterMark:y?l[c]:null}function f(l,y,c,h){var i=n(y,h,c);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var d=h?c:"highWaterMark";throw new a(d,i)}return Math.floor(i)}return l.objectMode?16:16*1024}return ze={getHighWaterMark:f},ze}var Ve,Ut;function Un(){if(Ut)return Ve;Ut=1,Ve=a;function a(f,l){if(n("noDeprecation"))return f;var y=!1;function c(){if(!y){if(n("throwDeprecation"))throw new Error(l);n("traceDeprecation")?console.trace(l):console.warn(l),y=!0}return f.apply(this,arguments)}return c}function n(f){try{if(!we.localStorage)return!1}catch{return!1}var l=we.localStorage[f];return l==null?!1:String(l).toLowerCase()==="true"}return Ve}var Ge,Ot;function ur(){if(Ot)return Ge;Ot=1,Ge=N;function a(v){var b=this;this.next=null,this.entry=null,this.finish=function(){Ee(b,v)}}var n;N.WritableState=S;var f={deprecate:Un()},l=ir(),y=Re().Buffer,c=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(v){return y.from(v)}function i(v){return y.isBuffer(v)||v instanceof c}var d=or(),g=sr(),F=g.getHighWaterMark,R=ve().codes,B=R.ERR_INVALID_ARG_TYPE,C=R.ERR_METHOD_NOT_IMPLEMENTED,_=R.ERR_MULTIPLE_CALLBACK,L=R.ERR_STREAM_CANNOT_PIPE,T=R.ERR_STREAM_DESTROYED,p=R.ERR_STREAM_NULL_VALUES,x=R.ERR_STREAM_WRITE_AFTER_END,A=R.ERR_UNKNOWN_ENCODING,E=d.errorOrDestroy;be()(N,l);function m(){}function S(v,b,P){n=n||ge(),v=v||{},typeof P!="boolean"&&(P=b instanceof n),this.objectMode=!!v.objectMode,P&&(this.objectMode=this.objectMode||!!v.writableObjectMode),this.highWaterMark=F(this,v,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=v.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=v.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){xe(b,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=v.emitClose!==!1,this.autoDestroy=!!v.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}S.prototype.getBuffer=function(){for(var b=this.bufferedRequest,P=[];b;)P.push(b),b=b.next;return P},(function(){try{Object.defineProperty(S.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var I;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(b){return I.call(this,b)?!0:this!==N?!1:b&&b._writableState instanceof S}})):I=function(b){return b instanceof this};function N(v){n=n||ge();var b=this instanceof n;if(!b&&!I.call(N,this))return new N(v);this._writableState=new S(v,this,b),this.writable=!0,v&&(typeof v.write=="function"&&(this._write=v.write),typeof v.writev=="function"&&(this._writev=v.writev),typeof v.destroy=="function"&&(this._destroy=v.destroy),typeof v.final=="function"&&(this._final=v.final)),l.call(this)}N.prototype.pipe=function(){E(this,new L)};function U(v,b){var P=new x;E(v,P),process.nextTick(b,P)}function H(v,b,P,q){var j;return P===null?j=new p:typeof P!="string"&&!b.objectMode&&(j=new B("chunk",["string","Buffer"],P)),j?(E(v,j),process.nextTick(q,j),!1):!0}N.prototype.write=function(v,b,P){var q=this._writableState,j=!1,o=!q.objectMode&&i(v);return o&&!y.isBuffer(v)&&(v=h(v)),typeof b=="function"&&(P=b,b=null),o?b="buffer":b||(b=q.defaultEncoding),typeof P!="function"&&(P=m),q.ending?U(this,P):(o||H(this,q,v,P))&&(q.pendingcb++,j=J(this,q,o,v,b,P)),j},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var v=this._writableState;v.corked&&(v.corked--,!v.writing&&!v.corked&&!v.bufferProcessing&&v.bufferedRequest&&se(this,v))},N.prototype.setDefaultEncoding=function(b){if(typeof b=="string"&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new A(b);return this._writableState.defaultEncoding=b,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(v,b,P){return!v.objectMode&&v.decodeStrings!==!1&&typeof b=="string"&&(b=y.from(b,P)),b}Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function J(v,b,P,q,j,o){if(!P){var u=Q(b,q,j);q!==u&&(P=!0,j="buffer",q=u)}var D=b.objectMode?1:q.length;b.length+=D;var O=b.length<b.highWaterMark;if(O||(b.needDrain=!0),b.writing||b.corked){var V=b.lastBufferedRequest;b.lastBufferedRequest={chunk:q,encoding:j,isBuf:P,callback:o,next:null},V?V.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else ee(v,b,!1,D,q,j,o);return O}function ee(v,b,P,q,j,o,u){b.writelen=q,b.writecb=u,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new T("write")):P?v._writev(j,b.onwrite):v._write(j,o,b.onwrite),b.sync=!1}function oe(v,b,P,q,j){--b.pendingcb,P?(process.nextTick(j,q),process.nextTick(re,v,b),v._writableState.errorEmitted=!0,E(v,q)):(j(q),v._writableState.errorEmitted=!0,E(v,q),re(v,b))}function de(v){v.writing=!1,v.writecb=null,v.length-=v.writelen,v.writelen=0}function xe(v,b){var P=v._writableState,q=P.sync,j=P.writecb;if(typeof j!="function")throw new _;if(de(P),b)oe(v,P,q,b,j);else{var o=ye(P)||v.destroyed;!o&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&se(v,P),q?process.nextTick(ie,v,P,o,j):ie(v,P,o,j)}}function ie(v,b,P,q){P||pe(v,b),b.pendingcb--,q(),re(v,b)}function pe(v,b){b.length===0&&b.needDrain&&(b.needDrain=!1,v.emit("drain"))}function se(v,b){b.bufferProcessing=!0;var P=b.bufferedRequest;if(v._writev&&P&&P.next){var q=b.bufferedRequestCount,j=new Array(q),o=b.corkedRequestsFree;o.entry=P;for(var u=0,D=!0;P;)j[u]=P,P.isBuf||(D=!1),P=P.next,u+=1;j.allBuffers=D,ee(v,b,!0,b.length,j,"",o.finish),b.pendingcb++,b.lastBufferedRequest=null,o.next?(b.corkedRequestsFree=o.next,o.next=null):b.corkedRequestsFree=new a(b),b.bufferedRequestCount=0}else{for(;P;){var O=P.chunk,V=P.encoding,r=P.callback,e=b.objectMode?1:O.length;if(ee(v,b,!1,e,O,V,r),P=P.next,b.bufferedRequestCount--,b.writing)break}P===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=P,b.bufferProcessing=!1}N.prototype._write=function(v,b,P){P(new C("_write()"))},N.prototype._writev=null,N.prototype.end=function(v,b,P){var q=this._writableState;return typeof v=="function"?(P=v,v=null,b=null):typeof b=="function"&&(P=b,b=null),v!=null&&this.write(v,b),q.corked&&(q.corked=1,this.uncork()),q.ending||me(this,q,P),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ye(v){return v.ending&&v.length===0&&v.bufferedRequest===null&&!v.finished&&!v.writing}function Y(v,b){v._final(function(P){b.pendingcb--,P&&E(v,P),b.prefinished=!0,v.emit("prefinish"),re(v,b)})}function Z(v,b){!b.prefinished&&!b.finalCalled&&(typeof v._final=="function"&&!b.destroyed?(b.pendingcb++,b.finalCalled=!0,process.nextTick(Y,v,b)):(b.prefinished=!0,v.emit("prefinish")))}function re(v,b){var P=ye(b);if(P&&(Z(v,b),b.pendingcb===0&&(b.finished=!0,v.emit("finish"),b.autoDestroy))){var q=v._readableState;(!q||q.autoDestroy&&q.endEmitted)&&v.destroy()}return P}function me(v,b,P){b.ending=!0,re(v,b),P&&(b.finished?process.nextTick(P):v.once("finish",P)),b.ended=!0,v.writable=!1}function Ee(v,b,P){var q=v.entry;for(v.entry=null;q;){var j=q.callback;b.pendingcb--,j(P),q=q.next}b.corkedRequestsFree.next=v}return Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}}),N.prototype.destroy=d.destroy,N.prototype._undestroy=d.undestroy,N.prototype._destroy=function(v,b){b(v)},Ge}var Ye,qt;function ge(){if(qt)return Ye;qt=1;var a=Object.keys||function(g){var F=[];for(var R in g)F.push(R);return F};Ye=h;var n=fr(),f=ur();be()(h,n);for(var l=a(f.prototype),y=0;y<l.length;y++){var c=l[y];h.prototype[c]||(h.prototype[c]=f.prototype[c])}function h(g){if(!(this instanceof h))return new h(g);n.call(this,g),f.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function i(){this._writableState.ended||process.nextTick(d,this)}function d(g){g.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(F){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=F,this._writableState.destroyed=F)}}),Ye}var Xe={},Le={exports:{}};var Ht;function On(){return Ht||(Ht=1,(function(a,n){var f=Re(),l=f.Buffer;function y(h,i){for(var d in h)i[d]=h[d]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?a.exports=f:(y(f,n),n.Buffer=c);function c(h,i,d){return l(h,i,d)}c.prototype=Object.create(l.prototype),y(l,c),c.from=function(h,i,d){if(typeof h=="number")throw new TypeError("Argument must not be a number");return l(h,i,d)},c.alloc=function(h,i,d){if(typeof h!="number")throw new TypeError("Argument must be a number");var g=l(h);return i!==void 0?typeof d=="string"?g.fill(i,d):g.fill(i):g.fill(0),g},c.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return l(h)},c.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(h)}})(Le,Le.exports)),Le.exports}var jt;function Wt(){if(jt)return Xe;jt=1;var a=On().Buffer,n=a.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(p){if(!p)return"utf8";for(var x;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(x)return;p=(""+p).toLowerCase(),x=!0}}function l(p){var x=f(p);if(typeof x!="string"&&(a.isEncoding===n||!n(p)))throw new Error("Unknown encoding: "+p);return x||p}Xe.StringDecoder=y;function y(p){this.encoding=l(p);var x;switch(this.encoding){case"utf16le":this.text=R,this.end=B,x=4;break;case"utf8":this.fillLast=d,x=4;break;case"base64":this.text=C,this.end=_,x=3;break;default:this.write=L,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(x)}y.prototype.write=function(p){if(p.length===0)return"";var x,A;if(this.lastNeed){if(x=this.fillLast(p),x===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<p.length?x?x+this.text(p,A):this.text(p,A):x||""},y.prototype.end=F,y.prototype.text=g,y.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function c(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function h(p,x,A){var E=x.length-1;if(E<A)return 0;var m=c(x[E]);return m>=0?(m>0&&(p.lastNeed=m-1),m):--E<A||m===-2?0:(m=c(x[E]),m>=0?(m>0&&(p.lastNeed=m-2),m):--E<A||m===-2?0:(m=c(x[E]),m>=0?(m>0&&(m===2?m=0:p.lastNeed=m-3),m):0))}function i(p,x,A){if((x[0]&192)!==128)return p.lastNeed=0,"";if(p.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return p.lastNeed=1,"";if(p.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return p.lastNeed=2,""}}function d(p){var x=this.lastTotal-this.lastNeed,A=i(this,p);if(A!==void 0)return A;if(this.lastNeed<=p.length)return p.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,x,0,p.length),this.lastNeed-=p.length}function g(p,x){var A=h(this,p,x);if(!this.lastNeed)return p.toString("utf8",x);this.lastTotal=A;var E=p.length-(A-this.lastNeed);return p.copy(this.lastChar,0,E),p.toString("utf8",x,E)}function F(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+"":x}function R(p,x){if((p.length-x)%2===0){var A=p.toString("utf16le",x);if(A){var E=A.charCodeAt(A.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",x,p.length-1)}function B(p){var x=p&&p.length?this.write(p):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,A)}return x}function C(p,x){var A=(p.length-x)%3;return A===0?p.toString("base64",x):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",x,p.length-A))}function _(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function L(p){return p.toString(this.encoding)}function T(p){return p&&p.length?this.write(p):""}return Xe}var Qe,Kt;function xt(){if(Kt)return Qe;Kt=1;var a=ve().codes.ERR_STREAM_PREMATURE_CLOSE;function n(c){var h=!1;return function(){if(!h){h=!0;for(var i=arguments.length,d=new Array(i),g=0;g<i;g++)d[g]=arguments[g];c.apply(this,d)}}}function f(){}function l(c){return c.setHeader&&typeof c.abort=="function"}function y(c,h,i){if(typeof h=="function")return y(c,null,h);h||(h={}),i=n(i||f);var d=h.readable||h.readable!==!1&&c.readable,g=h.writable||h.writable!==!1&&c.writable,F=function(){c.writable||B()},R=c._writableState&&c._writableState.finished,B=function(){g=!1,R=!0,d||i.call(c)},C=c._readableState&&c._readableState.endEmitted,_=function(){d=!1,C=!0,g||i.call(c)},L=function(A){i.call(c,A)},T=function(){var A;if(d&&!C)return(!c._readableState||!c._readableState.ended)&&(A=new a),i.call(c,A);if(g&&!R)return(!c._writableState||!c._writableState.ended)&&(A=new a),i.call(c,A)},p=function(){c.req.on("finish",B)};return l(c)?(c.on("complete",B),c.on("abort",T),c.req?p():c.on("request",p)):g&&!c._writableState&&(c.on("end",F),c.on("close",F)),c.on("end",_),c.on("finish",B),h.error!==!1&&c.on("error",L),c.on("close",T),function(){c.removeListener("complete",B),c.removeListener("abort",T),c.removeListener("request",p),c.req&&c.req.removeListener("finish",B),c.removeListener("end",F),c.removeListener("close",F),c.removeListener("finish",B),c.removeListener("end",_),c.removeListener("error",L),c.removeListener("close",T)}}return Qe=y,Qe}var Ze,$t;function qn(){if($t)return Ze;$t=1;var a;function n(A,E,m){return E=f(E),E in A?Object.defineProperty(A,E,{value:m,enumerable:!0,configurable:!0,writable:!0}):A[E]=m,A}function f(A){var E=l(A,"string");return typeof E=="symbol"?E:String(E)}function l(A,E){if(typeof A!="object"||A===null)return A;var m=A[Symbol.toPrimitive];if(m!==void 0){var S=m.call(A,E);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(A)}var y=xt(),c=Symbol("lastResolve"),h=Symbol("lastReject"),i=Symbol("error"),d=Symbol("ended"),g=Symbol("lastPromise"),F=Symbol("handlePromise"),R=Symbol("stream");function B(A,E){return{value:A,done:E}}function C(A){var E=A[c];if(E!==null){var m=A[R].read();m!==null&&(A[g]=null,A[c]=null,A[h]=null,E(B(m,!1)))}}function _(A){process.nextTick(C,A)}function L(A,E){return function(m,S){A.then(function(){if(E[d]){m(B(void 0,!0));return}E[F](m,S)},S)}}var T=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((a={get stream(){return this[R]},next:function(){var E=this,m=this[i];if(m!==null)return Promise.reject(m);if(this[d])return Promise.resolve(B(void 0,!0));if(this[R].destroyed)return new Promise(function(U,H){process.nextTick(function(){E[i]?H(E[i]):U(B(void 0,!0))})});var S=this[g],I;if(S)I=new Promise(L(S,this));else{var N=this[R].read();if(N!==null)return Promise.resolve(B(N,!1));I=new Promise(this[F])}return this[g]=I,I}},n(a,Symbol.asyncIterator,function(){return this}),n(a,"return",function(){var E=this;return new Promise(function(m,S){E[R].destroy(null,function(I){if(I){S(I);return}m(B(void 0,!0))})})}),a),T),x=function(E){var m,S=Object.create(p,(m={},n(m,R,{value:E,writable:!0}),n(m,c,{value:null,writable:!0}),n(m,h,{value:null,writable:!0}),n(m,i,{value:null,writable:!0}),n(m,d,{value:E._readableState.endEmitted,writable:!0}),n(m,F,{value:function(N,U){var H=S[R].read();H?(S[g]=null,S[c]=null,S[h]=null,N(B(H,!1))):(S[c]=N,S[h]=U)},writable:!0}),m));return S[g]=null,y(E,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=S[h];N!==null&&(S[g]=null,S[c]=null,S[h]=null,N(I)),S[i]=I;return}var U=S[c];U!==null&&(S[g]=null,S[c]=null,S[h]=null,U(B(void 0,!0))),S[d]=!0}),E.on("readable",_.bind(null,S)),S};return Ze=x,Ze}var Je,zt;function Hn(){return zt||(zt=1,Je=function(){throw new Error("Readable.from is not available in the browser")}),Je}var et,Vt;function fr(){if(Vt)return et;Vt=1,et=U;var a;U.ReadableState=N,Ne().EventEmitter;var n=function(u,D){return u.listeners(D).length},f=ir(),l=Re().Buffer,y=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(o){return l.from(o)}function h(o){return l.isBuffer(o)||o instanceof y}var i=ar,d;i&&i.debuglog?d=i.debuglog("stream"):d=function(){};var g=In(),F=or(),R=sr(),B=R.getHighWaterMark,C=ve().codes,_=C.ERR_INVALID_ARG_TYPE,L=C.ERR_STREAM_PUSH_AFTER_EOF,T=C.ERR_METHOD_NOT_IMPLEMENTED,p=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x,A,E;be()(U,f);var m=F.errorOrDestroy,S=["error","close","destroy","pause","resume"];function I(o,u,D){if(typeof o.prependListener=="function")return o.prependListener(u,D);!o._events||!o._events[u]?o.on(u,D):Array.isArray(o._events[u])?o._events[u].unshift(D):o._events[u]=[D,o._events[u]]}function N(o,u,D){a=a||ge(),o=o||{},typeof D!="boolean"&&(D=u instanceof a),this.objectMode=!!o.objectMode,D&&(this.objectMode=this.objectMode||!!o.readableObjectMode),this.highWaterMark=B(this,o,"readableHighWaterMark",D),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=o.emitClose!==!1,this.autoDestroy=!!o.autoDestroy,this.destroyed=!1,this.defaultEncoding=o.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,o.encoding&&(x||(x=Wt().StringDecoder),this.decoder=new x(o.encoding),this.encoding=o.encoding)}function U(o){if(a=a||ge(),!(this instanceof U))return new U(o);var u=this instanceof a;this._readableState=new N(o,this,u),this.readable=!0,o&&(typeof o.read=="function"&&(this._read=o.read),typeof o.destroy=="function"&&(this._destroy=o.destroy)),f.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),U.prototype.destroy=F.destroy,U.prototype._undestroy=F.undestroy,U.prototype._destroy=function(o,u){u(o)},U.prototype.push=function(o,u){var D=this._readableState,O;return D.objectMode?O=!0:typeof o=="string"&&(u=u||D.defaultEncoding,u!==D.encoding&&(o=l.from(o,u),u=""),O=!0),H(this,o,u,!1,O)},U.prototype.unshift=function(o){return H(this,o,null,!0,!1)};function H(o,u,D,O,V){d("readableAddChunk",u);var r=o._readableState;if(u===null)r.reading=!1,xe(o,r);else{var e;if(V||(e=J(r,u)),e)m(o,e);else if(r.objectMode||u&&u.length>0)if(typeof u!="string"&&!r.objectMode&&Object.getPrototypeOf(u)!==l.prototype&&(u=c(u)),O)r.endEmitted?m(o,new p):Q(o,r,u,!0);else if(r.ended)m(o,new L);else{if(r.destroyed)return!1;r.reading=!1,r.decoder&&!D?(u=r.decoder.write(u),r.objectMode||u.length!==0?Q(o,r,u,!1):se(o,r)):Q(o,r,u,!1)}else O||(r.reading=!1,se(o,r))}return!r.ended&&(r.length<r.highWaterMark||r.length===0)}function Q(o,u,D,O){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,o.emit("data",D)):(u.length+=u.objectMode?1:D.length,O?u.buffer.unshift(D):u.buffer.push(D),u.needReadable&&ie(o)),se(o,u)}function J(o,u){var D;return!h(u)&&typeof u!="string"&&u!==void 0&&!o.objectMode&&(D=new _("chunk",["string","Buffer","Uint8Array"],u)),D}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(o){x||(x=Wt().StringDecoder);var u=new x(o);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var D=this._readableState.buffer.head,O="";D!==null;)O+=u.write(D.data),D=D.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var ee=1073741824;function oe(o){return o>=ee?o=ee:(o--,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o++),o}function de(o,u){return o<=0||u.length===0&&u.ended?0:u.objectMode?1:o!==o?u.flowing&&u.length?u.buffer.head.data.length:u.length:(o>u.highWaterMark&&(u.highWaterMark=oe(o)),o<=u.length?o:u.ended?u.length:(u.needReadable=!0,0))}U.prototype.read=function(o){d("read",o),o=parseInt(o,10);var u=this._readableState,D=o;if(o!==0&&(u.emittedReadable=!1),o===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return d("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?P(this):ie(this),null;if(o=de(o,u),o===0&&u.ended)return u.length===0&&P(this),null;var O=u.needReadable;d("need readable",O),(u.length===0||u.length-o<u.highWaterMark)&&(O=!0,d("length less than watermark",O)),u.ended||u.reading?(O=!1,d("reading or ended",O)):O&&(d("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(o=de(D,u)));var V;return o>0?V=b(o,u):V=null,V===null?(u.needReadable=u.length<=u.highWaterMark,o=0):(u.length-=o,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),D!==o&&u.ended&&P(this)),V!==null&&this.emit("data",V),V};function xe(o,u){if(d("onEofChunk"),!u.ended){if(u.decoder){var D=u.decoder.end();D&&D.length&&(u.buffer.push(D),u.length+=u.objectMode?1:D.length)}u.ended=!0,u.sync?ie(o):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,pe(o)))}}function ie(o){var u=o._readableState;d("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(d("emitReadable",u.flowing),u.emittedReadable=!0,process.nextTick(pe,o))}function pe(o){var u=o._readableState;d("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(o.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,v(o)}function se(o,u){u.readingMore||(u.readingMore=!0,process.nextTick(ye,o,u))}function ye(o,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var D=u.length;if(d("maybeReadMore read 0"),o.read(0),D===u.length)break}u.readingMore=!1}U.prototype._read=function(o){m(this,new T("_read()"))},U.prototype.pipe=function(o,u){var D=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=o;break;case 1:O.pipes=[O.pipes,o];break;default:O.pipes.push(o);break}O.pipesCount+=1,d("pipe count=%d opts=%j",O.pipesCount,u);var V=(!u||u.end!==!1)&&o!==process.stdout&&o!==process.stderr,r=V?t:X;O.endEmitted?process.nextTick(r):D.once("end",r),o.on("unpipe",e);function e($,te){d("onunpipe"),$===D&&te&&te.hasUnpiped===!1&&(te.hasUnpiped=!0,M())}function t(){d("onend"),o.end()}var s=Y(D);o.on("drain",s);var w=!1;function M(){d("cleanup"),o.removeListener("close",K),o.removeListener("finish",z),o.removeListener("drain",s),o.removeListener("error",W),o.removeListener("unpipe",e),D.removeListener("end",t),D.removeListener("end",X),D.removeListener("data",k),w=!0,O.awaitDrain&&(!o._writableState||o._writableState.needDrain)&&s()}D.on("data",k);function k($){d("ondata");var te=o.write($);d("dest.write",te),te===!1&&((O.pipesCount===1&&O.pipes===o||O.pipesCount>1&&j(O.pipes,o)!==-1)&&!w&&(d("false write response, pause",O.awaitDrain),O.awaitDrain++),D.pause())}function W($){d("onerror",$),X(),o.removeListener("error",W),n(o,"error")===0&&m(o,$)}I(o,"error",W);function K(){o.removeListener("finish",z),X()}o.once("close",K);function z(){d("onfinish"),o.removeListener("close",K),X()}o.once("finish",z);function X(){d("unpipe"),D.unpipe(o)}return o.emit("pipe",D),O.flowing||(d("pipe resume"),D.resume()),o};function Y(o){return function(){var D=o._readableState;d("pipeOnDrain",D.awaitDrain),D.awaitDrain&&D.awaitDrain--,D.awaitDrain===0&&n(o,"data")&&(D.flowing=!0,v(o))}}U.prototype.unpipe=function(o){var u=this._readableState,D={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return o&&o!==u.pipes?this:(o||(o=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,o&&o.emit("unpipe",this,D),this);if(!o){var O=u.pipes,V=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var r=0;r<V;r++)O[r].emit("unpipe",this,{hasUnpiped:!1});return this}var e=j(u.pipes,o);return e===-1?this:(u.pipes.splice(e,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),o.emit("unpipe",this,D),this)},U.prototype.on=function(o,u){var D=f.prototype.on.call(this,o,u),O=this._readableState;return o==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):o==="readable"&&!O.endEmitted&&!O.readableListening&&(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,d("on readable",O.length,O.reading),O.length?ie(this):O.reading||process.nextTick(re,this)),D},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(o,u){var D=f.prototype.removeListener.call(this,o,u);return o==="readable"&&process.nextTick(Z,this),D},U.prototype.removeAllListeners=function(o){var u=f.prototype.removeAllListeners.apply(this,arguments);return(o==="readable"||o===void 0)&&process.nextTick(Z,this),u};function Z(o){var u=o._readableState;u.readableListening=o.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:o.listenerCount("data")>0&&o.resume()}function re(o){d("readable nexttick read 0"),o.read(0)}U.prototype.resume=function(){var o=this._readableState;return o.flowing||(d("resume"),o.flowing=!o.readableListening,me(this,o)),o.paused=!1,this};function me(o,u){u.resumeScheduled||(u.resumeScheduled=!0,process.nextTick(Ee,o,u))}function Ee(o,u){d("resume",u.reading),u.reading||o.read(0),u.resumeScheduled=!1,o.emit("resume"),v(o),u.flowing&&!u.reading&&o.read(0)}U.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function v(o){var u=o._readableState;for(d("flow",u.flowing);u.flowing&&o.read()!==null;);}U.prototype.wrap=function(o){var u=this,D=this._readableState,O=!1;o.on("end",function(){if(d("wrapped end"),D.decoder&&!D.ended){var e=D.decoder.end();e&&e.length&&u.push(e)}u.push(null)}),o.on("data",function(e){if(d("wrapped data"),D.decoder&&(e=D.decoder.write(e)),!(D.objectMode&&e==null)&&!(!D.objectMode&&(!e||!e.length))){var t=u.push(e);t||(O=!0,o.pause())}});for(var V in o)this[V]===void 0&&typeof o[V]=="function"&&(this[V]=(function(t){return function(){return o[t].apply(o,arguments)}})(V));for(var r=0;r<S.length;r++)o.on(S[r],this.emit.bind(this,S[r]));return this._read=function(e){d("wrapped _read",e),O&&(O=!1,o.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return A===void 0&&(A=qn()),A(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),U._fromList=b,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function b(o,u){if(u.length===0)return null;var D;return u.objectMode?D=u.buffer.shift():!o||o>=u.length?(u.decoder?D=u.buffer.join(""):u.buffer.length===1?D=u.buffer.first():D=u.buffer.concat(u.length),u.buffer.clear()):D=u.buffer.consume(o,u.decoder),D}function P(o){var u=o._readableState;d("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,process.nextTick(q,u,o))}function q(o,u){if(d("endReadableNT",o.endEmitted,o.length),!o.endEmitted&&o.length===0&&(o.endEmitted=!0,u.readable=!1,u.emit("end"),o.autoDestroy)){var D=u._writableState;(!D||D.autoDestroy&&D.finished)&&u.destroy()}}typeof Symbol=="function"&&(U.from=function(o,u){return E===void 0&&(E=Hn()),E(U,o,u)});function j(o,u){for(var D=0,O=o.length;D<O;D++)if(o[D]===u)return D;return-1}return et}var tt,Gt;function lr(){if(Gt)return tt;Gt=1,tt=i;var a=ve().codes,n=a.ERR_METHOD_NOT_IMPLEMENTED,f=a.ERR_MULTIPLE_CALLBACK,l=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=a.ERR_TRANSFORM_WITH_LENGTH_0,c=ge();be()(i,c);function h(F,R){var B=this._transformState;B.transforming=!1;var C=B.writecb;if(C===null)return this.emit("error",new f);B.writechunk=null,B.writecb=null,R!=null&&this.push(R),C(F);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function i(F){if(!(this instanceof i))return new i(F);c.call(this,F),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,F&&(typeof F.transform=="function"&&(this._transform=F.transform),typeof F.flush=="function"&&(this._flush=F.flush)),this.on("prefinish",d)}function d(){var F=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(R,B){g(F,R,B)}):g(this,null,null)}i.prototype.push=function(F,R){return this._transformState.needTransform=!1,c.prototype.push.call(this,F,R)},i.prototype._transform=function(F,R,B){B(new n("_transform()"))},i.prototype._write=function(F,R,B){var C=this._transformState;if(C.writecb=B,C.writechunk=F,C.writeencoding=R,!C.transforming){var _=this._readableState;(C.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},i.prototype._read=function(F){var R=this._transformState;R.writechunk!==null&&!R.transforming?(R.transforming=!0,this._transform(R.writechunk,R.writeencoding,R.afterTransform)):R.needTransform=!0},i.prototype._destroy=function(F,R){c.prototype._destroy.call(this,F,function(B){R(B)})};function g(F,R,B){if(R)return F.emit("error",R);if(B!=null&&F.push(B),F._writableState.length)throw new y;if(F._transformState.transforming)throw new l;return F.push(null)}return tt}var rt,Yt;function jn(){if(Yt)return rt;Yt=1,rt=n;var a=lr();be()(n,a);function n(f){if(!(this instanceof n))return new n(f);a.call(this,f)}return n.prototype._transform=function(f,l,y){y(null,f)},rt}var nt,Xt;function Wn(){if(Xt)return nt;Xt=1;var a;function n(B){var C=!1;return function(){C||(C=!0,B.apply(void 0,arguments))}}var f=ve().codes,l=f.ERR_MISSING_ARGS,y=f.ERR_STREAM_DESTROYED;function c(B){if(B)throw B}function h(B){return B.setHeader&&typeof B.abort=="function"}function i(B,C,_,L){L=n(L);var T=!1;B.on("close",function(){T=!0}),a===void 0&&(a=xt()),a(B,{readable:C,writable:_},function(x){if(x)return L(x);T=!0,L()});var p=!1;return function(x){if(!T&&!p){if(p=!0,h(B))return B.abort();if(typeof B.destroy=="function")return B.destroy();L(x||new y("pipe"))}}}function d(B){B()}function g(B,C){return B.pipe(C)}function F(B){return!B.length||typeof B[B.length-1]!="function"?c:B.pop()}function R(){for(var B=arguments.length,C=new Array(B),_=0;_<B;_++)C[_]=arguments[_];var L=F(C);if(Array.isArray(C[0])&&(C=C[0]),C.length<2)throw new l("streams");var T,p=C.map(function(x,A){var E=A<C.length-1,m=A>0;return i(x,E,m,function(S){T||(T=S),S&&p.forEach(d),!E&&(p.forEach(d),L(T))})});return C.reduce(g)}return nt=R,nt}var it,Qt;function Kn(){if(Qt)return it;Qt=1,it=f;var a=Ne().EventEmitter,n=be();n(f,a),f.Readable=fr(),f.Writable=ur(),f.Duplex=ge(),f.Transform=lr(),f.PassThrough=jn(),f.finished=xt(),f.pipeline=Wn(),f.Stream=f;function f(){a.call(this)}return f.prototype.pipe=function(l,y){var c=this;function h(C){l.writable&&l.write(C)===!1&&c.pause&&c.pause()}c.on("data",h);function i(){c.readable&&c.resume&&c.resume()}l.on("drain",i),!l._isStdio&&(!y||y.end!==!1)&&(c.on("end",g),c.on("close",F));var d=!1;function g(){d||(d=!0,l.end())}function F(){d||(d=!0,typeof l.destroy=="function"&&l.destroy())}function R(C){if(B(),a.listenerCount(this,"error")===0)throw C}c.on("error",R),l.on("error",R);function B(){c.removeListener("data",h),l.removeListener("drain",i),c.removeListener("end",g),c.removeListener("close",F),c.removeListener("error",R),l.removeListener("error",R),c.removeListener("end",B),c.removeListener("close",B),l.removeListener("close",B)}return c.on("end",B),c.on("close",B),l.on("close",B),l.emit("pipe",c),l},it}var $n=Kn();async function*at(a,n,f){let l=1;const y={chunks:[],length:0};for await(const c of f(a))for(y.chunks.push(c),y.length+=c.byteLength;y.length>n;){const h=y.chunks.length>1?ue.Buffer.concat(y.chunks):y.chunks[0];yield{partNumber:l,data:h.subarray(0,n)},y.chunks=[h.subarray(n)],y.length=y.chunks[0].byteLength,l+=1}yield{partNumber:l,data:y.chunks.length!==1?ue.Buffer.concat(y.chunks):y.chunks[0],lastPart:!0}}async function*Zt(a,n){let f=1,l=0,y=n;for(;y<a.byteLength;)yield{partNumber:f,data:a.subarray(l,y)},f+=1,l=y,y=l+n;yield{partNumber:f,data:a.subarray(l),lastPart:!0}}async function*zn(a){for await(const n of a)ue.Buffer.isBuffer(n)||n instanceof Uint8Array?yield n:yield ue.Buffer.from(n)}async function*Jt(a){const n=a.getReader();try{for(;;){const{done:f,value:l}=await n.read();if(f)return;ue.Buffer.isBuffer(l)||l instanceof Uint8Array?yield l:yield ue.Buffer.from(l)}}catch(f){throw f}finally{n.releaseLock()}}const Vn=(a,n)=>{if(a instanceof Uint8Array)return Zt(a,n);if(a instanceof $n.Readable)return at(a,n,zn);if(a instanceof String||typeof a=="string")return Zt(ue.Buffer.from(a),n);if(typeof a.stream=="function")return at(a.stream(),n,Jt);if(a instanceof ReadableStream)return at(a,n,Jt);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")};class Ae extends qe.EventEmitter{static MIN_PART_SIZE=1024*1024*5;MAX_PARTS=1e4;queueSize=4;partSize;leavePartsOnError=!1;tags=[];client;params;totalBytes;totalBytesSource;bytesUploadedSoFar;abortController;concurrentUploaders=[];createMultiPartPromise;abortMultipartUploadCommand=null;uploadedParts=[];uploadEnqueuedPartsCount=0;expectedPartsCount;uploadId;uploadEvent;isMultiPart=!0;singleUploadResult;sent=!1;constructor(n){if(super(),this.queueSize=n.queueSize||this.queueSize,this.leavePartsOnError=n.leavePartsOnError||this.leavePartsOnError,this.tags=n.tags||this.tags,this.client=n.client,this.params=n.params,!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");this.totalBytes=this.params.ContentLength??Te(this.params.Body),this.totalBytesSource=kn(this.params.Body,this.params.ContentLength),this.bytesUploadedSoFar=0,this.abortController=n.abortController??new Tn,this.partSize=n.partSize||Math.max(Ae.MIN_PART_SIZE,Math.floor((this.totalBytes||0)/this.MAX_PARTS)),this.totalBytes!==void 0&&(this.expectedPartsCount=Math.ceil(this.totalBytes/this.partSize)),this.__validateInput()}async abort(){this.abortController.abort()}async done(){if(this.sent)throw new Error("@aws-sdk/lib-storage: this instance of Upload has already executed .done(). Create a new instance.");return this.sent=!0,await Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])}on(n,f){return this.uploadEvent=n,super.on(n,f)}async __uploadUsingPut(n){this.isMultiPart=!1;const f={...this.params,Body:n.data},l=this.client.config,y=l.requestHandler,c=y instanceof qe.EventEmitter?y:null,h=_=>{this.bytesUploadedSoFar=_.loaded,this.totalBytes=_.total,this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:n.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})};c!==null&&c.on("xhr.upload.progress",h);const i=await Promise.all([this.client.send(new Rt(f)),l?.endpoint?.()]),d=i[0];let g=i[1];if(g||(g=Mr(await kr(f,Rt,{...l}))),!g)throw new Error('Could not resolve endpoint from S3 "client.config.endpoint()" nor EndpointsV2.');c!==null&&c.off("xhr.upload.progress",h);const F=this.params.Key.split("/").map(_=>St(_)).join("/"),R=St(this.params.Bucket),B=(()=>{const _=g.hostname.startsWith(`${R}.`),L=this.client.config.forcePathStyle,T=g.port?`:${g.port}`:"";return L?`${g.protocol}//${g.hostname}${T}/${R}/${F}`:_?`${g.protocol}//${g.hostname}${T}/${F}`:`${g.protocol}//${R}.${g.hostname}${T}/${F}`})();this.singleUploadResult={...d,Bucket:this.params.Bucket,Key:this.params.Key,Location:B};const C=Te(n.data);this.__notifyProgress({loaded:C,total:C,part:1,Key:this.params.Key,Bucket:this.params.Bucket})}async __createMultipartUpload(){const n=await this.client.config.requestChecksumCalculation();if(!this.createMultiPartPromise){const f={...this.params,Body:void 0};n==="WHEN_SUPPORTED"&&(f.ChecksumAlgorithm=this.params.ChecksumAlgorithm||Bn.CRC32),this.createMultiPartPromise=this.client.send(new Cn(f)).then(l=>(this.abortMultipartUploadCommand=new yn({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:l.UploadId}),l))}return this.createMultiPartPromise}async __doConcurrentUpload(n){for await(const f of n){if(this.uploadEnqueuedPartsCount>this.MAX_PARTS)throw new Error(`Exceeded ${this.MAX_PARTS} parts in multipart upload to Bucket: ${this.params.Bucket} Key: ${this.params.Key}.`);if(this.abortController.signal.aborted)return;if(f.partNumber===1&&f.lastPart)return await this.__uploadUsingPut(f);if(!this.uploadId){const{UploadId:g}=await this.__createMultipartUpload();if(this.uploadId=g,this.abortController.signal.aborted)return}const l=Te(f.data)||0,y=this.client.config.requestHandler,c=y instanceof qe.EventEmitter?y:null;let h=0;const i=(g,F)=>{(Number(F.query.partNumber)||-1)===f.partNumber&&(g.total&&l&&(this.bytesUploadedSoFar+=g.loaded-h,h=g.loaded),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:f.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}))};c!==null&&c.on("xhr.upload.progress",i),this.uploadEnqueuedPartsCount+=1,this.__validateUploadPart(f);const d=await this.client.send(new Rn({...this.params,ContentLength:void 0,UploadId:this.uploadId,Body:f.data,PartNumber:f.partNumber}));if(c!==null&&c.off("xhr.upload.progress",i),this.abortController.signal.aborted)return;if(!d.ETag)throw new Error(`Part ${f.partNumber} is missing ETag in UploadPart response. Missing Bucket CORS configuration for ETag header?`);this.uploadedParts.push({PartNumber:f.partNumber,ETag:d.ETag,...d.ChecksumCRC32&&{ChecksumCRC32:d.ChecksumCRC32},...d.ChecksumCRC32C&&{ChecksumCRC32C:d.ChecksumCRC32C},...d.ChecksumSHA1&&{ChecksumSHA1:d.ChecksumSHA1},...d.ChecksumSHA256&&{ChecksumSHA256:d.ChecksumSHA256}}),c===null&&(this.bytesUploadedSoFar+=l),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:f.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})}}async __doMultipartUpload(){const n=Vn(this.params.Body,this.partSize),f=[];for(let y=0;y<this.queueSize;y++){const c=this.__doConcurrentUpload(n).catch(h=>{f.push(h)});this.concurrentUploaders.push(c)}if(await Promise.all(this.concurrentUploaders),f.length>=1)throw await this.markUploadAsAborted(),f[0];if(this.abortController.signal.aborted)throw await this.markUploadAsAborted(),Object.assign(new Error("Upload aborted."),{name:"AbortError"});let l;if(this.isMultiPart){const{expectedPartsCount:y,uploadedParts:c,totalBytes:h,totalBytesSource:i}=this;if(h!==void 0&&y!==void 0&&c.length!==y)throw new Error(`Expected ${y} part(s) but uploaded ${c.length} part(s).
The expected part count is based on the byte-count of the input.params.Body,
which was read from ${i} and is ${h}.
If this is not correct, provide an override value by setting a number
to input.params.ContentLength in bytes.
`);this.uploadedParts.sort((g,F)=>g.PartNumber-F.PartNumber);const d={...this.params,Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}};l=await this.client.send(new gn(d)),typeof l?.Location=="string"&&l.Location.includes("%2F")&&(l.Location=l.Location.replace(/%2F/g,"/"))}else l=this.singleUploadResult;return this.abortMultipartUploadCommand=null,this.tags.length&&await this.client.send(new An({...this.params,Tagging:{TagSet:this.tags}})),l}async markUploadAsAborted(){this.uploadId&&!this.leavePartsOnError&&this.abortMultipartUploadCommand!==null&&(await this.client.send(this.abortMultipartUploadCommand),this.abortMultipartUploadCommand=null)}__notifyProgress(n){this.uploadEvent&&this.emit(this.uploadEvent,n)}async __abortTimeout(n){return new Promise((f,l)=>{n.onabort=()=>{const y=new Error("Upload aborted.");y.name="AbortError",l(y)}})}__validateUploadPart(n){const f=Te(n.data);if(f===void 0)throw new Error(`A dataPart was generated without a measurable data chunk size for part number ${n.partNumber}`);if(!(n.partNumber===1&&n.lastPart)&&!n.lastPart&&f!==this.partSize)throw new Error(`The byte size for part number ${n.partNumber}, size ${f} does not match expected size ${this.partSize}`)}__validateInput(){if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<Ae.MIN_PART_SIZE)throw new Error(`EntityTooSmall: Your proposed upload part size [${this.partSize}] is smaller than the minimum allowed size [${Ae.MIN_PART_SIZE}] (5MB)`);if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")}}function Jn(){const a=mt.c(2),n=Et();let f;return a[0]!==n?(f={mutationFn:Gn,onSuccess:(l,y)=>{n.invalidateQueries({queryKey:["s3","buckets",y.bucket,"objects"]})}},a[0]=n,a[1]=f):f=a[1],gt(f)}async function Gn(a){const{bucket:n,key:f,file:l}=a;try{return await new Ae({client:wt(),params:{Bucket:n,Key:f,Body:l,ContentType:l.type}}).done()}catch{throw new Error("Failed to upload object")}}function ei(){const a=mt.c(2),n=Et();let f;return a[0]!==n?(f={mutationFn:Yn,onSuccess:()=>{n.invalidateQueries({queryKey:["s3","buckets"]})}},a[0]=n,a[1]=f):f=a[1],gt(f)}async function Yn(a){const{bucketName:n}=a;try{const f=new _n({Bucket:n});return await wt().send(f)}catch{throw new Error("Failed to create bucket")}}function ti(){const a=mt.c(2),n=Et();let f;return a[0]!==n?(f={mutationFn:Xn,onSuccess:(l,y)=>{n.invalidateQueries({queryKey:["s3","buckets",y.bucket,"objects"]})}},a[0]=n,a[1]=f):f=a[1],gt(f)}async function Xn(a){const{bucket:n,key:f}=a;try{const l=new Sn({Bucket:n,Key:f});return await wt().send(l)}catch{throw new Error("Failed to delete object")}}export{Jn as a,Pe as b,ti as c,vt as g,ei as u};
