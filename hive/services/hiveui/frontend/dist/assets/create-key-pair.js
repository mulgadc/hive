import{g as O,c as L,u as T,r as R,j as a,B,h as U}from"./index.js";import{a as I,u as z,I as Y}from"./zod.js";import{B as $}from"./back-link.js";import{E as H,L as q}from"./error-banner.js";import{P as G}from"./page-heading.js";import{a as J}from"./ec2.js";import{A as Q,a as V,b as W,c as X,d as Z,e as ee,f as te,g as ae}from"./alert-dialog.js";import{T as se}from"./textarea.js";import{C as le}from"./check.js";import{D as ie}from"./download.js";import"./useMutation.js";const re=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oe=O("triangle-alert",re),ne=2e3;function ce(e){const t=L.c(36),{open:s,keyName:l,keyMaterial:d}=e,g=T(),[S,_]=R.useState(!1);let A;t[0]!==d?(A=async()=>{await navigator.clipboard.writeText(d),_(!0),setTimeout(()=>_(!1),ne)},t[0]=d,t[1]=A):A=t[1];const b=A;let N;t[2]!==d||t[3]!==l?(N=()=>{const P=new Blob([d],{type:"text/plain"}),k=URL.createObjectURL(P),u=document.createElement("a");u.href=k,u.download=`${l}.pem`,u.click(),URL.revokeObjectURL(k)},t[2]=d,t[3]=l,t[4]=N):N=t[4];const C=N;let v;t[5]!==g?(v=()=>{g({to:"/ec2/describe-key-pairs"})},t[5]=g,t[6]=v):v=t[6];const w=v;let j,f;t[7]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx(Q,{children:a.jsx(oe,{className:"text-destructive"})}),f=a.jsx(V,{children:"Save Your Private Key"}),t[7]=j,t[8]=f):(j=t[7],f=t[8]);let i;t[9]!==l?(i=a.jsxs(W,{children:[j,f,a.jsxs(X,{children:["This is your only chance to save the private key file for"," ",a.jsx("strong",{children:l}),". Please download or copy it now. You won't be able to retrieve it again."]})]}),t[9]=l,t[10]=i):i=t[10];let y;t[11]!==d?(y=a.jsx(se,{className:"font-mono text-xs",readOnly:!0,rows:12,value:d}),t[11]=d,t[12]=y):y=t[12];let r;t[13]!==S?(r=S?a.jsxs(a.Fragment,{children:[a.jsx(le,{className:"mr-2 size-4"}),"Copied!"]}):"Copy to Clipboard",t[13]=S,t[14]=r):r=t[14];let o;t[15]!==b||t[16]!==r?(o=a.jsx(B,{className:"flex-1",onClick:b,type:"button",variant:"outline",children:r}),t[15]=b,t[16]=r,t[17]=o):o=t[17];let p;t[18]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(ie,{className:"mr-2 size-4"}),t[18]=p):p=t[18];let n;t[19]!==C?(n=a.jsxs(B,{className:"flex-1",onClick:C,type:"button",variant:"outline",children:[p,"Download .pem File"]}),t[19]=C,t[20]=n):n=t[20];let x;t[21]!==n||t[22]!==o?(x=a.jsxs("div",{className:"flex gap-2",children:[o,n]}),t[21]=n,t[22]=o,t[23]=x):x=t[23];let c;t[24]!==x||t[25]!==y?(c=a.jsxs("div",{className:"space-y-3",children:[y,x]}),t[24]=x,t[25]=y,t[26]=c):c=t[26];let m;t[27]!==w?(m=a.jsx(Z,{children:a.jsx(ee,{onClick:w,children:"Close and Continue"})}),t[27]=w,t[28]=m):m=t[28];let h;t[29]!==c||t[30]!==m||t[31]!==i?(h=a.jsxs(te,{className:"max-w-2xl",children:[i,c,m]}),t[29]=c,t[30]=m,t[31]=i,t[32]=h):h=t[32];let D;return t[33]!==s||t[34]!==h?(D=a.jsx(ae,{open:s,children:h}),t[33]=s,t[34]=h,t[35]=D):D=t[35],D}function be(){const e=L.c(41),t=T(),s=J(),[l,d]=R.useState(null);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={resolver:I(U)},e[0]=g):g=e[0];const{handleSubmit:S,register:_,formState:A}=z(g),{errors:b,isSubmitting:N}=A;let C;e[1]!==s?(C=async E=>{const F=await s.mutateAsync(E);F.KeyMaterial&&d({keyName:E.keyName,material:F.KeyMaterial})},e[1]=s,e[2]=C):C=e[2];const v=C;let w,j;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx($,{to:"/ec2/describe-key-pairs",children:"Back to key pairs"}),j=a.jsx(G,{title:"Create Key Pair"}),e[3]=w,e[4]=j):(w=e[3],j=e[4]);let f;e[5]!==s.error?(f=s.error&&a.jsx(H,{error:s.error,msg:"Failed to create key pair"}),e[5]=s.error,e[6]=f):f=e[6];let i;e[7]!==S||e[8]!==v?(i=S(v),e[7]=S,e[8]=v,e[9]=i):i=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx(q,{htmlFor:"keyName",children:"Key Pair Name"}),e[10]=y):y=e[10];let r;e[11]!==_?(r=_("keyName"),e[11]=_,e[12]=r):r=e[12];let o;e[13]!==r?(o=a.jsx(Y,{id:"keyName",placeholder:"my-key-pair…",...r}),e[13]=r,e[14]=o):o=e[14];let p;e[15]!==b.keyName?(p=b.keyName&&a.jsx("p",{className:"text-destructive text-sm",children:b.keyName.message}),e[15]=b.keyName,e[16]=p):p=e[16];let n;e[17]!==p||e[18]!==o?(n=a.jsxs("div",{className:"space-y-2",children:[y,o,p]}),e[17]=p,e[18]=o,e[19]=n):n=e[19];const x=N||s.isPending;let c;e[20]!==t?(c=()=>t({to:"/ec2/describe-key-pairs"}),e[20]=t,e[21]=c):c=e[21];let m;e[22]!==x||e[23]!==c?(m=a.jsx(B,{disabled:x,onClick:c,type:"button",variant:"outline",children:"Cancel"}),e[22]=x,e[23]=c,e[24]=m):m=e[24];const h=N||s.isPending,D=N||s.isPending?"Creating…":"Create Key Pair";let P;e[25]!==h||e[26]!==D?(P=a.jsx(B,{disabled:h,type:"submit",children:D}),e[25]=h,e[26]=D,e[27]=P):P=e[27];let k;e[28]!==m||e[29]!==P?(k=a.jsxs("div",{className:"flex gap-2",children:[m,P]}),e[28]=m,e[29]=P,e[30]=k):k=e[30];let u;e[31]!==n||e[32]!==k||e[33]!==i?(u=a.jsxs("form",{className:"max-w-4xl space-y-6",onSubmit:i,children:[n,k]}),e[31]=n,e[32]=k,e[33]=i,e[34]=u):u=e[34];let K;e[35]!==l?(K=l&&a.jsx(ce,{keyMaterial:l.material,keyName:l.keyName,open:!!l}),e[35]=l,e[36]=K):K=e[36];let M;return e[37]!==u||e[38]!==K||e[39]!==f?(M=a.jsxs(a.Fragment,{children:[w,j,f,u,K]}),e[37]=u,e[38]=K,e[39]=f,e[40]=M):M=e[40],M}export{be as component};
