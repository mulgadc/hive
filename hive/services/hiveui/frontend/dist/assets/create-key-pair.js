import{f as U,c as R,u as L,r as O,j as a,B as E,g as I}from"./index.js";import{a as z,u as Y,I as $,F as H,b as q,c as G}from"./field.js";import{B as J}from"./back-link.js";import{E as Q}from"./error-banner.js";import{P as V}from"./page-heading.js";import{a as W}from"./ec2.js";import{A as X,a as Z,b as ee,c as te,d as ae,e as se,f as le,g as ie}from"./alert-dialog.js";import{T as re}from"./textarea.js";import{C as oe}from"./check.js";import{D as ne}from"./download.js";import"./useMutation.js";const ce=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],me=U("triangle-alert",ce),de=2e3;function fe(e){const t=R.c(36),{open:s,keyName:l,keyMaterial:d}=e,g=L(),[P,S]=O.useState(!1);let _;t[0]!==d?(_=async()=>{await navigator.clipboard.writeText(d),S(!0),setTimeout(()=>S(!1),de)},t[0]=d,t[1]=_):_=t[1];const b=_;let N;t[2]!==d||t[3]!==l?(N=()=>{const K=new Blob([d],{type:"text/plain"}),k=URL.createObjectURL(K),u=document.createElement("a");u.href=k,u.download=`${l}.pem`,u.click(),URL.revokeObjectURL(k)},t[2]=d,t[3]=l,t[4]=N):N=t[4];const C=N;let v;t[5]!==g?(v=()=>{g({to:"/ec2/describe-key-pairs"})},t[5]=g,t[6]=v):v=t[6];const w=v;let j,f;t[7]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx(X,{children:a.jsx(me,{className:"text-destructive"})}),f=a.jsx(Z,{children:"Save Your Private Key"}),t[7]=j,t[8]=f):(j=t[7],f=t[8]);let i;t[9]!==l?(i=a.jsxs(ee,{children:[j,f,a.jsxs(te,{children:["This is your only chance to save the private key file for"," ",a.jsx("strong",{children:l}),". Please download or copy it now. You won't be able to retrieve it again."]})]}),t[9]=l,t[10]=i):i=t[10];let y;t[11]!==d?(y=a.jsx(re,{className:"font-mono text-xs",readOnly:!0,rows:12,value:d}),t[11]=d,t[12]=y):y=t[12];let x;t[13]!==P?(x=P?a.jsxs(a.Fragment,{children:[a.jsx(oe,{className:"mr-2 size-4"}),"Copied!"]}):"Copy to Clipboard",t[13]=P,t[14]=x):x=t[14];let r;t[15]!==b||t[16]!==x?(r=a.jsx(E,{className:"flex-1",onClick:b,type:"button",variant:"outline",children:x}),t[15]=b,t[16]=x,t[17]=r):r=t[17];let p;t[18]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(ne,{className:"mr-2 size-4"}),t[18]=p):p=t[18];let o;t[19]!==C?(o=a.jsxs(E,{className:"flex-1",onClick:C,type:"button",variant:"outline",children:[p,"Download .pem File"]}),t[19]=C,t[20]=o):o=t[20];let n;t[21]!==o||t[22]!==r?(n=a.jsxs("div",{className:"flex gap-2",children:[r,o]}),t[21]=o,t[22]=r,t[23]=n):n=t[23];let h;t[24]!==n||t[25]!==y?(h=a.jsxs("div",{className:"space-y-3",children:[y,n]}),t[24]=n,t[25]=y,t[26]=h):h=t[26];let c;t[27]!==w?(c=a.jsx(ae,{children:a.jsx(se,{onClick:w,children:"Close and Continue"})}),t[27]=w,t[28]=c):c=t[28];let m;t[29]!==h||t[30]!==c||t[31]!==i?(m=a.jsxs(le,{className:"max-w-2xl",children:[i,h,c]}),t[29]=h,t[30]=c,t[31]=i,t[32]=m):m=t[32];let D;return t[33]!==s||t[34]!==m?(D=a.jsx(ie,{open:s,children:m}),t[33]=s,t[34]=m,t[35]=D):D=t[35],D}function ve(){const e=R.c(42),t=L(),s=W(),[l,d]=O.useState(null);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={resolver:z(I)},e[0]=g):g=e[0];const{handleSubmit:P,register:S,formState:_}=Y(g),{errors:b,isSubmitting:N}=_;let C;e[1]!==s?(C=async T=>{const B=await s.mutateAsync(T);B.KeyMaterial&&d({keyName:T.keyName,material:B.KeyMaterial})},e[1]=s,e[2]=C):C=e[2];const v=C;let w,j;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(J,{to:"/ec2/describe-key-pairs",children:"Back to key pairs"}),j=a.jsx(V,{title:"Create Key Pair"}),e[3]=w,e[4]=j):(w=e[3],j=e[4]);let f;e[5]!==s.error?(f=s.error&&a.jsx(Q,{error:s.error,msg:"Failed to create key pair"}),e[5]=s.error,e[6]=f):f=e[6];let i;e[7]!==P||e[8]!==v?(i=P(v),e[7]=P,e[8]=v,e[9]=i):i=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx(q,{children:a.jsx("label",{htmlFor:"keyName",children:"Key Pair Name"})}),e[10]=y):y=e[10];const x=!!b.keyName;let r;e[11]!==S?(r=S("keyName"),e[11]=S,e[12]=r):r=e[12];let p;e[13]!==x||e[14]!==r?(p=a.jsx($,{"aria-invalid":x,id:"keyName",placeholder:"my-key-pair…",...r}),e[13]=x,e[14]=r,e[15]=p):p=e[15];let o;e[16]!==b.keyName?(o=a.jsx(H,{errors:[b.keyName]}),e[16]=b.keyName,e[17]=o):o=e[17];let n;e[18]!==p||e[19]!==o?(n=a.jsxs(G,{children:[y,p,o]}),e[18]=p,e[19]=o,e[20]=n):n=e[20];const h=N||s.isPending;let c;e[21]!==t?(c=()=>t({to:"/ec2/describe-key-pairs"}),e[21]=t,e[22]=c):c=e[22];let m;e[23]!==h||e[24]!==c?(m=a.jsx(E,{disabled:h,onClick:c,type:"button",variant:"outline",children:"Cancel"}),e[23]=h,e[24]=c,e[25]=m):m=e[25];const D=N||s.isPending,K=N||s.isPending?"Creating…":"Create Key Pair";let k;e[26]!==D||e[27]!==K?(k=a.jsx(E,{disabled:D,type:"submit",children:K}),e[26]=D,e[27]=K,e[28]=k):k=e[28];let u;e[29]!==m||e[30]!==k?(u=a.jsxs("div",{className:"flex gap-2",children:[m,k]}),e[29]=m,e[30]=k,e[31]=u):u=e[31];let A;e[32]!==n||e[33]!==u||e[34]!==i?(A=a.jsxs("form",{className:"max-w-4xl space-y-6",onSubmit:i,children:[n,u]}),e[32]=n,e[33]=u,e[34]=i,e[35]=A):A=e[35];let F;e[36]!==l?(F=l&&a.jsx(fe,{keyMaterial:l.material,keyName:l.keyName,open:!!l}),e[36]=l,e[37]=F):F=e[37];let M;return e[38]!==A||e[39]!==F||e[40]!==f?(M=a.jsxs(a.Fragment,{children:[w,j,f,A,F]}),e[38]=A,e[39]=F,e[40]=f,e[41]=M):M=e[41],M}export{ve as component};
