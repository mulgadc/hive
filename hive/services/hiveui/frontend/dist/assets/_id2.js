import{c as X,bA as ee,u as te,r as le,bB as J,j as l,L as se,bC as ae,B as G,br as ie}from"./index.js";import{u as oe}from"./useSuspenseQuery.js";import{B as q}from"./back-link.js";import{D as T,a as s}from"./detail-row.js";import{E as ne}from"./error-banner.js";import{P as re}from"./page-heading.js";import{b as me,c as ce,d as ue,h as de,a as fe,e as xe,f as he,g as je}from"./alert-dialog.js";import{B as be}from"./badge.js";import{e as ve}from"./ec2.js";import{T as pe}from"./trash-2.js";function Ee(){const e=X.c(78),{id:i}=ee.useParams(),F=te();let C;e[0]!==i?(C=ie(i),e[0]=i,e[1]=C):C=e[1];const{data:U}=oe(C),t=U.Volumes?.[0],a=ve(),[H,Y]=le.useState(!1),W=t?.State==="available"&&(!t.Attachments||t.Attachments.length===0);let _;e[2]!==a||e[3]!==i||e[4]!==F?(_=async()=>{await a.mutateAsync(i),F({to:"/ec2/describe-volumes"})},e[2]=a,e[3]=i,e[4]=F,e[5]=_):_=e[5];const Z=_;if(!t?.VolumeId){let w;return e[6]===Symbol.for("react.memo_cache_sentinel")?(w=l.jsxs(l.Fragment,{children:[l.jsx(q,{to:"/ec2/describe-volumes",children:"Back to volumes"}),l.jsx("p",{className:"text-muted-foreground",children:"Volume not found."})]}),e[6]=w):w=e[6],w}let B;e[7]!==t.CreateTime?(B=J(t.CreateTime),e[7]=t.CreateTime,e[8]=B):B=e[8];const L=B;let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=l.jsx(q,{to:"/ec2/describe-volumes",children:"Back to volumes"}),e[9]=E):E=e[9];let o;e[10]!==a.error?(o=a.error&&l.jsx(ne,{error:a.error,msg:"Failed to delete volume"}),e[10]=a.error,e[11]=o):o=e[11];const O=!W;let K;e[12]===Symbol.for("react.memo_cache_sentinel")?(K=()=>Y(!0),e[12]=K):K=e[12];let N;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=l.jsx(pe,{className:"size-4"}),e[13]=N):N=e[13];let n;e[14]!==O?(n=l.jsxs(G,{disabled:O,onClick:K,size:"sm",variant:"destructive",children:[N,"Delete"]}),e[14]=O,e[15]=n):n=e[15];let r;e[16]!==t.State||e[17]!==t.VolumeId?(r=t.State==="available"?l.jsx(se,{className:ae({variant:"outline"}),params:{id:t.VolumeId},to:"/ec2/modify-volume/$id",children:"Resize Volume"}):l.jsx(G,{disabled:!0,variant:"outline",children:"Resize Volume"}),e[16]=t.State,e[17]=t.VolumeId,e[18]=r):r=e[18];let m;e[19]!==t.State?(m=t.State&&l.jsx(be,{variant:t.State==="available"?"default":"outline",children:t.State}),e[19]=t.State,e[20]=m):m=e[20];let c;e[21]!==m||e[22]!==n||e[23]!==r?(c=l.jsxs("div",{className:"flex items-center gap-2",children:[n,r,m]}),e[21]=m,e[22]=n,e[23]=r,e[24]=c):c=e[24];let u;e[25]!==c||e[26]!==t.VolumeId?(u=l.jsx(re,{actions:c,subtitle:"EC2 Volume Details",title:t.VolumeId}),e[25]=c,e[26]=t.VolumeId,e[27]=u):u=e[27];let k;e[28]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx(T.Header,{children:"Volume Information"}),e[28]=k):k=e[28];let d;e[29]!==t.VolumeId?(d=l.jsx(s,{label:"Volume ID",value:t.VolumeId}),e[29]=t.VolumeId,e[30]=d):d=e[30];const $=`${t.Size} GiB`;let f;e[31]!==$?(f=l.jsx(s,{label:"Size",value:$}),e[31]=$,e[32]=f):f=e[32];let x;e[33]!==t.VolumeType?(x=l.jsx(s,{label:"Volume Type",value:t.VolumeType}),e[33]=t.VolumeType,e[34]=x):x=e[34];let h;e[35]!==t.State?(h=l.jsx(s,{label:"State",value:t.State}),e[35]=t.State,e[36]=h):h=e[36];let j;e[37]!==t.AvailabilityZone?(j=l.jsx(s,{label:"Availability Zone",value:t.AvailabilityZone}),e[37]=t.AvailabilityZone,e[38]=j):j=e[38];let b;e[39]!==L?(b=l.jsx(s,{label:"Create Time",value:L}),e[39]=L,e[40]=b):b=e[40];const M=t.Encrypted?"Yes":"No";let v;e[41]!==M?(v=l.jsx(s,{label:"Encrypted",value:M}),e[41]=M,e[42]=v):v=e[42];let p;e[43]!==t.KmsKeyId?(p=l.jsx(s,{label:"KMS Key ID",value:t.KmsKeyId}),e[43]=t.KmsKeyId,e[44]=p):p=e[44];let D;e[45]!==d||e[46]!==f||e[47]!==x||e[48]!==h||e[49]!==j||e[50]!==b||e[51]!==v||e[52]!==p?(D=l.jsxs(T,{children:[k,l.jsxs(T.Content,{children:[d,f,x,h,j,b,v,p]})]}),e[45]=d,e[46]=f,e[47]=x,e[48]=h,e[49]=j,e[50]=b,e[51]=v,e[52]=p,e[53]=D):D=e[53];let g;e[54]!==t.Attachments?(g=t.Attachments&&t.Attachments.length>0&&l.jsxs(T,{children:[l.jsx(T.Header,{children:"Attachments"}),t.Attachments.map(De)]}),e[54]=t.Attachments,e[55]=g):g=e[55];let y;e[56]!==u||e[57]!==D||e[58]!==g?(y=l.jsxs("div",{className:"space-y-6",children:[u,D,g]}),e[56]=u,e[57]=D,e[58]=g,e[59]=y):y=e[59];let P;e[60]===Symbol.for("react.memo_cache_sentinel")?(P=l.jsx(fe,{children:"Delete Volume"}),e[60]=P):P=e[60];let V;e[61]!==t.VolumeId?(V=l.jsxs(me,{children:[P,l.jsxs(ce,{children:['Are you sure you want to delete the volume "',t.VolumeId,'"? This action cannot be undone.']})]}),e[61]=t.VolumeId,e[62]=V):V=e[62];let z;e[63]===Symbol.for("react.memo_cache_sentinel")?(z=l.jsx(xe,{children:"Cancel"}),e[63]=z):z=e[63];const Q=a.isPending?"Deletingâ€¦":"Delete";let S;e[64]!==a.isPending||e[65]!==Z||e[66]!==Q?(S=l.jsxs(ue,{children:[z,l.jsx(de,{disabled:a.isPending,onClick:Z,children:Q})]}),e[64]=a.isPending,e[65]=Z,e[66]=Q,e[67]=S):S=e[67];let A;e[68]!==V||e[69]!==S?(A=l.jsxs(he,{children:[V,S]}),e[68]=V,e[69]=S,e[70]=A):A=e[70];let I;e[71]!==H||e[72]!==A?(I=l.jsx(je,{onOpenChange:Y,open:H,children:A}),e[71]=H,e[72]=A,e[73]=I):I=e[73];let R;return e[74]!==y||e[75]!==I||e[76]!==o?(R=l.jsxs(l.Fragment,{children:[E,o,y,I]}),e[74]=y,e[75]=I,e[76]=o,e[77]=R):R=e[77],R}function De(e){return l.jsxs(T.Content,{children:[l.jsx(s,{label:"Instance ID",value:e.InstanceId}),l.jsx(s,{label:"Device",value:e.Device}),l.jsx(s,{label:"Status",value:e.State}),l.jsx(s,{label:"Attach Time",value:J(e.AttachTime)}),l.jsx(s,{label:"Delete on Termination",value:e.DeleteOnTermination?"Yes":"No"})]},e.InstanceId)}export{Ee as component};
