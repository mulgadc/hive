import{c as W,by as X,u as ee,r as te,bz as q,j as l,aE as le,bA as se,B as Y,bp as ae}from"./index.js";import{u as ie}from"./useSuspenseQuery.js";import{B as G}from"./back-link.js";import{D as I,a as s}from"./detail-row.js";import{P as oe}from"./page-heading.js";import{b as ne,c as re,d as me,h as ce,a as ue,e as de,f as fe,g as he}from"./alert-dialog.js";import{B as xe}from"./badge.js";import{e as je}from"./ec2.js";import{T as be}from"./trash-2.js";import"./useMutation.js";function Ce(){const e=W.c(75),{id:i}=X.useParams(),w=ee();let T;e[0]!==i?(T=ae(i),e[0]=i,e[1]=T):T=e[1];const{data:J}=ie(T),t=J.Volumes?.[0],a=je(),[H,Q]=te.useState(!1),U=t?.State==="available"&&(!t.Attachments||t.Attachments.length===0);let _;e[2]!==a||e[3]!==i||e[4]!==w?(_=async()=>{await a.mutateAsync(i),w({to:"/ec2/describe-volumes"})},e[2]=a,e[3]=i,e[4]=w,e[5]=_):_=e[5];const Z=_;if(!t?.VolumeId){let R;return e[6]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsxs(l.Fragment,{children:[l.jsx(G,{to:"/ec2/describe-volumes",children:"Back to volumes"}),l.jsx("p",{className:"text-muted-foreground",children:"Volume not found."})]}),e[6]=R):R=e[6],R}let C;e[7]!==t.CreateTime?(C=q(t.CreateTime),e[7]=t.CreateTime,e[8]=C):C=e[8];const F=C;let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=l.jsx(G,{to:"/ec2/describe-volumes",children:"Back to volumes"}),e[9]=B):B=e[9];const O=!U;let K;e[10]===Symbol.for("react.memo_cache_sentinel")?(K=()=>Q(!0),e[10]=K):K=e[10];let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=l.jsx(be,{className:"size-4"}),e[11]=N):N=e[11];let o;e[12]!==O?(o=l.jsxs(Y,{disabled:O,onClick:K,size:"sm",variant:"destructive",children:[N,"Delete"]}),e[12]=O,e[13]=o):o=e[13];let n;e[14]!==t.State||e[15]!==t.VolumeId?(n=t.State==="available"?l.jsx(le,{className:se({variant:"outline"}),params:{id:t.VolumeId},to:"/ec2/modify-volume/$id",children:"Resize Volume"}):l.jsx(Y,{disabled:!0,variant:"outline",children:"Resize Volume"}),e[14]=t.State,e[15]=t.VolumeId,e[16]=n):n=e[16];let r;e[17]!==t.State?(r=t.State&&l.jsx(xe,{variant:t.State==="available"?"default":"outline",children:t.State}),e[17]=t.State,e[18]=r):r=e[18];let m;e[19]!==o||e[20]!==n||e[21]!==r?(m=l.jsxs("div",{className:"flex items-center gap-2",children:[o,n,r]}),e[19]=o,e[20]=n,e[21]=r,e[22]=m):m=e[22];let c;e[23]!==m||e[24]!==t.VolumeId?(c=l.jsx(oe,{actions:m,subtitle:"EC2 Volume Details",title:t.VolumeId}),e[23]=m,e[24]=t.VolumeId,e[25]=c):c=e[25];let k;e[26]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx(I.Header,{children:"Volume Information"}),e[26]=k):k=e[26];let u;e[27]!==t.VolumeId?(u=l.jsx(s,{label:"Volume ID",value:t.VolumeId}),e[27]=t.VolumeId,e[28]=u):u=e[28];const $=`${t.Size} GiB`;let d;e[29]!==$?(d=l.jsx(s,{label:"Size",value:$}),e[29]=$,e[30]=d):d=e[30];let f;e[31]!==t.VolumeType?(f=l.jsx(s,{label:"Volume Type",value:t.VolumeType}),e[31]=t.VolumeType,e[32]=f):f=e[32];let h;e[33]!==t.State?(h=l.jsx(s,{label:"State",value:t.State}),e[33]=t.State,e[34]=h):h=e[34];let x;e[35]!==t.AvailabilityZone?(x=l.jsx(s,{label:"Availability Zone",value:t.AvailabilityZone}),e[35]=t.AvailabilityZone,e[36]=x):x=e[36];let j;e[37]!==F?(j=l.jsx(s,{label:"Create Time",value:F}),e[37]=F,e[38]=j):j=e[38];const L=t.Encrypted?"Yes":"No";let b;e[39]!==L?(b=l.jsx(s,{label:"Encrypted",value:L}),e[39]=L,e[40]=b):b=e[40];let v;e[41]!==t.KmsKeyId?(v=l.jsx(s,{label:"KMS Key ID",value:t.KmsKeyId}),e[41]=t.KmsKeyId,e[42]=v):v=e[42];let p;e[43]!==u||e[44]!==d||e[45]!==f||e[46]!==h||e[47]!==x||e[48]!==j||e[49]!==b||e[50]!==v?(p=l.jsxs(I,{children:[k,l.jsxs(I.Content,{children:[u,d,f,h,x,j,b,v]})]}),e[43]=u,e[44]=d,e[45]=f,e[46]=h,e[47]=x,e[48]=j,e[49]=b,e[50]=v,e[51]=p):p=e[51];let D;e[52]!==t.Attachments?(D=t.Attachments&&t.Attachments.length>0&&l.jsxs(I,{children:[l.jsx(I.Header,{children:"Attachments"}),t.Attachments.map(ve)]}),e[52]=t.Attachments,e[53]=D):D=e[53];let y;e[54]!==c||e[55]!==p||e[56]!==D?(y=l.jsxs("div",{className:"space-y-6",children:[c,p,D]}),e[54]=c,e[55]=p,e[56]=D,e[57]=y):y=e[57];let z;e[58]===Symbol.for("react.memo_cache_sentinel")?(z=l.jsx(ue,{children:"Delete Volume"}),e[58]=z):z=e[58];let V;e[59]!==t.VolumeId?(V=l.jsxs(ne,{children:[z,l.jsxs(re,{children:['Are you sure you want to delete the volume "',t.VolumeId,'"? This action cannot be undone.']})]}),e[59]=t.VolumeId,e[60]=V):V=e[60];let E;e[61]===Symbol.for("react.memo_cache_sentinel")?(E=l.jsx(de,{children:"Cancel"}),e[61]=E):E=e[61];const M=a.isPending?"Deletingâ€¦":"Delete";let g;e[62]!==a.isPending||e[63]!==Z||e[64]!==M?(g=l.jsxs(me,{children:[E,l.jsx(ce,{disabled:a.isPending,onClick:Z,children:M})]}),e[62]=a.isPending,e[63]=Z,e[64]=M,e[65]=g):g=e[65];let S;e[66]!==V||e[67]!==g?(S=l.jsxs(fe,{children:[V,g]}),e[66]=V,e[67]=g,e[68]=S):S=e[68];let A;e[69]!==H||e[70]!==S?(A=l.jsx(he,{onOpenChange:Q,open:H,children:S}),e[69]=H,e[70]=S,e[71]=A):A=e[71];let P;return e[72]!==y||e[73]!==A?(P=l.jsxs(l.Fragment,{children:[B,y,A]}),e[72]=y,e[73]=A,e[74]=P):P=e[74],P}function ve(e){return l.jsxs(I.Content,{children:[l.jsx(s,{label:"Instance ID",value:e.InstanceId}),l.jsx(s,{label:"Device",value:e.Device}),l.jsx(s,{label:"Status",value:e.State}),l.jsx(s,{label:"Attach Time",value:q(e.AttachTime)}),l.jsx(s,{label:"Delete on Termination",value:e.DeleteOnTermination?"Yes":"No"})]},e.InstanceId)}export{Ce as component};
