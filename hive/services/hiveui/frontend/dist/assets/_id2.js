import{bA as D,u as b,br as p,r as g,j as e,bB as r,B as c,L as f,bC as A}from"./index.js";import{u as V}from"./useSuspenseQuery.js";import{B as m}from"./back-link.js";import{D as t,a as l}from"./detail-row.js";import{E as y}from"./error-banner.js";import{P as I}from"./page-heading.js";import{g as S,f as T,b as C,a as B,c as N,d as k,e as E,h as z}from"./alert-dialog.js";import{B as w}from"./badge.js";import{e as P}from"./ec2.js";import{T as R}from"./trash-2.js";function G(){const{id:n}=D.useParams(),u=b(),{data:d}=V(p(n)),a=d.Volumes?.[0],i=P(),[x,o]=g.useState(!1),j=a?.State==="available"&&(!a.Attachments||a.Attachments.length===0),h=async()=>{try{await i.mutateAsync(n),u({to:"/ec2/describe-volumes"})}finally{o(!1)}};if(!a?.VolumeId)return e.jsxs(e.Fragment,{children:[e.jsx(m,{to:"/ec2/describe-volumes",children:"Back to volumes"}),e.jsx("p",{className:"text-muted-foreground",children:"Volume not found."})]});const v=r(a.CreateTime);return e.jsxs(e.Fragment,{children:[e.jsx(m,{to:"/ec2/describe-volumes",children:"Back to volumes"}),i.error&&e.jsx(y,{error:i.error,msg:"Failed to delete volume"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{disabled:!j,onClick:()=>o(!0),size:"sm",variant:"destructive",children:[e.jsx(R,{className:"size-4"}),"Delete"]}),a.State==="available"?e.jsx(f,{className:A({variant:"outline"}),params:{id:a.VolumeId},to:"/ec2/modify-volume/$id",children:"Resize Volume"}):e.jsx(c,{disabled:!0,variant:"outline",children:"Resize Volume"}),a.State&&e.jsx(w,{variant:a.State==="available"?"default":"outline",children:a.State})]}),subtitle:"EC2 Volume Details",title:a.VolumeId}),e.jsxs(t,{children:[e.jsx(t.Header,{children:"Volume Information"}),e.jsxs(t.Content,{children:[e.jsx(l,{label:"Volume ID",value:a.VolumeId}),e.jsx(l,{label:"Size",value:`${a.Size} GiB`}),e.jsx(l,{label:"Volume Type",value:a.VolumeType}),e.jsx(l,{label:"State",value:a.State}),e.jsx(l,{label:"Availability Zone",value:a.AvailabilityZone}),e.jsx(l,{label:"Create Time",value:v}),e.jsx(l,{label:"Encrypted",value:a.Encrypted?"Yes":"No"}),e.jsx(l,{label:"KMS Key ID",value:a.KmsKeyId})]})]}),a.Attachments&&a.Attachments.length>0&&e.jsxs(t,{children:[e.jsx(t.Header,{children:"Attachments"}),a.Attachments.map(s=>e.jsxs(t.Content,{children:[e.jsx(l,{label:"Instance ID",value:s.InstanceId}),e.jsx(l,{label:"Device",value:s.Device}),e.jsx(l,{label:"Status",value:s.State}),e.jsx(l,{label:"Attach Time",value:r(s.AttachTime)}),e.jsx(l,{label:"Delete on Termination",value:s.DeleteOnTermination?"Yes":"No"})]},s.InstanceId))]})]}),e.jsx(S,{onOpenChange:o,open:x,children:e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(B,{children:"Delete Volume"}),e.jsxs(N,{children:['Are you sure you want to delete the volume "',a.VolumeId,'"? This action cannot be undone.']})]}),e.jsxs(k,{children:[e.jsx(E,{children:"Cancel"}),e.jsx(z,{disabled:i.isPending,onClick:h,children:i.isPending?"Deletingâ€¦":"Delete"})]})]})})]})}export{G as component};
