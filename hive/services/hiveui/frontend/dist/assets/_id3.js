import{g as z,c as O,j as s,B as C,bD as $,bp as E,bE as H,bF as Q}from"./index.js";import{u as L}from"./useSuspenseQuery.js";import{B as F}from"./back-link.js";import{D as y,a as r}from"./detail-row.js";import{P as V}from"./page-heading.js";import{S as Z}from"./state-badge.js";import{A as q}from"./ami-details.js";import{d as G,e as Y,f as J,g as K}from"./ec2.js";import{T as U}from"./trash-2.js";import"./useMutation.js";const W=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],X=z("pause",W);const ee=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],te=z("play",ee);const se=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],ne=z("rotate-cw",se),ae=["pending","stopping","shutting-down","terminated"];function ie(e){const t=O.c(21),{instanceId:l,state:a}=e,n=G(),p=Y(),d=J(),f=K();if(ae.includes(a||"")&&a!=="terminated"){let i;return t[0]!==a?(i=s.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:s.jsxs("p",{className:"text-center text-muted-foreground text-sm",children:["Instance is ",a,". Actions will be available once the operation completes."]})}),t[0]=a,t[1]=i):i=t[1],i}if(a==="terminated"){let i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:s.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"This instance has been terminated and cannot be managed."})}),t[2]=i):i=t[2],i}let x;t[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("h2",{className:"mb-4 font-semibold",children:"Instance Actions"}),t[3]=x):x=t[3];let m;t[4]!==l||t[5]!==n||t[6]!==a?(m=a==="stopped"&&s.jsxs(C,{disabled:n.isPending,onClick:()=>n.mutate(l),size:"sm",variant:"default",children:[s.jsx(te,{className:"size-4"}),n.isPending?"Starting":"Start"]}),t[4]=l,t[5]=n,t[6]=a,t[7]=m):m=t[7];let c;t[8]!==l||t[9]!==d||t[10]!==a||t[11]!==p?(c=a==="running"&&s.jsxs(s.Fragment,{children:[s.jsxs(C,{disabled:p.isPending,onClick:()=>p.mutate(l),size:"sm",variant:"outline",children:[s.jsx(X,{className:"size-4"}),p.isPending?"Stopping":"Stop"]}),s.jsxs(C,{disabled:d.isPending,onClick:()=>d.mutate(l),size:"sm",variant:"outline",children:[s.jsx(ne,{className:"size-4"}),d.isPending?"Rebooting":"Reboot"]})]}),t[8]=l,t[9]=d,t[10]=a,t[11]=p,t[12]=c):c=t[12];let u;t[13]!==l||t[14]!==a||t[15]!==f?(u=(a==="stopped"||a==="running")&&s.jsxs(C,{disabled:f.isPending,onClick:()=>f.mutate(l),size:"sm",variant:"destructive",children:[s.jsx(U,{className:"size-4"}),f.isPending?"Terminating":"Terminate"]}),t[13]=l,t[14]=a,t[15]=f,t[16]=u):u=t[16];let o;return t[17]!==m||t[18]!==c||t[19]!==u?(o=s.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[x,s.jsxs("div",{className:"flex flex-wrap gap-2",children:[m,c,u]})]}),t[17]=m,t[18]=c,t[19]=u,t[20]=o):o=t[20],o}function ge(){const e=O.c(48),{id:t}=$.useParams();let l;e[0]!==t?(l=H(t),e[0]=t,e[1]=l):l=e[1];const{data:a}=L(l),n=a.Reservations?.[0]?.Instances?.[0],p=n?.ImageId;let d;e[2]!==p?(d=Q(p),e[2]=p,e[3]=d):d=e[3];const{data:f}=L(d),B=f?.Images?.[0];if(!n?.InstanceId){let P;return e[4]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsxs(s.Fragment,{children:[s.jsx(F,{to:"/ec2/describe-instances",children:"Back to instances"}),s.jsx("p",{className:"text-muted-foreground",children:"Instance not found."})]}),e[4]=P):P=e[4],P}let x;e[5]!==n.LaunchTime?(x=E(n.LaunchTime),e[5]=n.LaunchTime,e[6]=x):x=e[6];const m=x;let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(F,{to:"/ec2/describe-instances",children:"Back to instances"}),e[7]=c):c=e[7];const u=n.State?.Name;let o;e[8]!==u?(o=s.jsx(Z,{state:u}),e[8]=u,e[9]=o):o=e[9];let i;e[10]!==n.InstanceId||e[11]!==o?(i=s.jsx(V,{actions:o,subtitle:"EC2 Instance Details",title:n.InstanceId}),e[10]=n.InstanceId,e[11]=o,e[12]=i):i=e[12];const A=n.State?.Name;let g;e[13]!==n.InstanceId||e[14]!==A?(g=s.jsx(ie,{instanceId:n.InstanceId,state:A}),e[13]=n.InstanceId,e[14]=A,e[15]=g):g=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(y.Header,{children:"Instance Information"}),e[16]=M):M=e[16];let h;e[17]!==n.InstanceId?(h=s.jsx(r,{label:"Instance ID",value:n.InstanceId}),e[17]=n.InstanceId,e[18]=h):h=e[18];let I;e[19]!==n.InstanceType?(I=s.jsx(r,{label:"Instance Type",value:n.InstanceType}),e[19]=n.InstanceType,e[20]=I):I=e[20];const w=n.State?.Name;let b;e[21]!==w?(b=s.jsx(r,{label:"Instance State",value:w}),e[21]=w,e[22]=b):b=e[22];let j;e[23]!==n.State?.Code?(j=n.State?.Code?.toString(),e[23]=n.State?.Code,e[24]=j):j=e[24];let v;e[25]!==j?(v=s.jsx(r,{label:"State Code",value:j}),e[25]=j,e[26]=v):v=e[26];let S;e[27]!==m?(S=s.jsx(r,{label:"Launch Time",value:m}),e[27]=m,e[28]=S):S=e[28];const R=n.Placement?.AvailabilityZone;let T;e[29]!==R?(T=s.jsx(r,{label:"Availability Zone",value:R}),e[29]=R,e[30]=T):T=e[30];let k;e[31]!==h||e[32]!==I||e[33]!==b||e[34]!==v||e[35]!==S||e[36]!==T?(k=s.jsxs(y,{children:[M,s.jsxs(y.Content,{children:[h,I,b,v,S,T]})]}),e[31]=h,e[32]=I,e[33]=b,e[34]=v,e[35]=S,e[36]=T,e[37]=k):k=e[37];let D;e[38]!==n.BlockDeviceMappings?(D=n.BlockDeviceMappings&&n.BlockDeviceMappings.length>0&&s.jsxs(y,{children:[s.jsx(y.Header,{children:"Block Device Mappings"}),s.jsxs(y.Content,{children:[s.jsx(r,{label:"Device Name",value:n.BlockDeviceMappings[0]?.DeviceName}),s.jsx(r,{label:"Volume ID",value:n.BlockDeviceMappings[0]?.Ebs?.VolumeId}),s.jsx(r,{label:"Status",value:n.BlockDeviceMappings[0]?.Ebs?.Status}),s.jsx(r,{label:"Attach Time",value:E(n.BlockDeviceMappings[0]?.Ebs?.AttachTime)}),s.jsx(r,{label:"Delete on Termination",value:n.BlockDeviceMappings[0]?.Ebs?.DeleteOnTermination?"Yes":"No"})]})]}),e[38]=n.BlockDeviceMappings,e[39]=D):D=e[39];let N;e[40]!==B?(N=B&&s.jsx(q,{image:B}),e[40]=B,e[41]=N):N=e[41];let _;return e[42]!==k||e[43]!==D||e[44]!==N||e[45]!==i||e[46]!==g?(_=s.jsxs(s.Fragment,{children:[c,s.jsxs("div",{className:"space-y-6",children:[i,g,k,D,N]})]}),e[42]=k,e[43]=D,e[44]=N,e[45]=i,e[46]=g,e[47]=_):_=e[47],_}export{ge as component};
