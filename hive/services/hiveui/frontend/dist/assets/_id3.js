import{g as B,c as E,j as s,B as A,bz as $,bl as F,bA as O,bB as Q}from"./index.js";import{u as L}from"./useSuspenseQuery.js";import{B as M}from"./back-link.js";import{D,a as v}from"./detail-row.js";import{P as H}from"./page-heading.js";import{S as Z}from"./state-badge.js";import{A as q}from"./ami-details.js";import{d as G,e as J,f as K,g as U}from"./ec2.js";import{T as V}from"./trash-2.js";import"./useMutation.js";const W=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],X=B("pause",W);const Y=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ee=B("play",Y);const te=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],se=B("rotate-cw",te),ne=["pending","stopping","shutting-down","terminated"];function ae(e){const t=E.c(21),{instanceId:c,state:a}=e,n=G(),u=J(),r=K(),x=U();if(ne.includes(a||"")&&a!=="terminated"){let i;return t[0]!==a?(i=s.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:s.jsxs("p",{className:"text-center text-muted-foreground text-sm",children:["Instance is ",a,". Actions will be available once the operation completes."]})}),t[0]=a,t[1]=i):i=t[1],i}if(a==="terminated"){let i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:s.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"This instance has been terminated and cannot be managed."})}),t[2]=i):i=t[2],i}let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("h2",{className:"mb-4 font-semibold",children:"Instance Actions"}),t[3]=f):f=t[3];let d;t[4]!==c||t[5]!==n||t[6]!==a?(d=a==="stopped"&&s.jsxs(A,{disabled:n.isPending,onClick:()=>n.mutate(c),size:"sm",variant:"default",children:[s.jsx(ee,{className:"size-4"}),n.isPending?"Starting":"Start"]}),t[4]=c,t[5]=n,t[6]=a,t[7]=d):d=t[7];let l;t[8]!==c||t[9]!==r||t[10]!==a||t[11]!==u?(l=a==="running"&&s.jsxs(s.Fragment,{children:[s.jsxs(A,{disabled:u.isPending,onClick:()=>u.mutate(c),size:"sm",variant:"outline",children:[s.jsx(X,{className:"size-4"}),u.isPending?"Stopping":"Stop"]}),s.jsxs(A,{disabled:r.isPending,onClick:()=>r.mutate(c),size:"sm",variant:"outline",children:[s.jsx(se,{className:"size-4"}),r.isPending?"Rebooting":"Reboot"]})]}),t[8]=c,t[9]=r,t[10]=a,t[11]=u,t[12]=l):l=t[12];let m;t[13]!==c||t[14]!==a||t[15]!==x?(m=(a==="stopped"||a==="running")&&s.jsxs(A,{disabled:x.isPending,onClick:()=>x.mutate(c),size:"sm",variant:"destructive",children:[s.jsx(V,{className:"size-4"}),x.isPending?"Terminating":"Terminate"]}),t[13]=c,t[14]=a,t[15]=x,t[16]=m):m=t[16];let o;return t[17]!==d||t[18]!==l||t[19]!==m?(o=s.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[f,s.jsxs("div",{className:"flex flex-wrap gap-2",children:[d,l,m]})]}),t[17]=d,t[18]=l,t[19]=m,t[20]=o):o=t[20],o}function pe(){const e=E.c(45),{id:t}=$.useParams();let c;e[0]!==t?(c=O(t),e[0]=t,e[1]=c):c=e[1];const{data:a}=L(c),n=a.Reservations?.[0]?.Instances?.[0],u=n?.ImageId;let r;e[2]!==u?(r=Q(u),e[2]=u,e[3]=r):r=e[3];const{data:x}=L(r),_=x?.Images?.[0];if(!n?.InstanceId){let C;return e[4]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs(s.Fragment,{children:[s.jsx(M,{to:"/ec2/describe-instances",children:"Back to instances"}),s.jsx("p",{className:"text-muted-foreground",children:"Instance not found."})]}),e[4]=C):C=e[4],C}let f;e[5]!==n.LaunchTime?(f=F(n.LaunchTime),e[5]=n.LaunchTime,e[6]=f):f=e[6];const d=f;let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(M,{to:"/ec2/describe-instances",children:"Back to instances"}),e[7]=l):l=e[7];const m=n.State?.Name;let o;e[8]!==m?(o=s.jsx(Z,{state:m}),e[8]=m,e[9]=o):o=e[9];let i;e[10]!==n.InstanceId||e[11]!==o?(i=s.jsx(H,{actions:o,subtitle:"EC2 Instance Details",title:n.InstanceId}),e[10]=n.InstanceId,e[11]=o,e[12]=i):i=e[12];const w=n.State?.Name;let p;e[13]!==n.InstanceId||e[14]!==w?(p=s.jsx(ae,{instanceId:n.InstanceId,state:w}),e[13]=n.InstanceId,e[14]=w,e[15]=p):p=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(D.Header,{children:"Instance Information"}),e[16]=k):k=e[16];let I;e[17]!==n.InstanceId?(I=s.jsx(v,{label:"Instance ID",value:n.InstanceId}),e[17]=n.InstanceId,e[18]=I):I=e[18];let h;e[19]!==n.InstanceType?(h=s.jsx(v,{label:"Instance Type",value:n.InstanceType}),e[19]=n.InstanceType,e[20]=h):h=e[20];const z=n.State?.Name;let g;e[21]!==z?(g=s.jsx(v,{label:"Instance State",value:z}),e[21]=z,e[22]=g):g=e[22];let b;e[23]!==n.State?.Code?(b=n.State?.Code?.toString(),e[23]=n.State?.Code,e[24]=b):b=e[24];let j;e[25]!==b?(j=s.jsx(v,{label:"State Code",value:b}),e[25]=b,e[26]=j):j=e[26];let S;e[27]!==d?(S=s.jsx(v,{label:"Launch Time",value:d}),e[27]=d,e[28]=S):S=e[28];const R=n.Placement?.AvailabilityZone;let y;e[29]!==R?(y=s.jsx(v,{label:"Availability Zone",value:R}),e[29]=R,e[30]=y):y=e[30];let N;e[31]!==I||e[32]!==h||e[33]!==g||e[34]!==j||e[35]!==S||e[36]!==y?(N=s.jsxs(D,{children:[k,s.jsxs(D.Content,{children:[I,h,g,j,S,y]})]}),e[31]=I,e[32]=h,e[33]=g,e[34]=j,e[35]=S,e[36]=y,e[37]=N):N=e[37];let T;e[38]!==_?(T=_&&s.jsx(q,{image:_}),e[38]=_,e[39]=T):T=e[39];let P;return e[40]!==N||e[41]!==T||e[42]!==i||e[43]!==p?(P=s.jsxs(s.Fragment,{children:[l,s.jsxs("div",{className:"space-y-6",children:[i,p,N,T]})]}),e[40]=N,e[41]=T,e[42]=i,e[43]=p,e[44]=P):P=e[44],P}export{pe as component};
