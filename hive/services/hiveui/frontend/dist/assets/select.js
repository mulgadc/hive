import{k as Kt,aI as Et,aJ as Se,aK as tt,aL as De,aM as He,aN as Nt,aO as xn,r as i,aP as $t,aQ as Le,aR as Vt,aS as yn,aT as xe,aU as Rn,aV as qt,aW as Yt,aX as ke,aY as Sn,aZ as wn,a_ as Q,a$ as vn,b0 as pe,b1 as Lt,b2 as kt,b3 as ft,b4 as Ue,b5 as yt,b6 as Dt,b7 as Mn,b8 as Gt,b9 as Tn,ba as In,bb as pt,j as U,bc as Z,bd as Ht,be as Ct,bf as En,bg as Mt,bh as Cn,bi as L,bj as An,bk as gt,bl as Pn,bm as On,bn as Nn,bo as Xt,bp as Vn,bq as Jt,br as Ln,bs as kn,bt as At,bu as Zt,bv as Ne,bw as Dn,bx as Hn,by as Fn,bz as _n,bA as Un,bB as jn,bC as Bn,bD as zn,bE as Wn,bF as Qt,bG as en,bH as Ft,bI as Kn,bJ as $n,bK as qn,bL as Yn,bM as tn,bN as Gn,bO as Rt,c as qe,a as Ye}from"./index.js";import{C as Xn}from"./check.js";import{u as Jn,d as nn,e as rn,f as _t,g as Zn,h as Qn,i as er}from"./field.js";const tr=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],on=Kt("chevron-down",tr);const nr=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rr=Kt("chevron-up",nr);function lt(t,e,n){return Math.floor(t/e)!==n}function Ze(t,e){return e<0||e>=t.current.length}function St(t,e){return be(t,{disabledIndices:e})}function Ut(t,e){return be(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function be(t,{startingIndex:e=-1,decrement:n=!1,disabledIndices:r,amount:s=1}={}){let o=e;do o+=n?-s:s;while(o>=0&&o<=t.current.length-1&&Qe(t,o,r));return o}function or(t,{event:e,orientation:n,loopFocus:r,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:f,prevIndex:p,stopEvent:b=!1}){let c=p;const y=[],v={};let T=!1;{let a=null,g=-1;t.current.forEach((m,d)=>{if(m==null)return;const h=m.closest('[role="row"]');h&&(T=!0),(h!==a||g===-1)&&(a=h,g+=1,y[g]=[]),y[g].push(d),v[d]=g})}const x=T&&y.length>0&&y.some(a=>a.length!==o);function w(a){if(!x||p===-1)return;const g=v[p];if(g==null)return;const m=y[g].indexOf(p);let d=a==="up"?g-1:g+1;r&&(d<0?d=y.length-1:d>=y.length&&(d=0));const h=new Set;for(;d>=0&&d<y.length&&!h.has(d);){h.add(d);const $=y[d];if($.length===0){d=a==="up"?d-1:d+1;continue}const F=Math.min(m,$.length-1);for(let D=F;D>=0;D-=1){const ee=$[D];if(!Qe(t,ee,l))return ee}d=a==="up"?d-1:d+1,r&&(d<0?d=y.length-1:d>=y.length&&(d=0))}}if(e.key===Et){const a=w("up");if(a!==void 0)b&&Se(e),c=a;else{if(b&&Se(e),p===-1)c=f;else if(c=be(t,{startingIndex:c,amount:o,decrement:!0,disabledIndices:l}),r&&(p-o<u||c<0)){const g=p%o,m=f%o,d=f-(m-g);m===g?c=f:c=m>g?d:d-o}Ze(t,c)&&(c=p)}}if(e.key===tt){const a=w("down");a!==void 0?(b&&Se(e),c=a):(b&&Se(e),p===-1?c=u:(c=be(t,{startingIndex:p,amount:o,disabledIndices:l}),r&&p+o>f&&(c=be(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),Ze(t,c)&&(c=p))}if(n==="both"){const a=Nt(p/o);e.key===(s?De:He)&&(b&&Se(e),p%o!==o-1?(c=be(t,{startingIndex:p,disabledIndices:l}),r&&lt(c,o,a)&&(c=be(t,{startingIndex:p-p%o-1,disabledIndices:l}))):r&&(c=be(t,{startingIndex:p-p%o-1,disabledIndices:l})),lt(c,o,a)&&(c=p)),e.key===(s?He:De)&&(b&&Se(e),p%o!==0?(c=be(t,{startingIndex:p,decrement:!0,disabledIndices:l}),r&&lt(c,o,a)&&(c=be(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):r&&(c=be(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),lt(c,o,a)&&(c=p));const g=Nt(f/o)===a;Ze(t,c)&&(r&&g?c=e.key===(s?He:De)?f:be(t,{startingIndex:p-p%o-1,disabledIndices:l}):c=p)}return c}function sr(t,e,n){const r=[];let s=0;return t.forEach(({width:o,height:l},u)=>{let f=!1;for(;!f;){const p=[];for(let b=0;b<o;b+=1)for(let c=0;c<l;c+=1)p.push(s+b+c*e);s%e+o<=e&&p.every(b=>r[b]==null)?(p.forEach(b=>{r[b]=u}),f=!0):s+=1}}),[...r]}function ir(t,e,n,r,s){if(t===-1)return-1;const o=n.indexOf(t),l=e[t];switch(s){case"tl":return o;case"tr":return l?o+l.width-1:o;case"bl":return l?o+(l.height-1)*r:o;case"br":return n.lastIndexOf(t);default:return-1}}function lr(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Qe(t,e,n){if(typeof n=="function")return n(e);if(n)return n.includes(e);const r=t.current[e];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}function cr(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.context.dataRef,{enabled:s=!0,event:o="click",toggle:l=!0,ignoreMouse:u=!1,stickIfOpen:f=!0,touchOpenDelay:p=0,reason:b=xn}=e,c=i.useRef(void 0),y=$t(),v=Le(),T=i.useMemo(()=>({onPointerDown(x){c.current=x.pointerType},onMouseDown(x){const w=c.current,a=x.nativeEvent,g=n.select("open");if(x.button!==0||o==="click"||Vt(w,!0)&&u)return;const m=r.current.openEvent,d=m?.type,h=n.select("domReferenceElement")!==x.currentTarget,$=g&&h||!(g&&l&&(!(m&&f)||d==="click"||d==="mousedown"));if(Rn(a.target)){const D=xe(b,a,a.target);$&&w==="touch"&&p>0?v.start(p,()=>{n.setOpen(!0,D)}):n.setOpen($,D);return}const F=x.currentTarget;y.request(()=>{const D=xe(b,a,F);$&&w==="touch"&&p>0?v.start(p,()=>{n.setOpen(!0,D)}):n.setOpen($,D)})},onClick(x){if(o==="mousedown-only")return;const w=c.current;if(o==="mousedown"&&w){c.current=void 0;return}if(Vt(w,!0)&&u)return;const a=n.select("open"),g=r.current.openEvent,m=n.select("domReferenceElement")!==x.currentTarget,d=a&&m||!(a&&l&&(!(g&&f)||yn(g))),h=xe(b,x.nativeEvent,x.currentTarget);d&&w==="touch"&&p>0?v.start(p,()=>{n.setOpen(!0,h)}):n.setOpen(d,h)},onKeyDown(){c.current=void 0}}),[r,o,u,n,f,l,y,v,p,b]);return i.useMemo(()=>s?{reference:T}:qt,[s,T])}const ar="Escape";function mt(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function ct(t,e){return mt(e,t===Et||t===tt,t===De||t===He)}function wt(t,e,n){return mt(e,t===tt,n?t===De:t===He)||t==="Enter"||t===" "||t===""}function ur(t,e,n){return mt(e,n?t===De:t===He,t===tt)}function fr(t,e,n,r){const s=n?t===He:t===De,o=t===Et;return e==="both"||e==="horizontal"&&r&&r>1?t===ar:mt(e,s,o)}function dr(t,e){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),l=n.context.dataRef,{listRef:u,activeIndex:f,onNavigate:p=()=>{},enabled:b=!0,selectedIndex:c=null,allowEscape:y=!1,loopFocus:v=!1,nested:T=!1,rtl:x=!1,virtual:w=!1,focusItemOnOpen:a="auto",focusItemOnHover:g=!0,openOnArrowKeyDown:m=!0,disabledIndices:d=void 0,orientation:h="vertical",parentOrientation:$,cols:F=1,id:D,resetOnPointerLeave:ee=!0,externalTree:ce}=e,J=Yt(s),B=ke(J),ne=Sn(),A=wn(ce);Q(()=>{l.current.orientation=h},[l,h]);const se=vn(o),q=i.useRef(a),E=i.useRef(c??-1),z=i.useRef(null),S=i.useRef(!0),C=pe(M=>{p(E.current===-1?null:E.current,M)}),te=i.useRef(C),I=i.useRef(!!s),Y=i.useRef(r),k=i.useRef(!1),ae=i.useRef(!1),O=ke(d),K=ke(r),oe=ke(c),ve=ke(ee),Te=pe(()=>{function M(W){w?A?.events.emit("virtualfocus",W):Lt(W,{sync:k.current,preventScroll:!0})}const V=u.current[E.current],R=ae.current;V&&M(V),(k.current?W=>W():requestAnimationFrame)(()=>{const W=u.current[E.current]||V;if(!W)return;V||M(W),G&&(R||!S.current)&&W.scrollIntoView?.({block:"nearest",inline:"nearest"})})});Q(()=>{b&&(r&&s?(E.current=c??-1,q.current&&c!=null&&(ae.current=!0,C())):I.current&&(E.current=-1,te.current()))},[b,r,s,c,C]),Q(()=>{if(b){if(!r){k.current=!1;return}if(s)if(f==null){if(k.current=!1,oe.current!=null)return;if(I.current&&(E.current=-1,Te()),(!Y.current||!I.current)&&q.current&&(z.current!=null||q.current===!0&&z.current==null)){let M=0;const V=()=>{u.current[0]==null?(M<2&&(M?requestAnimationFrame:queueMicrotask)(V),M+=1):(E.current=z.current==null||wt(z.current,h,x)||T?St(u):Ut(u),z.current=null,C())};V()}}else Ze(u,f)||(E.current=f,Te(),ae.current=!1)}},[b,r,s,f,oe,T,u,h,x,C,Te,O]),Q(()=>{if(!b||s||!A||w||!I.current)return;const M=A.nodesRef.current,V=M.find(W=>W.id===ne)?.context?.elements.floating,R=kt(ft(s)),_=M.some(W=>W.context&&Ue(W.context.elements.floating,R));V&&!_&&S.current&&V.focus({preventScroll:!0})},[b,s,A,ne,w]),Q(()=>{te.current=C,Y.current=r,I.current=!!s}),Q(()=>{r||(z.current=null,q.current=a)},[r,a]);const j=f!=null,G=i.useMemo(()=>{function M(R){if(!K.current)return;const _=u.current.indexOf(R.currentTarget);_!==-1&&E.current!==_&&(E.current=_,C(R))}return{onFocus(R){k.current=!0,M(R)},onClick:({currentTarget:R})=>R.focus({preventScroll:!0}),onMouseMove(R){k.current=!0,ae.current=!1,g&&M(R)},onPointerLeave(R){if(!K.current||!S.current||R.pointerType==="touch")return;k.current=!0;const _=R.relatedTarget;!g||u.current.includes(_)||ve.current&&(Lt(null,{sync:!0}),E.current=-1,C(R),w||B.current?.focus({preventScroll:!0}))}}},[K,B,g,u,C,ve,w]),ue=i.useCallback(()=>$??A?.nodesRef.current.find(M=>M.id===ne)?.context?.dataRef?.current.orientation,[ne,A,$]),ie=pe(M=>{if(S.current=!1,k.current=!0,M.which===229||!K.current&&M.currentTarget===B.current)return;if(T&&fr(M.key,h,x,F)){ct(M.key,ue())||Se(M),n.setOpen(!1,xe(yt,M.nativeEvent)),Dt(o)&&(w?A?.events.emit("virtualfocus",o):o.focus());return}const V=E.current,R=St(u,d),_=Ut(u,d);if(se||(M.key==="Home"&&(Se(M),E.current=R,C(M)),M.key==="End"&&(Se(M),E.current=_,C(M))),F>1){const W=Array.from({length:u.current.length},()=>({width:1,height:1})),N=sr(W,F),me=N.findIndex(Re=>Re!=null&&!Qe(u,Re,d)),we=N.reduce((Re,re,he)=>re!=null&&!Qe(u,re,d)?he:Re,-1),Ce=N[or({current:N.map(Re=>Re!=null?u.current[Re]:null)},{event:M,orientation:h,loopFocus:v,rtl:x,cols:F,disabledIndices:lr([...(typeof d!="function"?d:null)||u.current.map((Re,re)=>Qe(u,re,d)?re:void 0),void 0],N),minIndex:me,maxIndex:we,prevIndex:ir(E.current>_?R:E.current,W,N,F,M.key===tt?"bl":M.key===(x?De:He)?"tr":"tl"),stopEvent:!0})];if(Ce!=null&&(E.current=Ce,C(M)),h==="both")return}if(ct(M.key,h)){if(Se(M),r&&!w&&kt(M.currentTarget.ownerDocument)===M.currentTarget){E.current=wt(M.key,h,x)?R:_,C(M);return}wt(M.key,h,x)?v?V>=_?y&&V!==u.current.length?E.current=-1:(k.current=!1,E.current=R):E.current=be(u,{startingIndex:V,disabledIndices:d}):E.current=Math.min(_,be(u,{startingIndex:V,disabledIndices:d})):v?V<=R?y&&V!==-1?E.current=u.current.length:(k.current=!1,E.current=_):E.current=be(u,{startingIndex:V,decrement:!0,disabledIndices:d}):E.current=Math.max(R,be(u,{startingIndex:V,decrement:!0,disabledIndices:d})),Ze(u,E.current)&&(E.current=-1),C(M)}}),fe=i.useMemo(()=>w&&r&&j&&{"aria-activedescendant":`${D}-${f}`},[w,r,j,D,f]),ye=i.useMemo(()=>({"aria-orientation":h==="both"?void 0:h,...se?{}:fe,onKeyDown(M){if(M.key==="Tab"&&M.shiftKey&&r&&!w){const V=Mn(M.nativeEvent);if(V&&!Ue(B.current,V))return;Se(M),n.setOpen(!1,xe(Gt,M.nativeEvent)),Dt(o)&&o.focus();return}ie(M)},onPointerMove(){S.current=!0}}),[fe,ie,B,h,se,n,r,w,o]),X=i.useMemo(()=>{function M(R){a==="auto"&&Tn(R.nativeEvent)&&(q.current=!w)}function V(R){q.current=a,a==="auto"&&In(R.nativeEvent)&&(q.current=!0)}return{onKeyDown(R){const _=n.select("open");S.current=!1;const W=R.key.startsWith("Arrow"),N=ur(R.key,ue(),x),me=ct(R.key,h),we=(T?N:me)||R.key==="Enter"||R.key.trim()==="";if(w&&_)return ie(R);if(!(!_&&!m&&W)){if(we){const Ce=ct(R.key,ue());z.current=T&&Ce?null:R.key}if(T){N&&(Se(R),_?(E.current=St(u,O.current),C(R)):n.setOpen(!0,xe(yt,R.nativeEvent,R.currentTarget)));return}me&&(oe.current!=null&&(E.current=oe.current),Se(R),!_&&m?n.setOpen(!0,xe(yt,R.nativeEvent,R.currentTarget)):ie(R),_&&C(R))}},onFocus(R){n.select("open")&&!w&&(E.current=-1,C(R))},onPointerDown:V,onPointerEnter:V,onMouseDown:M,onClick:M}},[ie,O,a,u,T,C,n,m,h,ue,x,oe,w]),de=i.useMemo(()=>({...fe,...X}),[fe,X]);return i.useMemo(()=>b?{reference:de,floating:ye,item:G,trigger:X}:{},[b,de,ye,X,G])}function pr(t,e){const n="rootStore"in t?t.rootStore:t,r=n.context.dataRef,s=n.useState("open"),{listRef:o,activeIndex:l,onMatch:u,onTypingChange:f,enabled:p=!0,resetMs:b=750,selectedIndex:c=null}=e,y=Le(),v=i.useRef(""),T=i.useRef(c??l??-1),x=i.useRef(null);Q(()=>{!s&&c!==null||(y.clear(),x.current=null,v.current!==""&&(v.current=""))},[s,c,y]),Q(()=>{s&&v.current===""&&(T.current=c??l??-1)},[s,c,l]);const w=pe(h=>{h?r.current.typing||(r.current.typing=h,f?.(h)):r.current.typing&&(r.current.typing=h,f?.(h))}),a=pe(h=>{function $(B,ne,A){const se=ne.find(q=>q?.toLocaleLowerCase().indexOf(A.toLocaleLowerCase())===0);return se?B.indexOf(se):-1}const F=o.current;if(v.current.length>0&&v.current[0]!==" "&&($(F,F,v.current)===-1?w(!1):h.key===" "&&Se(h)),F==null||h.key.length!==1||h.ctrlKey||h.metaKey||h.altKey)return;s&&h.key!==" "&&(Se(h),w(!0));const D=v.current==="";D&&(T.current=c??l??-1),F.every(B=>B?B[0]?.toLocaleLowerCase()!==B[1]?.toLocaleLowerCase():!0)&&v.current===h.key&&(v.current="",T.current=x.current),v.current+=h.key,y.start(b,()=>{v.current="",T.current=x.current,w(!1)});const ce=D?c??l??-1:T.current,J=$(F,[...F.slice((ce||0)+1),...F.slice(0,(ce||0)+1)],v.current);J!==-1?(u?.(J),x.current=J):h.key!==" "&&(v.current="",w(!1))}),g=pe(h=>{const $=h.relatedTarget,F=n.select("domReferenceElement"),D=n.select("floatingElement"),ee=Ue(F,$),ce=Ue(D,$);ee||ce||(y.clear(),v.current="",T.current=x.current,w(!1))}),m=i.useMemo(()=>({onKeyDown:a,onBlur:g}),[a,g]),d=i.useMemo(()=>({onKeyDown:a,onKeyUp(h){h.key===" "&&w(!1)},onBlur:g}),[a,g,w]);return i.useMemo(()=>p?{reference:m,floating:d}:{},[p,m,d])}const sn=i.createContext(null),ln=i.createContext(null);function Ve(){const t=i.useContext(sn);if(t===null)throw new Error(pt(60));return t}function cn(){const t=i.useContext(ln);if(t===null)throw new Error(pt(61));return t}const gr=(t,e)=>Object.is(t,e);function $e(t,e,n){return t==null||e==null?Object.is(t,e):n(t,e)}function mr(t,e,n){return!t||t.length===0?!1:t.some(r=>r===void 0?!1:$e(e,r,n))}function et(t,e,n){return!t||t.length===0?-1:t.findIndex(r=>r===void 0?!1:$e(r,e,n))}function hr(t,e,n){return t.filter(r=>!$e(e,r,n))}function Tt(t){if(t==null)return"";if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}function an(t){return t!=null&&t.length>0&&typeof t[0]=="object"&&t[0]!=null&&"items"in t[0]}function br(t){if(!Array.isArray(t))return t!=null&&!("null"in t);if(an(t)){for(const e of t)for(const n of e.items)if(n&&n.value==null&&n.label!=null)return!0;return!1}for(const e of t)if(e&&e.value==null&&e.label!=null)return!0;return!1}function xr(t,e){if(e&&t!=null)return e(t)??"";if(t&&typeof t=="object"){if("label"in t&&t.label!=null)return String(t.label);if("value"in t)return String(t.value)}return Tt(t)}function Ke(t,e){return e&&t!=null?e(t)??"":t&&typeof t=="object"&&"value"in t&&"label"in t?Tt(t.value):Tt(t)}function un(t,e,n){function r(){return xr(t,n)}if(n&&t!=null)return n(t);if(t&&typeof t=="object"&&"label"in t&&t.label!=null)return t.label;if(e&&!Array.isArray(e))return e[t]??r();if(Array.isArray(e)){const s=an(e)?e.flatMap(o=>o.items):e;if(t==null||typeof t!="object"){const o=s.find(l=>l.value===t);return o&&o.label!=null?o.label:r()}if("value"in t){const o=s.find(l=>l&&l.value===t.value);if(o&&o.label!=null)return o.label}}return r()}function yr(t,e,n){return t.reduce((r,s,o)=>(o>0&&r.push(", "),r.push(U.jsx(i.Fragment,{children:un(s,e,n)},o)),r),[])}const P={id:Z(t=>t.id),modal:Z(t=>t.modal),multiple:Z(t=>t.multiple),items:Z(t=>t.items),itemToStringLabel:Z(t=>t.itemToStringLabel),itemToStringValue:Z(t=>t.itemToStringValue),isItemEqualToValue:Z(t=>t.isItemEqualToValue),value:Z(t=>t.value),hasSelectedValue:Z(t=>{const{value:e,multiple:n,itemToStringValue:r}=t;return e==null?!1:n&&Array.isArray(e)?e.length>0:Ke(e,r)!==""}),hasNullItemLabel:Z((t,e)=>e?br(t.items):!1),open:Z(t=>t.open),mounted:Z(t=>t.mounted),forceMount:Z(t=>t.forceMount),transitionStatus:Z(t=>t.transitionStatus),openMethod:Z(t=>t.openMethod),activeIndex:Z(t=>t.activeIndex),selectedIndex:Z(t=>t.selectedIndex),isActive:Z((t,e)=>t.activeIndex===e),isSelected:Z((t,e,n)=>{const r=t.isItemEqualToValue,s=t.value;return t.multiple?Array.isArray(s)&&s.some(o=>$e(n,o,r)):t.selectedIndex===e&&t.selectedIndex!==null?!0:$e(n,s,r)}),isSelectedByFocus:Z((t,e)=>t.selectedIndex===e),popupProps:Z(t=>t.popupProps),triggerProps:Z(t=>t.triggerProps),triggerElement:Z(t=>t.triggerElement),positionerElement:Z(t=>t.positionerElement),listElement:Z(t=>t.listElement),scrollUpArrowVisible:Z(t=>t.scrollUpArrowVisible),scrollDownArrowVisible:Z(t=>t.scrollDownArrowVisible),hasScrollArrows:Z(t=>t.hasScrollArrows)};function Rr(t,e){const n=i.useRef(t),r=pe(e);Q(()=>{n.current!==t&&r(n.current)},[t,r]),Q(()=>{n.current=t},[t])}function Sr(t){const{id:e,value:n,defaultValue:r=null,onValueChange:s,open:o,defaultOpen:l=!1,onOpenChange:u,name:f,autoComplete:p,disabled:b=!1,readOnly:c=!1,required:y=!1,modal:v=!0,actionsRef:T,inputRef:x,onOpenChangeComplete:w,items:a,multiple:g=!1,itemToStringLabel:m,itemToStringValue:d,isItemEqualToValue:h=gr,highlightItemOnHover:$=!0,children:F}=t,{clearErrors:D}=Jn(),{setDirty:ee,setTouched:ce,setFocused:J,shouldValidateOnChange:B,validityData:ne,setFilled:A,name:se,disabled:q,validation:E,validationMode:z}=nn(),S=rn({id:e}),C=q||b,te=se??f,[I,Y]=_t({controlled:n,default:g?r??Ht:r,name:"Select",state:"value"}),[k,ae]=_t({controlled:o,default:l,name:"Select",state:"open"}),O=i.useRef([]),K=i.useRef([]),oe=i.useRef(null),ve=i.useRef(null),Te=i.useRef(0),j=i.useRef(null),G=i.useRef([]),ue=i.useRef(!1),ie=i.useRef(!1),fe=i.useRef(null),ye=i.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),X=i.useRef(!1),{mounted:de,setMounted:M,transitionStatus:V}=Ct(k),{openMethod:R,triggerProps:_,reset:W}=En(k),N=Mt(()=>new Cn({id:S,modal:v,multiple:g,itemToStringLabel:m,itemToStringValue:d,isItemEqualToValue:h,value:I,open:k,mounted:de,transitionStatus:V,items:a,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,me=L(N,P.activeIndex),we=L(N,P.selectedIndex),Ce=L(N,P.triggerElement),Re=L(N,P.positionerElement),re=i.useMemo(()=>g&&Array.isArray(I)&&I.length===0?"":Ke(I,d),[g,I,d]),he=i.useMemo(()=>g&&Array.isArray(I)?I.map(H=>Ke(H,d)):Ke(I,d),[g,I,d]),ge=ke(N.state.triggerElement);Zn({id:S,commit:E.commit,value:I,controlRef:ge,name:te,getValue:()=>he});const je=i.useRef(I);Q(()=>{I!==je.current&&N.set("forceMount",!0)},[N,I]),Q(()=>{A(g?Array.isArray(I)&&I.length>0:I!=null)},[g,I,A]),Q(function(){if(k)return;const le=G.current;if(g){const Ee=Array.isArray(I)?I:[];if(Ee.length===0){N.set("selectedIndex",null);return}const Me=Ee[Ee.length-1],it=et(le,Me,h);N.set("selectedIndex",it===-1?null:it);return}const Ie=et(le,I,h);N.set("selectedIndex",Ie===-1?null:Ie)},[g,k,I,G,h,N]),Rr(I,()=>{D(te),ee(I!==ne.initialValue),B()?E.commit(I):E.commit(I,!0)});const Ge=pe((H,le)=>{if(u?.(H,le),!le.isCanceled&&(ae(H),!H&&(le.reason===Gt||le.reason===An)&&(ce(!0),J(!1),z==="onBlur"&&E.commit(I)),!H&&N.state.activeIndex!==null)){const Ie=O.current[N.state.activeIndex];queueMicrotask(()=>{Ie?.setAttribute("tabindex","-1")})}}),Be=pe(()=>{M(!1),N.set("activeIndex",null),W(),w?.(!1)});gt({enabled:!T,open:k,ref:oe,onComplete(){k||Be()}}),i.useImperativeHandle(T,()=>({unmount:Be}),[Be]);const Fe=pe((H,le)=>{s?.(H,le),!le.isCanceled&&Y(H)}),Ae=pe(()=>{const H=N.state.listElement||oe.current;if(!H)return;const le=H.scrollTop,Ie=H.scrollTop+H.clientHeight,Ee=le>1,Me=Ie<H.scrollHeight-1;N.state.scrollUpArrowVisible!==Ee&&N.set("scrollUpArrowVisible",Ee),N.state.scrollDownArrowVisible!==Me&&N.set("scrollDownArrowVisible",Me)}),Pe=Pn({open:k,onOpenChange:Ge,elements:{reference:Ce,floating:Re}}),nt=cr(Pe,{enabled:!c&&!C,event:"mousedown"}),Xe=On(Pe,{bubbles:!1}),Oe=dr(Pe,{enabled:!c&&!C,listRef:O,activeIndex:me,selectedIndex:we,disabledIndices:Ht,onNavigate(H){H===null&&!k||N.set("activeIndex",H)},focusItemOnHover:!1}),ht=pr(Pe,{enabled:!c&&!C&&(k||!g),listRef:K,activeIndex:me,selectedIndex:we,onMatch(H){k?N.set("activeIndex",H):Fe(G.current[H],xe("none"))},onTypingChange(H){ue.current=H}}),{getReferenceProps:ze,getFloatingProps:We,getItemProps:rt}=Nn([nt,Xe,Oe,ht]),Je=i.useMemo(()=>Xt(ze(),_,S?{id:S}:qt),[ze,_,S]);Vn(()=>{N.update({popupProps:We(),triggerProps:Je})}),Q(()=>{N.update({id:S,modal:v,multiple:g,value:I,open:k,mounted:de,transitionStatus:V,popupProps:We(),triggerProps:Je,items:a,itemToStringLabel:m,itemToStringValue:d,isItemEqualToValue:h,openMethod:R})},[N,S,v,g,I,k,de,V,We,Je,a,m,d,h,R]);const ot=i.useMemo(()=>({store:N,name:te,required:y,disabled:C,readOnly:c,multiple:g,itemToStringLabel:m,itemToStringValue:d,highlightItemOnHover:$,setValue:Fe,setOpen:Ge,listRef:O,popupRef:oe,scrollHandlerRef:ve,handleScrollArrowVisibility:Ae,scrollArrowsMountedCountRef:Te,getItemProps:rt,events:Pe.context.events,valueRef:j,valuesRef:G,labelsRef:K,typingRef:ue,selectionRef:ye,selectedItemTextRef:fe,validation:E,onOpenChangeComplete:w,keyboardActiveRef:ie,alignItemWithTriggerActiveRef:X,initialValueRef:je}),[N,te,y,C,c,g,m,d,$,Fe,Ge,rt,Pe.context.events,E,w,Ae]),st=Jt(x,E.inputRef),bt=g&&Array.isArray(I)&&I.length>0,xt=i.useMemo(()=>!g||!Array.isArray(I)||!te?null:I.map(H=>{const le=Ke(H,d);return U.jsx("input",{type:"hidden",name:te,value:le},le)}),[g,I,te,d]);return U.jsx(sn.Provider,{value:ot,children:U.jsxs(ln.Provider,{value:Pe,children:[F,U.jsx("input",{...E.getInputValidationProps({onFocus(){N.state.triggerElement?.focus({focusVisible:!0})},onChange(H){if(H.nativeEvent.defaultPrevented)return;const le=H.target.value,Ie=xe(At,H.nativeEvent);function Ee(){if(g)return;const Me=G.current.find(it=>Ke(it,d).toLowerCase()===le.toLowerCase());Me!=null&&(ee(Me!==ne.initialValue),Fe(Me,Ie),B()&&E.commit(Me))}N.set("forceMount",!0),queueMicrotask(Ee)}}),name:g?void 0:te,autoComplete:p,value:re,disabled:C,required:y&&!bt,readOnly:c,ref:st,style:te?Ln:kn,tabIndex:-1,"aria-hidden":!0}),xt]})})}function wr(t){const e=t.getBoundingClientRect(),n=window.getComputedStyle(t,"::before"),r=window.getComputedStyle(t,"::after");if(!(n.content!=="none"||r.content!=="none"))return e;const o=parseFloat(n.width)||0,l=parseFloat(n.height)||0,u=parseFloat(r.width)||0,f=parseFloat(r.height)||0,p=Math.max(e.width,o,u),b=Math.max(e.height,l,f),c=p-e.width,y=b-e.height;return{left:e.left-c/2,right:e.right+c/2,top:e.top-y/2,bottom:e.bottom+y/2}}const at=2,vr=400,jt=200,Mr={...Dn,...er,value:()=>null},Tr=i.forwardRef(function(e,n){const{render:r,className:s,id:o,disabled:l=!1,nativeButton:u=!0,...f}=e,{setTouched:p,setFocused:b,validationMode:c,state:y,disabled:v}=nn(),{labelId:T}=Qn(),{store:x,setOpen:w,selectionRef:a,validation:g,readOnly:m,required:d,alignItemWithTriggerActiveRef:h,disabled:$,keyboardActiveRef:F}=Ve(),D=v||$||l,ee=L(x,P.open),ce=L(x,P.value),J=L(x,P.triggerProps),B=L(x,P.positionerElement),ne=L(x,P.listElement),A=L(x,P.id),se=L(x,P.hasSelectedValue),q=!se&&ee,E=L(x,P.hasNullItemLabel,q),z=o??A;rn({id:z});const S=ke(B),C=i.useRef(null),{getButtonProps:te,buttonRef:I}=Zt({disabled:D,native:u}),Y=pe(G=>{x.set("triggerElement",G)}),k=Jt(n,C,I,Y),ae=Le(),O=Le(),K=Le(),oe=Le();i.useEffect(()=>{if(ee)return!(se||E)?K.start(vr,()=>{a.current.allowUnselectedMouseUp=!0,a.current.allowSelectedMouseUp=!0}):oe.start(jt,()=>{a.current.allowUnselectedMouseUp=!0,K.start(jt,()=>{a.current.allowSelectedMouseUp=!0})}),()=>{K.clear(),oe.clear()};a.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},O.clear()},[ee,se,E,a,O,K,oe]);const ve=i.useMemo(()=>ne?.id??Yt(B)?.id,[ne,B]),Te=Xt(J,{id:z,role:"combobox","aria-expanded":ee?"true":"false","aria-haspopup":"listbox","aria-controls":ee?ve:void 0,"aria-labelledby":T,"aria-readonly":m||void 0,"aria-required":d||void 0,tabIndex:D?-1:0,ref:k,onFocus(G){b(!0),ee&&h.current&&w(!1,xe(At,G.nativeEvent)),ae.start(0,()=>{x.set("forceMount",!0)})},onBlur(G){Ue(B,G.relatedTarget)||(p(!0),b(!1),c==="onBlur"&&g.commit(ce))},onPointerMove(){F.current=!1},onKeyDown(){F.current=!0},onMouseDown(G){if(ee)return;const ue=ft(G.currentTarget);function ie(fe){if(!C.current)return;const ye=fe.target;if(Ue(C.current,ye)||Ue(S.current,ye)||ye===C.current)return;const X=wr(C.current);fe.clientX>=X.left-at&&fe.clientX<=X.right+at&&fe.clientY>=X.top-at&&fe.clientY<=X.bottom+at||w(!1,xe(Hn,fe))}O.start(0,()=>{ue.addEventListener("mouseup",ie,{once:!0})})}},g.getValidationProps,f,te);Te.role="combobox";const j={...y,open:ee,disabled:D,value:ce,readOnly:m,placeholder:!se};return Ne("button",e,{ref:[n,C],state:j,stateAttributesMapping:Mr,props:Te})}),Ir={value:()=>null},Er=i.forwardRef(function(e,n){const{className:r,render:s,children:o,placeholder:l,...u}=e,{store:f,valueRef:p}=Ve(),b=L(f,P.value),c=L(f,P.items),y=L(f,P.itemToStringLabel),v=L(f,P.hasSelectedValue),T=!v&&l!=null&&o==null,x=L(f,P.hasNullItemLabel,T),w={value:b,placeholder:!v};let a=null;return typeof o=="function"?a=o(b):o!=null?a=o:!v&&l!=null&&!x?a=l:Array.isArray(b)?a=yr(b,c,y):a=un(b,c,y),Ne("span",e,{state:w,ref:[n,p],props:[{children:a},u],stateAttributesMapping:Ir})}),Cr=i.forwardRef(function(e,n){const{className:r,render:s,...o}=e,{store:l}=Ve(),f={open:L(l,P.open)};return Ne("span",e,{state:f,ref:n,props:[{"aria-hidden":!0,children:"▼"},o],stateAttributesMapping:Fn})}),Ar=i.createContext(void 0),Pr=i.forwardRef(function(e,n){const{store:r}=Ve(),s=L(r,P.mounted),o=L(r,P.forceMount);return s||o?U.jsx(Ar.Provider,{value:!0,children:U.jsx(_n,{ref:n,...e})}):null}),fn=i.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function Or(){return i.useContext(fn)}function Nr(t){const{children:e,elementsRef:n,labelsRef:r,onMapChange:s}=t,o=pe(s),l=i.useRef(0),u=Mt(Lr).current,f=Mt(Vr).current,[p,b]=i.useState(0),c=i.useRef(p),y=pe((a,g)=>{f.set(a,g??null),c.current+=1,b(c.current)}),v=pe(a=>{f.delete(a),c.current+=1,b(c.current)}),T=i.useMemo(()=>{const a=new Map;return Array.from(f.keys()).filter(m=>m.isConnected).sort(kr).forEach((m,d)=>{const h=f.get(m)??{};a.set(m,{...h,index:d})}),a},[f,p]);Q(()=>{if(typeof MutationObserver!="function"||T.size===0)return;const a=new MutationObserver(g=>{const m=new Set,d=h=>m.has(h)?m.delete(h):m.add(h);g.forEach(h=>{h.removedNodes.forEach(d),h.addedNodes.forEach(d)}),m.size===0&&(c.current+=1,b(c.current))});return T.forEach((g,m)=>{m.parentElement&&a.observe(m.parentElement,{childList:!0})}),()=>{a.disconnect()}},[T]),Q(()=>{c.current===p&&(n.current.length!==T.size&&(n.current.length=T.size),r&&r.current.length!==T.size&&(r.current.length=T.size),l.current=T.size),o(T)},[o,T,n,r,p]),Q(()=>()=>{n.current=[]},[n]),Q(()=>()=>{r&&(r.current=[])},[r]);const x=pe(a=>(u.add(a),()=>{u.delete(a)}));Q(()=>{u.forEach(a=>a(T))},[u,T]);const w=i.useMemo(()=>({register:y,unregister:v,subscribeMapChange:x,elementsRef:n,labelsRef:r,nextIndexRef:l}),[y,v,x,n,r,l]);return U.jsx(fn.Provider,{value:w,children:e})}function Vr(){return new Map}function Lr(){return new Set}function kr(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const dn=i.createContext(void 0);function Pt(){const t=i.useContext(dn);if(!t)throw new Error(pt(59));return t}function dt(t,e){t&&Object.assign(t.style,e)}const pn={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},Dr={position:"fixed"},Hr=i.forwardRef(function(e,n){const{anchor:r,positionMethod:s="absolute",className:o,render:l,side:u="bottom",align:f="center",sideOffset:p=0,alignOffset:b=0,collisionBoundary:c="clipping-ancestors",collisionPadding:y,arrowPadding:v=5,sticky:T=!1,disableAnchorTracking:x,alignItemWithTrigger:w=!0,collisionAvoidance:a=Un,...g}=e,{store:m,listRef:d,labelsRef:h,alignItemWithTriggerActiveRef:$,selectedItemTextRef:F,valuesRef:D,initialValueRef:ee,popupRef:ce,setValue:J}=Ve(),B=cn(),ne=L(m,P.open),A=L(m,P.mounted),se=L(m,P.modal),q=L(m,P.value),E=L(m,P.openMethod),z=L(m,P.positionerElement),S=L(m,P.triggerElement),C=L(m,P.isItemEqualToValue),te=L(m,P.transitionStatus),I=i.useRef(null),Y=i.useRef(null),[k,ae]=i.useState(w),O=A&&k&&E!=="touch";!A&&k!==w&&ae(w),Q(()=>{A||(P.scrollUpArrowVisible(m.state)&&m.set("scrollUpArrowVisible",!1),P.scrollDownArrowVisible(m.state)&&m.set("scrollDownArrowVisible",!1))},[m,A]),i.useImperativeHandle($,()=>O),jn((O||se)&&ne&&E!=="touch",S);const K=Bn({anchor:r,floatingRootContext:B,positionMethod:s,mounted:A,side:u,sideOffset:p,align:f,alignOffset:b,arrowPadding:v,collisionBoundary:c,collisionPadding:y,sticky:T,disableAnchorTracking:x??O,collisionAvoidance:a,keepMounted:!0}),oe=O?"none":K.side,ve=O?Dr:K.positionerStyles,Te=i.useMemo(()=>{const X={};return ne||(X.pointerEvents="none"),{role:"presentation",hidden:!A,style:{...ve,...X}}},[ne,A,ve]),j={open:ne,side:oe,align:K.align,anchorHidden:K.anchorHidden},G=pe(X=>{m.set("positionerElement",X)}),ue=Ne("div",e,{ref:[n,G],state:j,stateAttributesMapping:Qt,props:[Te,en(te),g]}),ie=i.useRef(0),fe=pe(X=>{if(X.size===0&&ie.current===0||D.current.length===0)return;const de=ie.current;if(ie.current=X.size,X.size===de)return;const M=xe(At);if(de!==0&&!m.state.multiple&&q!==null&&et(D.current,q,C)===-1){const R=ee.current,W=R!=null&&et(D.current,R,C)!==-1?R:null;J(W,M),W===null&&(m.set("selectedIndex",null),F.current=null)}if(de!==0&&m.state.multiple&&Array.isArray(q)){const V=_=>et(D.current,_,C)!==-1,R=q.filter(_=>V(_));(R.length!==q.length||R.some(_=>!mr(q,_,C)))&&(J(R,M),R.length===0&&(m.set("selectedIndex",null),F.current=null))}if(ne&&O){m.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const V={height:""};dt(z,V),dt(ce.current,V)}}),ye=i.useMemo(()=>({...K,side:oe,alignItemWithTriggerActive:O,setControlledAlignItemWithTrigger:ae,scrollUpArrowRef:I,scrollDownArrowRef:Y}),[K,oe,O,ae]);return U.jsx(Nr,{elementsRef:d,labelsRef:h,onMapChange:fe,children:U.jsxs(dn.Provider,{value:ye,children:[A&&se&&U.jsx(zn,{inert:Wn(!ne),cutout:S}),ue]})})});function gn(t){const e=t.currentTarget.getBoundingClientRect();return e.top+1<=t.clientY&&t.clientY<=e.bottom-1&&e.left+1<=t.clientX&&t.clientX<=e.right-1}const ut="base-ui-disable-scrollbar",It={className:ut,getElement(t){return U.jsx("style",{nonce:t,href:ut,precedence:"base-ui:low",children:`.${ut}{scrollbar-width:none}.${ut}::-webkit-scrollbar{display:none}`})}},Fr=i.createContext(void 0);function _r(t){return i.useContext(Fr)}function vt(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Ur=i.createContext(void 0),jr={disableStyleElements:!1};function Br(){return i.useContext(Ur)??jr}const _e=1,zr={...Qt,...tn},Wr=i.forwardRef(function(e,n){const{render:r,className:s,finalFocus:o,...l}=e,{store:u,popupRef:f,onOpenChangeComplete:p,setOpen:b,valueRef:c,selectedItemTextRef:y,keyboardActiveRef:v,multiple:T,handleScrollArrowVisibility:x,scrollHandlerRef:w,highlightItemOnHover:a}=Ve(),{side:g,align:m,alignItemWithTriggerActive:d,setControlledAlignItemWithTrigger:h,scrollDownArrowRef:$,scrollUpArrowRef:F}=Pt(),D=_r()!=null,ee=cn(),{nonce:ce,disableStyleElements:J}=Br(),B=Le(),ne=L(u,P.id),A=L(u,P.open),se=L(u,P.mounted),q=L(u,P.popupProps),E=L(u,P.transitionStatus),z=L(u,P.triggerElement),S=L(u,P.positionerElement),C=L(u,P.listElement),te=i.useRef(0),I=i.useRef(!1),Y=i.useRef(0),k=i.useRef(!1),ae=i.useRef({}),O=$t(),K=pe(j=>{if(!S||!f.current||!k.current)return;if(I.current||!d){x();return}const G=S.style.top==="0px",ue=S.style.bottom==="0px",ie=S.getBoundingClientRect().height,fe=ft(S),ye=getComputedStyle(S),X=parseFloat(ye.marginTop),de=parseFloat(ye.marginBottom),M=Bt(getComputedStyle(f.current)),V=Math.min(fe.documentElement.clientHeight-X-de,M),R=j.scrollTop,_=zt(j);let W=0,N=null,me=!1,we=!1;const Ce=re=>{S.style.height=`${re}px`},Re=(re,he)=>{const ge=vt(re,0,V-ie);ge>0&&Ce(ie+ge),j.scrollTop=he,V-(ie+ge)<=_e&&(I.current=!0),x()};if(G){const re=_-R,he=ie+re,ge=Math.min(he,V);if(W=ge,re<=_e){Re(re,_);return}V-ge>_e?we=!0:me=!0}else if(ue){const re=R,he=ie+re,ge=Math.min(he,V),je=he-V;if(W=ge,re<=_e){Re(re,0);return}V-ge>_e?N=0:(me=!0,R<_&&(N=R-(re-je)))}if(W=Math.ceil(W),W!==0&&Ce(W),we||N!=null){const re=zt(j),he=we?re:vt(N,0,re);Math.abs(j.scrollTop-he)>_e&&(j.scrollTop=he)}(me||W>=V-_e)&&(I.current=!0),x()});i.useImperativeHandle(w,()=>K,[K]),gt({open:A,ref:f,onComplete(){A&&p?.(!0)}});const oe={open:A,transitionStatus:E,side:g,align:m};Q(()=>{!S||!f.current||Object.keys(ae.current).length||(ae.current={top:S.style.top||"0",left:S.style.left||"0",right:S.style.right,height:S.style.height,bottom:S.style.bottom,minHeight:S.style.minHeight,maxHeight:S.style.maxHeight,marginTop:S.style.marginTop,marginBottom:S.style.marginBottom})},[f,S]),Q(()=>{A||d||(k.current=!1,I.current=!1,te.current=0,Y.current=0,dt(S,ae.current))},[A,d,S,f]),Q(()=>{const j=f.current;if(!(!A||!z||!S||!j||u.state.transitionStatus==="ending")){if(!d){k.current=!0,O.request(x),j.style.removeProperty("--transform-origin");return}queueMicrotask(()=>{const G=Kr(j);j.style.removeProperty("--transform-origin");try{const ue=getComputedStyle(S),ie=getComputedStyle(j),fe=ft(z),ye=Ft(S),X=z.getBoundingClientRect(),de=S.getBoundingClientRect(),M=X.left,V=X.height,R=C||j,_=R.scrollHeight,W=parseFloat(ie.borderBottomWidth),N=parseFloat(ue.marginTop)||10,me=parseFloat(ue.marginBottom)||10,we=parseFloat(ue.minHeight)||100,Ce=Bt(ie),Re=5,re=5,he=20,ge=fe.documentElement.clientHeight-N-me,je=fe.documentElement.clientWidth,Ge=ge-X.bottom+V,Be=y.current,Fe=c.current;let Ae,Pe=0,nt=0;if(Be&&Fe){const H=Fe.getBoundingClientRect();Ae=Be.getBoundingClientRect();const le=H.left-M,Ie=Ae.left-de.left,Ee=H.top-X.top+H.height/2,Me=Ae.top-de.top+Ae.height/2;Pe=le-Ie,nt=Me-Ee}const Xe=Ge+nt+me+W;let Oe=Math.min(ge,Xe);const ht=ge-N-me,ze=Xe-Oe,We=Math.max(Re,M+Pe),rt=je-re,Je=Math.max(0,We+de.width-rt);S.style.left=`${We-Je}px`,S.style.height=`${Oe}px`,S.style.maxHeight="auto",S.style.marginTop=`${N}px`,S.style.marginBottom=`${me}px`,j.style.height="100%";const ot=R.scrollHeight-R.clientHeight,st=ze>=ot;st&&(Oe=Math.min(ge,de.height)-(ze-ot));const bt=X.top<he||X.bottom>ge-he||Oe<Math.min(_,we),xt=(ye.visualViewport?.scale??1)!==1&&Kn;if(bt||xt){k.current=!0,dt(S,ae.current),$n.flushSync(()=>h(!1));return}if(st){const H=Math.max(0,ge-Xe);S.style.top=de.height>=ht?"0":`${H}px`,S.style.height=`${Oe}px`,R.scrollTop=R.scrollHeight-R.clientHeight,te.current=Math.max(we,Oe)}else S.style.bottom="0",te.current=Math.max(we,Oe),R.scrollTop=ze;if(Ae){const H=de.top,le=de.height,Ie=Ae.top+Ae.height/2,Ee=le>0?(Ie-H)/le*100:50,Me=vt(Ee,0,100);j.style.setProperty("--transform-origin",`50% ${Me}%`)}(te.current===ge||Oe>=Ce)&&(I.current=!0),x(),setTimeout(()=>{k.current=!0})}finally{G()}})}},[u,A,S,z,c,y,f,x,d,h,O,$,F,C]),i.useEffect(()=>{if(!d||!S||!A)return;const j=Ft(S);function G(ue){b(!1,xe(Yn,ue))}return j.addEventListener("resize",G),()=>{j.removeEventListener("resize",G)}},[b,d,S,A]);const ve={...C?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":T||void 0,id:`${ne}-list`},onKeyDown(j){v.current=!0,D&&Gn.has(j.key)&&j.stopPropagation()},onMouseMove(){v.current=!1},onPointerLeave(j){if(!a||gn(j)||j.pointerType==="touch")return;const G=j.currentTarget;B.start(0,()=>{u.set("activeIndex",null),G.focus({preventScroll:!0})})},onScroll(j){C||K(j.currentTarget)},...d&&{style:C?{height:"100%"}:pn}},Te=Ne("div",e,{ref:[n,f],state:oe,stateAttributesMapping:zr,props:[q,ve,en(E),{className:!C&&d?It.className:void 0},l]});return U.jsxs(i.Fragment,{children:[!J&&It.getElement(ce),U.jsx(qn,{context:ee,modal:!1,disabled:!se,returnFocus:o,restoreFocus:!0,children:Te})]})});function Bt(t){const e=t.maxHeight||"";return e.endsWith("px")&&parseFloat(e)||1/0}function zt(t){return Math.max(0,t.scrollHeight-t.clientHeight)}const Wt=[["transform","none"],["scale","1"],["translate","0 0"]];function Kr(t){const{style:e}=t,n={};for(const[r,s]of Wt)n[r]=e.getPropertyValue(r),e.setProperty(r,s,"important");return()=>{for(const[r]of Wt){const s=n[r];s?e.setProperty(r,s):e.removeProperty(r)}}}const $r=i.forwardRef(function(e,n){const{className:r,render:s,...o}=e,{store:l,scrollHandlerRef:u}=Ve(),{alignItemWithTriggerActive:f}=Pt(),p=L(l,P.hasScrollArrows),b=L(l,P.openMethod),c=L(l,P.multiple),v={id:`${L(l,P.id)}-list`,role:"listbox","aria-multiselectable":c||void 0,onScroll(x){u.current?.(x.currentTarget)},...f&&{style:pn},className:p&&b!=="touch"?It.className:void 0},T=pe(x=>{l.set("listElement",x)});return Ne("div",e,{ref:[n,T],props:[v,o]})});let mn=(function(t){return t[t.None=0]="None",t[t.GuessFromOrder=1]="GuessFromOrder",t})({});function qr(t={}){const{label:e,metadata:n,textRef:r,indexGuessBehavior:s,index:o}=t,{register:l,unregister:u,subscribeMapChange:f,elementsRef:p,labelsRef:b,nextIndexRef:c}=Or(),y=i.useRef(-1),[v,T]=i.useState(o??(s===mn.GuessFromOrder?()=>{if(y.current===-1){const a=c.current;c.current+=1,y.current=a}return y.current}:-1)),x=i.useRef(null),w=i.useCallback(a=>{if(x.current=a,v!==-1&&a!==null&&(p.current[v]=a,b)){const g=e!==void 0;b.current[v]=g?e:r?.current?.textContent??a.textContent}},[v,p,b,e,r]);return Q(()=>{if(o!=null)return;const a=x.current;if(a)return l(a,n),()=>{u(a)}},[o,l,u,n]),Q(()=>{if(o==null)return f(a=>{const g=x.current?a.get(x.current)?.index:null;g!=null&&T(g)})},[o,f,T]),i.useMemo(()=>({ref:w,index:v}),[v,w])}const hn=i.createContext(void 0);function Ot(){const t=i.useContext(hn);if(!t)throw new Error(pt(57));return t}const Yr=i.memo(i.forwardRef(function(e,n){const{render:r,className:s,value:o=null,label:l,disabled:u=!1,nativeButton:f=!1,...p}=e,b=i.useRef(null),c=qr({label:l,textRef:b,indexGuessBehavior:mn.GuessFromOrder}),{store:y,getItemProps:v,setOpen:T,setValue:x,selectionRef:w,typingRef:a,valuesRef:g,keyboardActiveRef:m,multiple:d,highlightItemOnHover:h}=Ve(),$=Le(),F=L(y,P.isActive,c.index),D=L(y,P.isSelected,c.index,o),ee=L(y,P.isSelectedByFocus,c.index),ce=L(y,P.isItemEqualToValue),J=c.index,B=J!==-1,ne=i.useRef(null),A=ke(J);Q(()=>{if(!B)return;const O=g.current;return O[J]=o,()=>{delete O[J]}},[B,J,o,g]),Q(()=>{if(!B)return;const O=y.state.value;let K=O;d&&Array.isArray(O)&&O.length>0&&(K=O[O.length-1]),K!==void 0&&$e(o,K,ce)&&y.set("selectedIndex",J)},[B,J,d,ce,y,o]);const se={disabled:u,selected:D,highlighted:F},q=v({active:F,selected:D});q.onFocus=void 0,q.id=void 0;const E=i.useRef(null),z=i.useRef("mouse"),S=i.useRef(!1),{getButtonProps:C,buttonRef:te}=Zt({disabled:u,focusableWhenDisabled:!0,native:f});function I(O){const K=y.state.value;if(d){const oe=Array.isArray(K)?K:[],ve=D?hr(oe,o,ce):[...oe,o];x(ve,xe(Rt,O))}else x(o,xe(Rt,O)),T(!1,xe(Rt,O))}const Y={role:"option","aria-selected":D,tabIndex:F?0:-1,onFocus(){y.set("activeIndex",J)},onMouseEnter(){!m.current&&y.state.selectedIndex===null&&h&&y.set("activeIndex",J)},onMouseMove(){h&&y.set("activeIndex",J)},onMouseLeave(O){!h||m.current||gn(O)||$.start(0,()=>{y.state.activeIndex===J&&y.set("activeIndex",null)})},onTouchStart(){w.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(O){E.current=O.key,y.set("activeIndex",J)},onClick(O){S.current=!1,!(O.type==="keydown"&&E.current===null)&&(u||E.current===" "&&a.current||z.current!=="touch"&&!F||(E.current=null,I(O.nativeEvent)))},onPointerEnter(O){z.current=O.pointerType},onPointerDown(O){z.current=O.pointerType,S.current=!0},onMouseUp(O){if(u)return;if(S.current){S.current=!1;return}const K=!w.current.allowSelectedMouseUp&&D,oe=!w.current.allowUnselectedMouseUp&&!D;K||oe||z.current!=="touch"&&!F||I(O.nativeEvent)}},k=Ne("div",e,{ref:[te,n,c.ref,ne],state:se,props:[q,Y,p,C]}),ae=i.useMemo(()=>({selected:D,indexRef:A,textRef:b,selectedByFocus:ee,hasRegistered:B}),[D,A,b,ee,B]);return U.jsx(hn.Provider,{value:ae,children:k})})),Gr=i.forwardRef(function(e,n){const r=e.keepMounted??!1,{selected:s}=Ot();return r||s?U.jsx(Xr,{...e,ref:n}):null}),Xr=i.memo(i.forwardRef((t,e)=>{const{render:n,className:r,keepMounted:s,...o}=t,{selected:l}=Ot(),u=i.useRef(null),{transitionStatus:f,setMounted:p}=Ct(l),c=Ne("span",t,{ref:[e,u],state:{selected:l,transitionStatus:f},props:[{"aria-hidden":!0,children:"✔️"},o],stateAttributesMapping:tn});return gt({open:l,ref:u,onComplete(){l||p(!1)}}),c})),Jr=i.memo(i.forwardRef(function(e,n){const{indexRef:r,textRef:s,selectedByFocus:o,hasRegistered:l}=Ot(),{selectedItemTextRef:u}=Ve(),{className:f,render:p,...b}=e,c=i.useCallback(v=>{if(!v||!l)return;const T=u.current===null||!u.current.isConnected;(o||T&&r.current===0)&&(u.current=v)},[u,r,o,l]);return Ne("div",e,{ref:[c,n,s],props:b})})),bn=i.forwardRef(function(e,n){const{render:r,className:s,direction:o,keepMounted:l=!1,...u}=e,{store:f,popupRef:p,listRef:b,handleScrollArrowVisibility:c,scrollArrowsMountedCountRef:y}=Ve(),{side:v,scrollDownArrowRef:T,scrollUpArrowRef:x}=Pt(),w=o==="up"?P.scrollUpArrowVisible:P.scrollDownArrowVisible,a=L(f,w),g=L(f,P.openMethod),m=a&&g!=="touch",d=Le(),h=o==="up"?x:T,{transitionStatus:$,setMounted:F}=Ct(m);Q(()=>(y.current+=1,f.state.hasScrollArrows||f.set("hasScrollArrows",!0),()=>{y.current=Math.max(0,y.current-1),y.current===0&&f.state.hasScrollArrows&&f.set("hasScrollArrows",!1)}),[f,y]),gt({open:m,ref:h,onComplete(){m||F(!1)}});const ce=Ne("div",e,{ref:[n,h],state:{direction:o,visible:m,side:v,transitionStatus:$},props:[{"aria-hidden":!0,children:o==="up"?"▲":"▼",style:{position:"absolute"},onMouseMove(B){if(B.movementX===0&&B.movementY===0||d.isStarted())return;f.set("activeIndex",null);function ne(){const A=f.state.listElement??p.current;if(!A)return;f.set("activeIndex",null),c();const se=A.scrollTop===0,q=Math.round(A.scrollTop+A.clientHeight)>=A.scrollHeight;if(b.current.length===0&&(o==="up"?f.set("scrollUpArrowVisible",!se):f.set("scrollDownArrowVisible",!q)),o==="up"&&se||o==="down"&&q){d.clear();return}if((f.state.listElement||p.current)&&b.current&&b.current.length>0){const z=b.current,S=h.current?.offsetHeight||0;if(o==="up"){let C=0;const te=A.scrollTop+S;for(let Y=0;Y<z.length;Y+=1){const k=z[Y];if(k&&k.offsetTop>=te){C=Y;break}}const I=Math.max(0,C-1);if(I<C){const Y=z[I];Y&&(A.scrollTop=Math.max(0,Y.offsetTop-S))}else A.scrollTop=0}else{let C=z.length-1;const te=A.scrollTop+A.clientHeight-S;for(let Y=0;Y<z.length;Y+=1){const k=z[Y];if(k&&k.offsetTop+k.offsetHeight>te){C=Math.max(0,Y-1);break}}const I=Math.min(z.length-1,C+1);if(I>C){const Y=z[I];Y&&(A.scrollTop=Y.offsetTop+Y.offsetHeight-A.clientHeight+S)}else A.scrollTop=A.scrollHeight-A.clientHeight}}d.start(40,ne)}d.start(40,ne)},onMouseLeave(){d.clear()}},u]});return m||l?ce:null}),Zr=i.forwardRef(function(e,n){return U.jsx(bn,{...e,ref:n,direction:"down"})}),Qr=i.forwardRef(function(e,n){return U.jsx(bn,{...e,ref:n,direction:"up"})}),io=Sr;function lo(t){const e=qe.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=Ye("flex flex-1 text-left",n),e[3]=n,e[4]=s):s=e[4];let o;return e[5]!==r||e[6]!==s?(o=U.jsx(Er,{className:s,"data-slot":"select-value",...r}),e[5]=r,e[6]=s,e[7]=o):o=e[7],o}function co(t){const e=qe.c(15);let n,r,s,o,l;e[0]!==t?({className:r,size:l,id:s,children:n,...o}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=o,e[5]=l):(n=e[1],r=e[2],s=e[3],o=e[4],l=e[5]);const u=l===void 0?"default":l;let f;e[6]!==r?(f=Ye("flex w-fit items-center justify-between gap-1.5 whitespace-nowrap rounded-md border border-input bg-input/20 px-2 py-1.5 text-xs/relaxed outline-none transition-colors focus-visible:border-ring focus-visible:ring-2 focus-visible:ring-ring/30 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-2 aria-invalid:ring-destructive/20 data-[size=default]:h-7 data-[size=sm]:h-6 data-placeholder:text-muted-foreground *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-1.5 dark:bg-input/30 dark:aria-invalid:border-destructive/50 dark:aria-invalid:ring-destructive/40 dark:hover:bg-input/50 [&_svg:not([class*='size-'])]:size-3.5 [&_svg]:pointer-events-none [&_svg]:shrink-0",r),e[6]=r,e[7]=f):f=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=U.jsx(Cr,{render:U.jsx(on,{className:"pointer-events-none size-3.5 text-muted-foreground"})}),e[8]=p):p=e[8];let b;return e[9]!==n||e[10]!==s||e[11]!==o||e[12]!==u||e[13]!==f?(b=U.jsxs(Tr,{className:f,"data-size":u,"data-slot":"select-trigger",id:s,...o,children:[n,p]}),e[9]=n,e[10]=s,e[11]=o,e[12]=u,e[13]=f,e[14]=b):b=e[14],b}function ao(t){const e=qe.c(26);let n,r,s,o,l,u,f,p;e[0]!==t?({className:r,children:n,side:o,sideOffset:l,align:u,alignOffset:f,alignItemWithTrigger:p,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=o,e[5]=l,e[6]=u,e[7]=f,e[8]=p):(n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],f=e[7],p=e[8]);const b=o===void 0?"bottom":o,c=l===void 0?4:l,y=u===void 0?"center":u,v=f===void 0?0:f,T=p===void 0?!0:p;let x;e[9]!==r?(x=Ye("data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative isolate z-50 max-h-(--available-height) w-(--anchor-width) min-w-32 origin-(--transform-origin) overflow-y-auto overflow-x-hidden rounded-lg bg-popover text-popover-foreground shadow-md ring-1 ring-foreground/10 duration-100 data-closed:animate-out data-open:animate-in",r),e[9]=r,e[10]=x):x=e[10];let w;e[11]===Symbol.for("react.memo_cache_sentinel")?(w=U.jsx(eo,{}),e[11]=w):w=e[11];let a;e[12]!==n?(a=U.jsx($r,{children:n}),e[12]=n,e[13]=a):a=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=U.jsx(to,{}),e[14]=g):g=e[14];let m;e[15]!==s||e[16]!==x||e[17]!==a?(m=U.jsxs(Wr,{className:x,"data-slot":"select-content",...s,children:[w,a,g]}),e[15]=s,e[16]=x,e[17]=a,e[18]=m):m=e[18];let d;return e[19]!==y||e[20]!==T||e[21]!==v||e[22]!==b||e[23]!==c||e[24]!==m?(d=U.jsx(Pr,{children:U.jsx(Hr,{align:y,alignItemWithTrigger:T,alignOffset:v,className:"isolate z-50",side:b,sideOffset:c,children:m})}),e[19]=y,e[20]=T,e[21]=v,e[22]=b,e[23]=c,e[24]=m,e[25]=d):d=e[25],d}function uo(t){const e=qe.c(13);let n,r,s;e[0]!==t?({className:r,children:n,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s):(n=e[1],r=e[2],s=e[3]);let o;e[4]!==r?(o=Ye("relative flex min-h-7 w-full cursor-default select-none items-center gap-2 rounded-md px-2 py-1 text-xs/relaxed outline-hidden focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground data-disabled:pointer-events-none data-disabled:opacity-50 [&_svg:not([class*='size-'])]:size-3.5 [&_svg]:pointer-events-none [&_svg]:shrink-0 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),e[4]=r,e[5]=o):o=e[5];let l;e[6]!==n?(l=U.jsx(Jr,{className:"flex flex-1 shrink-0 gap-2 whitespace-nowrap",children:n}),e[6]=n,e[7]=l):l=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=U.jsx(Gr,{render:U.jsx("span",{className:"pointer-events-none absolute right-2 flex items-center justify-center"}),children:U.jsx(Xn,{className:"pointer-events-none"})}),e[8]=u):u=e[8];let f;return e[9]!==s||e[10]!==o||e[11]!==l?(f=U.jsxs(Yr,{className:o,"data-slot":"select-item",...s,children:[l,u]}),e[9]=s,e[10]=o,e[11]=l,e[12]=f):f=e[12],f}function eo(t){const e=qe.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=Ye("top-0 z-10 flex w-full cursor-default items-center justify-center bg-popover py-1 [&_svg:not([class*='size-'])]:size-3.5",n),e[3]=n,e[4]=s):s=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=U.jsx(rr,{}),e[5]=o):o=e[5];let l;return e[6]!==r||e[7]!==s?(l=U.jsx(Qr,{className:s,"data-slot":"select-scroll-up-button",...r,children:o}),e[6]=r,e[7]=s,e[8]=l):l=e[8],l}function to(t){const e=qe.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=Ye("bottom-0 z-10 flex w-full cursor-default items-center justify-center bg-popover py-1 [&_svg:not([class*='size-'])]:size-3.5",n),e[3]=n,e[4]=s):s=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=U.jsx(on,{}),e[5]=o):o=e[5];let l;return e[6]!==r||e[7]!==s?(l=U.jsx(Zr,{className:s,"data-slot":"select-scroll-down-button",...r,children:o}),e[6]=r,e[7]=s,e[8]=l):l=e[8],l}export{io as S,co as a,lo as b,ao as c,uo as d};
