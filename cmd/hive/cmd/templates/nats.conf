# NATS Server Configuration
# Generated by Hive admin init

# Server configuration
{{ if .BindIP }}
listen: {{.BindIP}}:4222
{{ else }}
listen: 0.0.0.0:4222
{{ end }}


{{ if and .ClusterBindIP .ClusterRoutes }}
cluster {
  name: {{ .ClusterName }}
  listen: {{.ClusterBindIP}}:4248

  routes = [
{{- range .ClusterRoutes }}
    "nats://{{ . }}",
{{- end }}
  ]
}
{{ end }}


server_name: hive-nats-{{.Node}}

# Authorization
authorization {
#  token: "{{.NatsToken}}"
}

# JetStream for persistent messaging and KV store
jetstream {
  store_dir: "{{.DataDir}}/nats/"
  max_memory_store: 1GB
  max_file_store: 10GB
}

# Logging
debug: false
trace: false
logtime: true
log_file: "{{.DataDir}}/logs/nats.log"

# Limits
max_connections: 1000
max_payload: 1MB
max_pending: 64MB

# Monitoring
{{ if .BindIP }}
http: {{.BindIP}}:8222
{{ else }}
http_port: 8222
{{ end }}

